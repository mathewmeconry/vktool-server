(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{154:function(e,t,n){e.exports=n(265)},177:function(e,t,n){},265:function(e,t,n){"use strict";n.r(t);var a=n(75),r=n(24),o=n(135);a.b.add(o.a,r.F,r.f,r.o,r.r,r.p,r.k,r.n,r.x,r.D,r.y,r.a,r.u,r.j,r.h,r.d,r.B,r.G,r.g,r.C,r.e,r.A,r.z,r.v,r.m,r.l,r.q,r.w,r.s,r.i,r.i,r.E,r.c,r.b,r.t);var i=n(0),c=n.n(i),l=n(32),s=n.n(l),u=n(23),d=n(44),m=n(53),p=n(4),f=n.n(p),b=n(10),h=n(14),v=n(16),E=n(21),y={NAVIBAR_TOGGLE:"navibar_toggle",NAVIBAR_OPEN:"navibar_open",NAVIBAR_CLOSE:"navibar_close",NAVIBAR_LEVEL_OPEN:"navibar_level_open",NAVIBAR_LEVEL_COLLAPSE:"navibar_level_collapse",NOTIFICATION_SUCCESS:"notification_success",NOTIFICATION_ERROR:"notification_error",LOGOUT:"logout",WORKING:"working"},g=function(){function e(){Object(h.a)(this,e)}return Object(v.a)(e,null,[{key:"toggleNavibar",value:function(){return{type:y.NAVIBAR_TOGGLE}}},{key:"openNavibar",value:function(){return{type:y.NAVIBAR_OPEN}}},{key:"closeNavibar",value:function(){return{type:y.NAVIBAR_CLOSE}}},{key:"openNavibarLevel",value:function(e){return{type:y.NAVIBAR_LEVEL_OPEN,payload:e}}},{key:"collapseNavibarLevel",value:function(){return{type:y.NAVIBAR_LEVEL_COLLAPSE}}},{key:"showError",value:function(e){return{type:y.NOTIFICATION_ERROR,payload:e}}},{key:"showSuccess",value:function(e){return{type:y.NOTIFICATION_SUCCESS,payload:e}}},{key:"logout",value:function(){return function(){var e=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(E.d)("/login")),e.abrupt("return",{type:y.LOGOUT});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},{key:"setWorking",value:function(e){return{type:y.WORKING,payload:e}}}]),e}(),O=n(77),k=n(63);var S={ui:Object(m.combineReducers)({navibar_open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!k.a.mobile();switch((arguments.length>1?arguments[1]:void 0).type){case y.NAVIBAR_TOGGLE:return!e;case y.NAVIBAR_OPEN:return!0;case y.NAVIBAR_CLOSE:return!1;default:return e}},navibar_level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.NAVIBAR_LEVEL_OPEN:return t.payload;case y.NAVIBAR_LEVEL_COLLAPSE:return"";default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y.NOTIFICATION_SUCCESS:return O.toast.success(t.payload,{autoClose:2e3,position:k.a.mobile()?"bottom-center":"top-right"}),e;case y.NOTIFICATION_ERROR:return O.toast.error(t.payload,{autoClose:2e3,position:k.a.mobile()?"bottom-center":"top-right"}),e;default:return e}}})},N=n(137),j=n(73),x=n(79),C=n(138);var A,w=n(281),I=n(175),D=n(278);!function(e){e.AUTHENTICATED="AUTHENTICATED",e.CONTACTS_READ="CONTACTS_READ",e.CONTACTS_EDIT="CONTACTS_EDIT",e.MEMBERS_READ="MEMBERS_READ",e.MEMBERS_EDIT="MEMBERS_EDIT",e.MAILING_LISTS="MAILING_LISTS",e.RANKS_READ="RANKS_READ",e.RANKS_EDIT="RANKS_EDIT",e.ORDERS_READ="ORDERS_READ",e.ORDERS_EDIT="ORDERS_EDIT",e.COMPENSATIONS_READ="COMPENSATIONS_READ",e.COMPENSATIONS_CREATE="COMPENSATIONS_CREATE",e.COMPENSATIONS_EDIT="COMPENSATIONS_EDIT",e.COMPENSATIONS_APPROVE="COMPENSATIONS_APPROVE",e.BILLINGREPORTS_READ="BILLINGREPORTS_READ",e.BILLINGREPORTS_CREATE="BILLINGREPORTS_CREATE",e.BILLINGREPORTS_EDIT="BILLINGREPORTS_EDIT",e.BILLINGREPORTS_APPROVE="BILLINGREPORTS_APPROVE",e.DRAFT_READ="DRAFT_READ",e.DRAFT_CREATE="DRAFT_CREATE",e.DRAFT_EDIT="DRAFT_EDIT",e.PAYOUTS_READ="PAYOUTS_READ",e.PAYOUTS_CREATE="PAYOUTS_CREATE",e.PAYOUTS_SEND="PAYOUTS_SEND",e.LOGOFFS_READ="LOGOFFS_READ",e.LOGOFFS_CREATE="LOGOFFS_CREATE",e.LOGOFFS_EDIT="LOGOFFS_EDIT",e.LOGOFFS_APPROVE="LOGOFFS_APPROVE",e.ADMIN="ADMIN"}(A||(A={}));var T=n(18),R=n(11),L=n(17),_=n(19),P=n(70),M=n(13),B=n(12);function $(){var e=Object(M.a)(["\n  query GET_USERS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n  ) {\n    getAllUsers(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        displayName\n        roles\n      }\n    }\n  }\n"]);return $=function(){return e},e}function F(){var e=Object(M.a)(["\n  query GET_USER($id: Int!) {\n    getUser(id: $id) {\n      id\n      displayName\n      bexioContact {\n        bexioId\n        id\n        firstname\n        lastname\n      }\n      roles\n    }\n  }\n"]);return F=function(){return e},e}function G(){var e=Object(M.a)(["\n  query GET_ME {\n    me {\n      displayName\n      bexioContact {\n        id\n      }\n    }\n  }\n"]);return G=function(){return e},e}function V(){var e=Object(M.a)(["\n  query GET_MY_ID {\n    me {\n      id\n    }\n  }\n"]);return V=function(){return e},e}function q(){var e=Object(M.a)(["\n  query GET_MY_ROLES {\n    me {\n      roles\n    }\n  }\n"]);return q=function(){return e},e}var U=Object(B.a)(q()),K=Object(B.a)(V()),z=Object(B.a)(G()),H=Object(B.a)(F()),Y=Object(B.a)($());function W(e){var t=Object(P.c)(z),n=(t.loading,t.error),a=t.data;if(n)return null;var r="navibar-open";return e.open||(r="navibar-collapsed"),c.a.createElement("div",{id:"header"},c.a.createElement("div",{id:"header-title",className:r},c.a.createElement("div",{id:"user"},null===a||void 0===a?void 0:a.me.displayName)),c.a.createElement("div",{id:"header-bars",onClick:e.onClick},c.a.createElement("span",null,c.a.createElement(_.a,{icon:"bars"}))))}var Q=n(22),J=n(273),Z=n(280),X=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(T.a)(this,Object(R.a)(t).call(this,e))).onMouseUp=n.onMouseUp.bind(Object(Q.a)(n)),n.level=n.props.level||0,n}return Object(L.a)(t,e),Object(v.a)(t,[{key:"onMouseUp",value:function(e){0===this.level&&this.props.onClose&&this.props.onClose(),this.props.onMouseUp&&this.props.onMouseUp(e),k.a.mobile()&&this.props.toggleNavibar&&this.props.to&&this.props.toggleNavibar()}},{key:"renderLinkElement",value:function(e,t,n){return e.match(/^(http|https):\/\//)?c.a.createElement("a",{href:e,className:"navibar-element",onMouseUp:n,target:"_blank"},t):c.a.createElement(J.a,{exact:!0,to:e,className:"navibar-element",activeClassName:"navibar-element-active",onMouseUp:n},t)}},{key:"render",value:function(){var e,t=c.a.createElement("p",null);return this.props.leftIcon&&(e=c.a.createElement(_.a,{icon:this.props.leftIcon,className:"navibar-element-icon"})),this.props.rightIcon&&(t=c.a.createElement(_.a,{icon:this.props.rightIcon,className:"navibar-element-icon navibar-element-icon-right float-right"})),this.props.to?this.renderLinkElement(this.props.to,[c.a.createElement("li",{key:this.props.to},e,c.a.createElement("p",{className:"navibar-element-text"},this.props.text),t)],this.onMouseUp):c.a.createElement("li",{className:"navibar-element",onMouseUp:this.onMouseUp,key:this.props.text},e,c.a.createElement("p",{className:"navibar-element-text"},this.props.text),t)}}]),t}(i.Component),ee=Object(Z.a)(Object(u.c)(function(e){return{navibar_open:e.ui.navibar_open}},function(e){return{onClose:function(){e(g.collapseNavibarLevel())},toggleNavibar:function(){e(g.toggleNavibar())}}})(X));function te(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var ne=function(e){Object(L.a)(n,e);var t=te(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).onClick=a.onClick.bind(Object(Q.a)(a)),a}return Object(v.a)(n,[{key:"onClick",value:function(e){this.props.open_level===this.props.id?this.props.onClose():this.props.onOpen(this.props.id)}},{key:"render",value:function(){var e=this,t="",n="angle-down";return this.props.id!==this.props.open_level&&(t=" level-collapsed",n="angle-left"),c.a.createElement("div",null,c.a.createElement(ee,{leftIcon:this.props.leftIcon,rightIcon:n,text:this.props.text,onMouseUp:this.onClick}),c.a.createElement("div",{key:"levelContainer-"+this.props.id,className:"level-container level-"+this.props.level.toString()+t},i.Children.map(this.props.children,function(t){if(t)return Object(i.cloneElement)(t,{level:e.props.level})})))}}]),n}(i.Component),ae=Object(u.c)(function(e){return{open_level:e.ui.navibar_level}},function(e){return{onOpen:function(t){e(g.openNavibarLevel(t))},onClose:function(){e(g.collapseNavibarLevel())}}})(ne),re=function(){function e(){Object(h.a)(this,e)}return Object(v.a)(e,null,[{key:"loadConfig",value:function(){e.apiEndpoint="".concat(window.location.protocol,"//").concat(window.location.host)}},{key:"isModeProduction",value:function(){return e.isMode("production")}},{key:"isModeDev",value:function(){return e.isMode("development")}},{key:"isMode",value:function(e){return"production".toLowerCase()===e.toLowerCase()}}]),e}();function oe(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ce(e){var t=Object(P.c)(U),n=t.loading,a=t.error,r=t.data;if(n)return c.a.createElement("div",null);if(a)return c.a.createElement("div",null);if(!r)return c.a.createElement("div",null);function o(e,t){if(!t)return e;var n,a=oe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(r.me.roles.includes(o)||r.me.roles.includes(A.ADMIN))return e}}catch(i){a.e(i)}finally{a.f()}}return c.a.createElement("div",{id:"navibar",className:e.open?"navibar-open":"navibar-collapsed"},c.a.createElement("ol",null,o(c.a.createElement(ee,{to:"/dashboard",text:"Dashboard",leftIcon:"tachometer-alt"}),[A.AUTHENTICATED]),o(c.a.createElement(ee,{to:"/members",text:"Mitglieder",leftIcon:"users"}),[A.MEMBERS_READ]),o(c.a.createElement(ee,{to:"/mailing-lists",text:"Verteiler",leftIcon:"mail-bulk"}),[A.MAILING_LISTS]),o(c.a.createElement(ae,{text:"Aufgebot",leftIcon:"address-book",id:"draft",level:1},o(c.a.createElement(ee,{to:"/draft/collection-points",leftIcon:"map-marker-alt",text:"Abholpunkte"}),[A.DRAFT_READ]),o(c.a.createElement(ee,{to:"/draft/logoffs",leftIcon:"user-times",text:"Abmeldungen"}),[A.LOGOFFS_READ])),[A.DRAFT_READ,A.LOGOFFS_READ]),o(c.a.createElement(ee,{to:"/orders",text:"Auftr\xe4ge",leftIcon:"file-alt"}),[A.ORDERS_READ]),o(c.a.createElement(ae,{text:"Verrechnungsrapporte",leftIcon:"file-signature",id:"billingreports",level:1},o(c.a.createElement(ee,{to:"/billing-reports/add",leftIcon:"plus",text:"Erstellen"}),[A.BILLINGREPORTS_CREATE]),c.a.createElement(ee,{to:"/billing-reports",leftIcon:"list",text:"Alle"}),c.a.createElement(ee,{to:"https://vkazu.sharepoint.com/:w:/r/Vorlagen/Verrechungsrapport.docx?d=w66977fb79dfd4ab3832ca05fd6d9b8d2&csf=1&e=Spme13",text:"Word Vorlage",leftIcon:"file-word"})),[A.BILLINGREPORTS_READ,A.BILLINGREPORTS_CREATE]),o(c.a.createElement(ee,{to:"/compensations",leftIcon:"dollar-sign",text:"Entsch\xe4digungen"}),[A.COMPENSATIONS_READ]),o(c.a.createElement(ee,{to:"/payouts",text:"Auszahlungen",leftIcon:"file-invoice-dollar"}),[A.PAYOUTS_READ]),o(c.a.createElement(ee,{to:"/users",text:"Benutzer",leftIcon:"user"}),[A.ADMIN]),c.a.createElement(ee,{to:"https://vkazu.sharepoint.com/Dokumente",text:"Dokumente",leftIcon:"external-link-alt"}),c.a.createElement(ee,{to:"".concat(re.apiEndpoint,"/api/logout"),text:"Abmelden",leftIcon:"power-off"})))}function le(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var se=function(e){Object(L.a)(n,e);var t=le(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(v.a)(n,[{key:"render",value:function(){var e="navibar-open";return this.props.open||(e="navibar-collapsed"),c.a.createElement("div",{className:"body"},c.a.createElement(W,{open:this.props.open,onClick:this.props.open?this.props.closeNavibar:this.props.openNavibar}),c.a.createElement(ce,{open:this.props.open}),c.a.createElement("div",{className:"content ".concat(e)},c.a.createElement("div",{className:"content-top"},c.a.createElement("h1",{className:"page-title"},this.props.title)),c.a.createElement("div",{className:"content-body container-fluid"},this.props.children)))}}]),n}(i.Component),ue=Object(u.c)(function(e){return{open:e.ui.navibar_open}},function(e){return{closeNavibar:function(){e(g.closeNavibar())},openNavibar:function(){e(g.openNavibar())}}})(se),de=function(e){function t(){return Object(h.a)(this,t),Object(T.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return c.a.createElement(ue,{title:""},c.a.createElement("div",{className:"gandalf"},c.a.createElement("div",{className:"fireball"}),c.a.createElement("div",{className:"skirt"}),c.a.createElement("div",{className:"sleeves"}),c.a.createElement("div",{className:"shoulders"},c.a.createElement("div",{className:"hand left"}),c.a.createElement("div",{className:"hand right"})),c.a.createElement("div",{className:"head"},c.a.createElement("div",{className:"hair"}),c.a.createElement("div",{className:"beard"}))),c.a.createElement("div",{className:"message"},c.a.createElement("h1",null,"403 - You Shall Not Pass"),c.a.createElement("p",null,"Uh oh, Gandalf is blocking the way!",c.a.createElement("br",null),"Maybe you have a typo in the url? Or you meant to go to a different location? Like...Hobbiton?")))}}]),t}(i.Component);function me(){return c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement("div",{className:"lds-ellipsis"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)))}function pe(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var fe=function(e){Object(L.a)(n,e);var t=pe(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return c.a.createElement("div",{className:"loading-animation "+(this.props.fullscreen?"fullscreen":"")},c.a.createElement(me,null),this.props.children)}}]),n}(i.Component);function be(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ve(e){var t=Object(P.c)(U),n=t.loading,a=t.error,r=t.data;if(n||!r)return c.a.createElement(fe,{fullscreen:!0});if(e.showError)return c.a.createElement(I.a,{exact:e.exact,path:e.path,component:de});var o,i=be(e.roles);try{for(i.s();!(o=i.n()).done;){var l=o.value;if(r.me.roles.includes(l)||r.me.roles.includes(A.ADMIN))return c.a.createElement(I.a,{exact:e.exact,path:e.path,component:e.component})}}catch(s){i.e(s)}finally{i.f()}return a&&a.message.indexOf("Access denied!")>-1?c.a.createElement(I.a,{exact:e.exact,path:e.path,component:function(){return c.a.createElement(D.a,{push:!0,to:{pathname:"/login",state:{prevLocation:(e.location||{pathname:""}).pathname}}})}}):c.a.createElement(I.a,{exact:e.exact,path:e.path,component:de})}var Ee=n(56),ye=n(67),ge=n(39),Oe=n(74),ke=n(38),Se=n(152),Ne=(n(177),n(179),function(e){function t(){return Object(h.a)(this,t),Object(T.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e,t=this.props.actions||[];return this.props.title?e=this.props.title&&c.a.isValidElement(this.props.title)?c.a.createElement("div",{className:"panel-header d-flex align-items-center"},this.props.title,c.a.createElement("div",{className:"panel-actions"},t.map(function(e){return e}))):c.a.createElement("div",{className:"panel-header"},c.a.createElement("span",{className:"panel-title"},this.props.title),c.a.createElement("div",{className:"panel-actions"},t.map(function(e){return e}))):this.props.actions&&this.props.actions.length>0&&(e=c.a.createElement("div",{className:"panel-header"},c.a.createElement("div",{className:"panel-actions"},t.map(function(e){return e})))),c.a.createElement("div",{className:"panel "+(this.props.className||"")},e,c.a.createElement("div",{className:"panel-body ".concat(this.props.scrollable?"panel-body-scrollable":"")},this.props.children))}}]),t}(i.Component)),je=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(T.a)(this,Object(R.a)(t).call(this,e))).className="col",n.props.className&&n.props.className.indexOf("col")>-1?n.className=n.props.className:n.props.className&&(n.className+=" "+n.props.className),n}return Object(L.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:this.className},this.props.children)}}]),t}(i.Component),xe=function(e){function t(){return Object(h.a)(this,t),Object(T.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"row "+this.props.className},this.props.children)}}]),t}(i.Component),Ce=n(176);function Ae(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var we=function(e){Object(L.a)(n,e);var t=Ae(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).onCheck=a.onCheck.bind(Object(Q.a)(a)),a.state={checked:a.props.checked||!1},a}return Object(v.a)(n,[{key:"onCheck",value:function(e){!0!==this.props.editable&&void 0!==this.props.editable||(this.setState({checked:!this.state.checked}),this.props.onChange(e))}},{key:"componentDidUpdate",value:function(e){this.props.hasOwnProperty("checked")&&this.props.checked!==e.checked&&this.setState({checked:this.props.checked||!1})}},{key:"render",value:function(){return c.a.createElement("span",{className:this.props.className},c.a.createElement("input",{id:this.props.id||"",type:"checkbox",checked:this.state.checked||!1,onChange:this.onCheck,required:!!this.props.required}),c.a.createElement("label",{htmlFor:"food"},this.props.label||""))}}]),n}(i.Component),Ie=n(113),De=n.n(Ie),Te=(n(181),function(e){function t(){return Object(h.a)(this,t),Object(T.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e,t=this,n=function(e,t){};switch(this.props.onChange&&(n=this.props.onChange),this.props.type){case"checkbox":return c.a.createElement(we,{checked:this.props.value,editable:this.props.editable,onChange:function(e){return n(t.props.name,e.target.checked)},label:"",required:!!this.props.required,"aria-describedby":this.props.name,className:this.props.className});case"textarea":return c.a.createElement("textarea",{name:this.props.name,value:this.props.value,onChange:function(e){return n(t.props.name,e.target.value)},className:"form-entry form-control"+(this.props.editable?"":"-plaintext")+" ".concat(this.props.className),readOnly:!this.props.editable,required:!!this.props.required,"aria-describedby":this.props.name});case"date":return e=this.props.value,"string"===typeof this.props.value&&(e=new Date(this.props.value)),""===this.props.value&&(e=null),this.props.editable?c.a.createElement(De.a,{name:this.props.name,onChange:function(e,a){return n(t.props.name,e)},selected:e,className:"form-entry form-control"+" ".concat(this.props.className),allowSameDay:!0,required:!!this.props.required,dateFormat:"dd.MM.yyyy",disabledKeyboardNavigation:!0,"aria-describedby":this.props.name}):e instanceof Date?e.toLocaleDateString():"";case"datetime":return e=this.props.value,"string"===typeof this.props.value&&(e=new Date(this.props.value)),""===this.props.value&&(e=null),this.props.editable?c.a.createElement(De.a,{name:this.props.name,onChange:function(e,a){return n(t.props.name,e)},selected:e,showTimeSelect:!0,className:"form-entry form-control"+" ".concat(this.props.className),required:!!this.props.required,timeFormat:"HH:mm",dateFormat:"dd.MM.yyyy HH:mm",disabledKeyboardNavigation:!0,shouldCloseOnSelect:!1,"aria-describedby":this.props.name}):e instanceof Date?e.toLocaleString():"";case"select":if(this.props.options)return c.a.createElement("select",{name:this.props.name,value:this.props.value,onChange:function(e){return n(t.props.name,e.target.value)},className:"form-entry form-control"+(this.props.editable?"":"-plaintext")+" ".concat(this.props.className),required:!!this.props.required,"aria-describedby":this.props.name},this.props.options.map(function(e){return c.a.createElement("option",{value:e},e)}));default:return c.a.createElement("input",{name:this.props.name,type:this.props.type||"text",value:this.props.value,onChange:function(e){return n(t.props.name,e.target.value)},className:"form-entry form-control"+(this.props.editable?"":"-plaintext")+" ".concat(this.props.className),readOnly:!this.props.editable,required:!!this.props.required,"aria-describedby":this.props.name})}}}]),t}(i.Component));function Re(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _e(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var Pe=function(e){Object(L.a)(n,e);var t=_e(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).sortClick=a.sortClick.bind(Object(Q.a)(a)),a.search=a.search.bind(Object(Q.a)(a)),a.ref=a.ref.bind(Object(Q.a)(a)),a.onColumnDataChange=a.onColumnDataChange.bind(Object(Q.a)(a)),a.props.defaultSort?a.state={sortKey:a.props.defaultSort.keys.join("-"),sortDirection:a.props.defaultSort.direction,searchableKeys:a.genSearchKeys(a.props.columns),filter:a.props.defaultFilter||(a.props.filters||[{id:""}])[0].id}:a.state={sortKey:"",sortDirection:"asc",searchableKeys:a.genSearchKeys(a.props.columns),filter:a.props.defaultFilter||(a.props.filters||[{id:""}])[0].id},a}return Object(v.a)(n,[{key:"onColumnDataChange",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.props.columns.find(function(t){var n="";if(t.keys instanceof Array)n=t.keys.join("-");else for(var a in t.keys)n+="_"+a+"."+t.keys[a].join("-");return n===e});r&&r.onChange&&r.onChange(t,e,n,a)}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.setState({searchableKeys:this.genSearchKeys(this.props.columns),filter:this.props.defaultFilter})}},{key:"ref",value:function(e){this.props.ref&&this.props.ref(e)}},{key:"goDownFilterKey",value:function(e,t){return"string"===typeof t?e[t]:this.goDownFilterKey(e[Object.keys(t)[0]],t[Object.keys(t)[0]])}},{key:"filterMatcher",value:function(e,t){switch(e.type){case"eq":return e.value instanceof RegExp?e.value.test(t.toString()):t.toString()===e.value;case"lt":return t<e.value;case"lte":return t<=e.value;case"gt":return t>e.value;case"gte":return t>=e.value}}},{key:"filter",value:function(e,t){var n=this;if(t=t||this.props.data){if(this.props.filters){var a=this.props.filters.find(function(t){return t.id===e});if(a){if(a.filters.find(function(e){return"any"===e.type}))return t;if(t instanceof Array)return t.filter(function(e){for(var t=!0,r=0,o=a.filters.length;t&&r<o;){var i=a.filters[r];if("cu"===i.type)t=i.filter(e);else{var c=n.goDownFilterKey(e,i.key);t=n.filterMatcher(i,c)}r+=1}return t});var r=Object.keys(t).filter(function(e){for(var r=t[e],o=!0,i=0,c=a.filters.length;o&&i<c;){var l=a.filters[i];if("cu"===l.type)o=l.filter(r);else{var s=n.goDownFilterKey(r,l.key);o=n.filterMatcher(l,s)}i+=1}return o}),o={};return r.forEach(function(e){o[e]=t[e]}),o}}return t}return[]}},{key:"sort",value:function(e,t,n){var a=this.genSortKeys(e),r=[];for(var o in n=n||this.props.data){var i=n[o],c=[];for(var l in a){var s=a[l];if(s instanceof Array){var u,d=Re(s);try{for(d.s();!(u=d.n()).done;){var m=u.value;i[l]&&(m.indexOf("phone")>-1?c.push(i[l][m].replace(" ","")):i[s]instanceof Date?c.push(i[s].getTime()):c.push(i[l][m]))}}catch(v){d.e(v)}finally{d.f()}}else s.indexOf("phone")>-1?c.push(i[s].replace(" ","")):i[s]instanceof Date?c.push(i[s].getTime()):c.push(i[s])}r.push({id:o,value:c.join(" ").toLowerCase()})}r.sort(function(e,n){var a,r;return a=parseFloat(e.value),r=parseFloat(n.value),(isNaN(a)||isNaN(r))&&(a=e.value,r=n.value),a<r?"asc"===t?-1:1:a>r?"asc"===t?1:-1:0});for(var p={},f=0,b=r;f<b.length;f++){var h=b[f];p["_".concat(h.id)]=this.props.data[h.id]}return p}},{key:"genSortKeys",value:function(e){var t=[e];e.indexOf("_")>-1&&(t=e.split("_"));var n,a={},r=Re(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;o&&(o.indexOf(".")>-1?a[o.split(".")[0]]=o.split(".")[1].split("-"):a=o.split("-"))}}catch(i){r.e(i)}finally{r.f()}return a}},{key:"sortClick",value:function(e){var t=e.target.dataset.key;t||(t=e.target.parentElement.dataset.key);var n="asc";this.state.sortKey===t&&(n="asc"===this.state.sortDirection?"desc":"asc"),this.props.onSort&&this.props.onSort(e,this.genSortKeys(t),n),this.setState({sortDirection:n,sortKey:t})}},{key:"genSearchKeys",value:function(e){var t,n=[],a=Re(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.searchable&&(r.keys instanceof Array?n=n.concat(r.keys):n.push(r.keys))}}catch(o){a.e(o)}finally{a.f()}return n}},{key:"search",value:function(e,t){var n={};if(t=t||this.props.data,e&&this.state.searchableKeys.length>0){for(var a in t){var r,o=t[a],i="",c=Re(this.state.searchableKeys);try{for(c.s();!(r=c.n()).done;){var l=r.value;if(l instanceof Object)for(var s in l){var u,d=Re(l[s]);try{for(d.s();!(u=d.n()).done;){var m=u.value;o[s]&&o[s][m]&&(m.indexOf("phone")>-1&&(i+=o[s][m].toString().replace(" ","")+" "),i+=o[s][m].toString()+" ")}}catch(p){d.e(p)}finally{d.f()}}else"string"===typeof l&&o.hasOwnProperty(l)&&null!==o[l]&&(l.indexOf("phone")>-1&&(i+=o[l].toString().replace(" ","")+" "),i+=o[l].toString()+" ")}}catch(p){c.e(p)}finally{c.f()}i.toLowerCase().indexOf(e.toLowerCase())>-1&&!n.hasOwnProperty(a)&&(n[a]=o)}return n}return t}},{key:"renderColumnValues",value:function(e,t){var n=this;if(!new RegExp(/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+/).test(e)||e instanceof Array||(e=new Date(e)),"boolean"===typeof e)return e?"\u2713":"\u2a2f";if(e instanceof Array)return e.map(function(e){return n.renderColumnValues(e,t)}).join(",");if(t.format){var a,r=t.format;if(t.format.indexOf("(")>-1&&t.format.indexOf(")")>-1){var o=t.format.match(/(\w+)\((.*)\)/);o&&o.length>2&&(r=o[1],a=o[2])}if(e[r])return e[r](a)}return(e||"").toString()}},{key:"renderRows",value:function(){var e=this,t=[],n=this.filter(this.state.filter||"");n=this.search(this.props.searchString||"",n),n=this.sort(this.state.sortKey,this.state.sortDirection,n),this.props.onDataChange&&this.props.onDataChange(n);var a=function(a){var r=n[a],o=[];e.props.checkable&&o.push(c.a.createElement("td",{style:{width:"40px"}},c.a.createElement(we,{onChange:e.props.onCheck||function(){}})));var i,l=Re(e.props.columns);try{var s=function(){var t=i.value,n=t.keys instanceof Array?t.keys.join("-"):Object.keys(t.keys).map(function(e){return t.keys[e].join("-")}).join("-");if(t.content)o.push(c.a.createElement("td",{key:n},t.content||""));else{var a=[];if(t.keys instanceof Array)a=t.keys.map(function(n){return e.renderColumnValues(r[n],t)});else{var l=function(o){n="".concat(n).concat(o),a=a.concat(t.keys[o].map(function(n){return r.hasOwnProperty(o)&&r[o]?e.renderColumnValues(r[o][n],t):""}))};for(var s in t.keys)l(s)}t.link?o.push(c.a.createElement("td",{className:t.className||"",key:"".concat(r.id,"-").concat(n)},c.a.createElement("a",{key:"".concat(r.id,"-").concat(n,"-a"),href:(t.linkPrefix?t.linkPrefix:"")+a.join(" "),target:t.linkPrefix&&(t.linkPrefix.match(/w+:/i)||[]).length>0?"":"_blank"},(t.prefix?t.prefix:"")+a.join(" ")+(t.suffix?t.suffix:"")))):t.editable?o.push(c.a.createElement("td",{className:t.className||"",key:"".concat(r.id,"-").concat(n)},c.a.createElement(Te,{name:n,value:a.join(" "),editable:!0,type:t.type,onChange:function(t,a){return e.onColumnDataChange(n,r.id,a)},options:t.options,required:t.required}))):o.push(c.a.createElement("td",{className:t.className||"",key:"".concat(r.id,"-").concat(n)},"".concat(t.prefix||"").concat(a.join(" ")).concat(t.suffix||"")))}};for(l.s();!(i=l.n()).done;)s()}catch(d){l.e(d)}finally{l.f()}var u=a;e.props.data instanceof Array&&(u=r.id.toString()),t.push(c.a.createElement("tr",{key:u,"data-key":u.replace(/^_/,"")},o))};for(var r in n)a(r);if(this.props.addNew){var o,i=Object.keys(this.props.data).length,l=[],s=Re(this.props.columns);try{var u=function(){var t=o.value,n="";n=t.keys instanceof Array?t.keys.join("-"):Object.keys(t.keys).join("-"),t.editable?l.push(c.a.createElement("td",{className:t.className||"",key:"".concat(i,"-").concat(n)},c.a.createElement(Te,{name:"".concat(i,"-").concat(n),value:"",editable:!0,type:t.type,onChange:function(t,a){return e.onColumnDataChange(n,null,a,!0)},options:t.options}))):l.push(c.a.createElement("td",{className:t.className||"",key:"".concat(i,"-").concat(n)}))};for(s.s();!(o=s.n()).done;)u()}catch(d){s.e(d)}finally{s.f()}t.push(c.a.createElement("tr",{key:i},l))}return t}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"table-responsive"},c.a.createElement("table",{className:"table table-striped ".concat(this.props.className||""),ref:this.ref},c.a.createElement("thead",{key:"table-head"},c.a.createElement("tr",{key:"table-head-row"},this.props.checkable?c.a.createElement("th",null):null,this.props.columns.map(function(t){var n,a="";if(t.keys instanceof Array)a=t.keys.join("-");else for(var r in t.keys)a+="_"+r+"."+t.keys[r].join("-");return a===e.state.sortKey&&(n="asc"===e.state.sortDirection?c.a.createElement(_.a,{icon:"sort-down",className:"float-right"}):c.a.createElement(_.a,{icon:"sort-up",className:"float-right"})),t.sortable?c.a.createElement("th",{key:a,"data-key":a,scope:"col",onClick:e.sortClick,style:{cursor:"pointer"}},t.text,n):c.a.createElement("th",{key:a,"data-key":a,scope:"col"},t.text)}))),c.a.createElement("tbody",{key:"table-body"},this.renderRows())))}}]),n}(i.Component),Me=n(240),Be=n(274);function $e(){var e=Object(M.a)(["\n  mutation APPROVE_COMPENSATION($id: Int!) {\n    approveCompensation(id: $id) {\n      id\n    }\n  }\n"]);return $e=function(){return e},e}function Fe(){var e=Object(M.a)(["\n  mutation DELETE_COMPENSATION($id: Int!) {\n    deleteCompensation(id: $id) {\n      id\n    }\n  }\n"]);return Fe=function(){return e},e}function Ge(){var e=Object(M.a)(["\n  mutation ADD_ORDERCOMPENSATION($data: AddOrderCompensation!) {\n    addOrderCompensation(data: $data) {\n      id\n    }\n  }\n"]);return Ge=function(){return e},e}function Ve(){var e=Object(M.a)(["\n  mutation ADD_ORDERCOMPENSATIONS($data: [AddOrderCompensation!]!) {\n    addOrderCompensations(data: $data) {\n      id\n    }\n  }\n"]);return Ve=function(){return e},e}function qe(){var e=Object(M.a)(["\n  mutation ADD_CUSTOMCOMPENSATION($data: AddCustomCompensation!) {\n    addCustomCompensation(data: $data) {\n      id\n    }\n  }\n"]);return qe=function(){return e},e}function Ue(){var e=Object(M.a)(["\n  query GET_COMPENSATION_FILTERS {\n    getCompensationFilters {\n      id\n      displayName\n    }\n  }\n"]);return Ue=function(){return e},e}function Ke(){var e=Object(M.a)(["\n  query GET_BASE_COMPENSATION($id: Int!) {\n    getCompensation(id: $id) {\n      id\n      member {\n        id\n        firstname\n        lastname\n      }\n      date\n      amount\n    }\n  }\n"]);return Ke=function(){return e},e}function ze(){var e=Object(M.a)(["\n  query GET_COMPENSATIONS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n    $filter: Int\n  ) {\n    getAllCompensations(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n      filter: $filter\n    ) {\n      cursor\n      total\n      items {\n        id\n        member {\n          id\n          firstname\n          lastname\n        }\n        date\n        amount\n        description\n        creator {\n          id\n          displayName\n        }\n        approved\n        paied\n      }\n    }\n  }\n"]);return ze=function(){return e},e}function He(){var e=Object(M.a)(["\n  query GET_COMPENSATIONS_BY_CONTACT_AND_PAYOUT(\n    $memberId: Int!\n    $payoutId: Int!\n  ) {\n    getContactCompensations(id: $memberId, payoutId: $payoutId) {\n      id\n      date\n      amount\n      description\n      paied\n      approved\n    }\n  }\n"]);return He=function(){return e},e}function Ye(){var e=Object(M.a)(["\n  query GET_COMPENSATIONS_BY_CONTACT($id: Int!) {\n    getContactCompensations(id: $id) {\n      id\n      date\n      amount\n      description\n      paied\n      approved\n    }\n  }\n"]);return Ye=function(){return e},e}function We(){var e=Object(M.a)(["\n  query GET_COMPENSATION($id: Int!) {\n    getOrderCompensation(id: $id) {\n      id\n      billingReport {\n        order {\n          id\n          documentNr\n          title\n        }\n        id\n        state\n      }\n      from\n      until\n      charge\n      member {\n        id\n        firstname\n        lastname\n      }\n      date\n      amount\n      description\n      approved\n      creator {\n        id\n        displayName\n      }\n      payout {\n        id\n      }\n      bexioBill\n      transferCompensation {\n        id\n      }\n    }\n    getCustomCompensation(id: $id) {\n      id\n      member {\n        id\n        firstname\n        lastname\n      }\n      date\n      amount\n      description\n      approved\n      creator {\n        id\n        displayName\n      }\n      payout {\n        id\n      }\n      bexioBill\n      transferCompensation {\n        id\n      }\n    }\n  }\n"]);return We=function(){return e},e}var Qe=Object(B.a)(We()),Je=Object(B.a)(Ye()),Ze=Object(B.a)(He()),Xe=Object(B.a)(ze()),et=Object(B.a)(Ke()),tt=Object(B.a)(Ue()),nt=Object(B.a)(qe()),at=Object(B.a)(Ve()),rt=(Object(B.a)(Ge()),Object(B.a)(Fe())),ot=Object(B.a)($e());function it(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var ct=function(e){Object(L.a)(n,e);var t=it(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).compensationView=a.compensationView.bind(Object(Q.a)(a)),a}return Object(v.a)(n,[{key:"compensationView",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentNode&&e.currentTarget.parentNode.parentNode.parentElement){var t=e.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");1==e.button?window.open(document.location.origin+"/compensation/"+t):this.props.history.push("/compensation/"+t)}}},{key:"render",value:function(){var e=[c.a.createElement(Me.a,{variant:"success",className:"view",onMouseUp:this.compensationView},c.a.createElement(_.a,{icon:"eye"}))];return c.a.createElement(Be.a,{query:Je,variables:{id:this.props.contactId},fetchPolicy:"cache-and-network"},function(t){if(t.loading)return c.a.createElement(Ne,{title:"Entsch\xe4digungen",scrollable:!0},c.a.createElement(fe,null));if(t.error)return null;if(!t.data)return null;var n=0,a=t.data.getContactCompensations;return n=a.reduce(function(e,t){return t.paied?e:e+t.amount},0),c.a.createElement(Ne,{title:"Entsch\xe4digungen (Offen: ".concat(n.toFixed(2),".-)"),scrollable:!0},c.a.createElement(Pe,{columns:[{text:"Datum",keys:["date"],sortable:!0,format:"toLocaleDateString"},{text:"Beschreibung",keys:["description"],sortable:!0},{text:"Betrag",keys:["amount"],prefix:"CHF ",sortable:!0,format:"toFixed(2)"},{text:"Genehmigt",keys:["approved"],sortable:!0},{text:"Ausbezahlt",keys:["paied"],sortable:!0},{text:"Actions",keys:["_id"],content:c.a.createElement("div",{className:"btn-group"},e)}],defaultSort:{keys:["date"],direction:"desc"},data:a||[]}))})}}]),n}(i.Component);function lt(){var e=Object(M.a)(["\n  mutation DELETE_LOGOFF($id: Int!, $notify: Boolean) {\n    deleteLogoff(id: $id, notify: $notify) {\n      id\n    }\n  }\n"]);return lt=function(){return e},e}function st(){var e=Object(M.a)(["\n  mutation CHANGE_LOGOFF_STATE(\n    $id: Int!\n    $state: LogoffState!\n    $notify: Boolean\n  ) {\n    changeLogoffState(state: $state, id: $id, notify: $notify) {\n      id\n    }\n  }\n"]);return st=function(){return e},e}function ut(){var e=Object(M.a)(["\n  mutation ADD_LOGOFFS($data: [AddLogoff!]!, $notify: Boolean!) {\n    addLogoffs(data: $data, notify: $notify) {\n      id\n    }\n  }\n"]);return ut=function(){return e},e}function dt(){var e=Object(M.a)(["\n  query GET_LOGOFF_FILTERS {\n    getLogoffFilters {\n      id\n      displayName\n    }\n  }\n"]);return dt=function(){return e},e}function mt(){var e=Object(M.a)(["\n  query GET_LOGOFFS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n    $filter: Int\n  ) {\n    getAllLogoffs(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n      filter: $filter\n    ) {\n      cursor\n      total\n      items {\n        id\n        contact {\n          id\n          firstname\n          lastname\n        }\n        from\n        until\n        state\n      }\n    }\n  }\n"]);return mt=function(){return e},e}function pt(){var e=Object(M.a)(["\n  query GET_LOGOFF($id: Int!) {\n    getLogoff(id: $id) {\n      id\n      from\n      until\n      contact {\n        id\n        firstname\n        lastname\n      }\n      createdBy {\n        id\n        displayName\n      }\n      changedStateBy {\n        id\n        displayName\n      }\n      remarks\n      state\n    }\n  }\n"]);return pt=function(){return e},e}function ft(){var e=Object(M.a)(["\n  query GET_LOGOFFS_BY_CONTACT($id: Int!) {\n    getContactLogoffs(id: $id) {\n      id\n      from\n      until\n      state\n    }\n  }\n"]);return ft=function(){return e},e}var bt=Object(B.a)(ft()),ht=Object(B.a)(pt()),vt=Object(B.a)(mt()),Et=Object(B.a)(dt()),yt=Object(B.a)(ut()),gt=Object(B.a)(st()),Ot=Object(B.a)(lt());function kt(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var St=function(e){Object(L.a)(n,e);var t=kt(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).logoffView=a.logoffView.bind(Object(Q.a)(a)),a}return Object(v.a)(n,[{key:"logoffView",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentNode&&e.currentTarget.parentNode.parentNode.parentElement){var t=e.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");1==e.button?window.open(document.location.origin+"/draft/logoff/"+t):this.props.history.push("/draft/logoff/"+t)}}},{key:"render",value:function(){var e=[c.a.createElement(Me.a,{variant:"success",className:"view",onMouseUp:this.logoffView},c.a.createElement(_.a,{icon:"eye"}))];return c.a.createElement(Be.a,{query:bt,variables:{id:this.props.contactId},fetchPolicy:"cache-and-network"},function(t){return t.loading?c.a.createElement(Ne,{title:"Abmeldungen",scrollable:!0},c.a.createElement(fe,null)):t.error?null:t.data?c.a.createElement(Ne,{title:"Abmeldungen",scrollable:!0},c.a.createElement(Pe,{columns:[{text:"Von",keys:["from"],sortable:!0,format:"toLocaleString"},{text:"Bis",keys:["until"],sortable:!0,format:"toLocaleString"},{text:"Status",keys:["state"],sortable:!0},{text:"Actions",keys:["_id"],content:c.a.createElement("div",{className:"btn-group"},e)}],defaultSort:{keys:["date"],direction:"desc"},data:t.data.getContactLogoffs||[]})):null})}}]),n}(i.Component);function Nt(e){var t=Object(P.c)(z),n=Object(P.c)(U);if(t.loading||n.loading)return c.a.createElement(fe,null);return c.a.createElement(ue,{title:"Dashboard"},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Shortcuts"},function(){var e=[];return(n.data.me.roles.includes(A.BILLINGREPORTS_CREATE)||n.data.me.roles.indexOf(A.ADMIN))&&e.push(c.a.createElement(Ce.a,{key:"billingreport",to:"/billing-reports/add/",className:"btn btn-block btn-outline-primary"},"Verrechnungsrapport erstellen")),t.data.me.bexioContact&&(n.data.me.roles.includes(A.CONTACTS_READ)||n.data.me.roles.indexOf(A.ADMIN))&&e.push(c.a.createElement(Ce.a,{key:"profile",to:"/contact/".concat(t.data.me.bexioContact.id),className:"btn btn-block btn-outline-primary"},"Mein Profil")),e}())),function(){if(t.data.me.bexioContact)return c.a.createElement(je,{className:"col-md-6"},c.a.createElement(ct,Object.assign({contactId:t.data.me.bexioContact.id},e)))}()),c.a.createElement(xe,null,function(){if(t.data.me.bexioContact)return c.a.createElement(je,{className:"col-md-6"},c.a.createElement(St,Object.assign({contactId:t.data.me.bexioContact.id},e)))}()))}function jt(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var xt=function(e){Object(L.a)(n,e);var t=jt(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).onClick=a.onClick.bind(Object(Q.a)(a)),a.state={state:a.props.loading?"inProgress":"normal"},a}return Object(v.a)(n,[{key:"onClick",value:function(){var e=Object(b.a)(f.a.mark(function e(t){var n=this;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("normal"!==this.state.state){e.next=6;break}return this.setState({state:"inProgress"}),e.next=4,this.props.onClick(t);case 4:this.setState({state:"done"}),setTimeout(function(){n.setState({state:"normal"})},1e3);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return c.a.createElement(Be.a,{query:U},function(t){if(t.loading)return null;if(t.error)return null;if(!t.data)return null;if(e.props.roles&&0===t.data.me.roles.filter(function(t){var n;return((null===(n=e.props.roles)||void 0===n?void 0:n.concat([A.ADMIN]))||[]).includes(t)}).length)return null;switch(e.state.state){case"normal":return c.a.createElement(Me.a,{type:e.props.type,active:e.props.active||!1,block:e.props.block||!1,variant:e.props.variant,size:e.props.size,href:e.props.href,disabled:e.props.disabled,onClick:e.onClick},e.props.children);case"inProgress":return c.a.createElement(Me.a,{type:e.props.type,active:e.props.active||!1,block:e.props.block||!1,variant:e.props.variant,size:e.props.size,href:e.props.href,disabled:e.props.disabled,onClick:e.onClick},c.a.createElement("svg",{className:"button-loading",viewBox:"0 0 128 128"},c.a.createElement("g",null,c.a.createElement("path",{d:"M64 127.75A63.76 63.76 0 0 1 52.8 1.23v14.23a49.8 49.8 0 1 0 22.4 0V1.23A63.76 63.76 0 0 1 64 127.75z",fillOpacity:"1"}),c.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 64 64",to:"360 64 64",dur:"2160ms",repeatCount:"indefinite"}))));case"done":return c.a.createElement(Me.a,{type:e.props.type,active:e.props.active||!1,block:e.props.block||!1,variant:e.props.variant,size:e.props.size,href:e.props.href,disabled:e.props.disabled,onClick:e.onClick},c.a.createElement(_.a,{icon:"check-circle"}));default:return c.a.createElement(Me.a,{type:e.props.type,active:e.props.active||!1,block:e.props.block||!1,variant:e.props.variant,size:e.props.size,href:e.props.href,disabled:e.props.disabled,onClick:e.onClick},e.props.children)}})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{state:e.loading?"inProgress":"normal"}}}]),n}(i.Component);function Ct(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var At,wt=function(e){Object(L.a)(n,e);var t=Ct(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).onClick=a.onClick.bind(Object(Q.a)(a)),a}return Object(v.a)(n,[{key:"onClick",value:function(){var e=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.props.onClick){e.next=4;break}return e.next=4,this.props.onClick(t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.to&&!this.props.disabled?c.a.createElement(Ce.a,{to:{pathname:this.props.to,state:this.props.state||{}},className:"action-button btn btn-outline-dark"},c.a.createElement(_.a,{icon:this.props.icon})):c.a.createElement(xt,{onClick:this.onClick,variant:"outline-dark",className:"action-button",disabled:this.props.disabled||!1,loading:this.props.loading||!1,roles:this.props.roles},c.a.createElement(_.a,{icon:this.props.icon}))}}]),n}(i.Component),It=n(9),Dt=n(275),Tt=n(276);!function(e){e.ASC="ASC",e.DESC="DESC"}(At||(At={}));var Rt=n(279),Lt=n(54);function _t(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Mt(e){var t,n,a,r=Object(i.useState)(30),o=Object(It.a)(r,2),l=o[0],s=o[1],u=Object(i.useState)(0),m=Object(It.a)(u,2),p=m[0],f=m[1],b=Object(i.useState)(e.defaultSortBy||void 0),h=Object(It.a)(b,2),v=h[0],E=h[1],y=Object(i.useState)(e.defaultSortDirection||At.ASC),g=Object(It.a)(y,2),O=g[0],k=g[1],S=Object(P.c)(e.query,{variables:Object(d.a)({limit:l,cursor:p,sortBy:v,sortDirection:O},e.queryVariables),pollInterval:e.pollInterval||5e3,fetchPolicy:"cache-and-network"}),N=S.loading,j=S.error,x=S.data;if(Object(i.useEffect)(function(){f(0)},[null===(t=e.queryVariables)||void 0===t?void 0:t.searchString,null===(n=e.queryVariables)||void 0===n?void 0:n.filter]),N&&!(null===(a=e.queryVariables)||void 0===a?void 0:a.searchString)&&!x)return c.a.createElement(fe,null);if(j)return null;if(!x)return c.a.createElement(fe,null);var C=x[Object.keys(x)[0]];function A(e){var t=e.target.dataset.key;t||(t=e.target.parentElement.dataset.key);var n=e.target.dataset.sortkey;n||(n=e.target.parentElement.dataset.sortkey),n&&(t=n),v===t?O===At.ASC?k(At.DESC):k(At.ASC):(E(t.split("-")[0]),k(At.ASC))}function w(e,t){if(!new RegExp(/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+/).test(e)||e instanceof Array||(e=new Date(e)),"boolean"===typeof e)return e?"\u2713":"\u2a2f";if(e instanceof Array)return e.map(function(e){return w(e,t)}).join(",");if(t.format){var n,a=t.format;if(t.format.indexOf("(")>-1&&t.format.indexOf(")")>-1){var r=t.format.match(/(\w+)\((.*)\)/);r&&r.length>2&&(a=r[1],n=r[2])}if(e[a])return e[a](n)}return(e||"").toString()}return c.a.createElement("div",{className:"table-responsive"},c.a.createElement("table",{className:"table table-striped ".concat(e.className||"")},c.a.createElement("thead",{key:"table-head"},c.a.createElement("tr",{key:"table-head-row"},e.checkable?c.a.createElement("th",null):null,e.columns.map(function(e){var t,n="";if(e.keys instanceof Array)n=e.keys.join("-");else for(var a in e.keys)n+="_"+a+"."+e.keys[a].join("-");return n!==v&&e.sortKey!==v||(t=O===At.ASC?c.a.createElement(_.a,{icon:"sort-down",className:"float-right"}):c.a.createElement(_.a,{icon:"sort-up",className:"float-right"})),e.sortable?c.a.createElement("th",{key:n,"data-key":n,"data-sortKey":e.sortKey,scope:"col",onClick:A,style:{cursor:"pointer"}},e.text,t):c.a.createElement("th",{key:n,"data-key":n,scope:"col"},e.text)}))),c.a.createElement("tbody",{key:"table-body"},function(t){var n=[];e.onDataChange&&e.onDataChange(t);var a,r=_t(t);try{var o=function(){var t=a.value,r=[];e.checkable&&r.push(c.a.createElement("td",{style:{width:"40px"}},c.a.createElement(we,{onChange:e.onCheck||function(){}})));var o,i=_t(e.columns);try{var l=function(){var e=o.value,n=e.keys instanceof Array?e.keys.join("-"):Object.keys(e.keys).map(function(t){return e.keys[t].join("-")}).join("-");if(e.content)r.push(c.a.createElement("td",{key:n},e.content||""));else{var a=[];if(e.keys instanceof Array)a=e.keys.map(function(n){return w(t[n],e)});else{var i=function(r){n="".concat(n).concat(r),a=a.concat(e.keys[r].map(function(n){return t.hasOwnProperty(r)&&t[r]?w(t[r][n],e):""}))};for(var l in e.keys)i(l)}e.link?r.push(c.a.createElement("td",{className:e.className||"",key:"".concat(t.id,"-").concat(n)},c.a.createElement("a",{key:"".concat(t.id,"-").concat(n,"-a"),href:(e.linkPrefix?e.linkPrefix:"")+a.join(" "),target:e.linkPrefix&&(e.linkPrefix.match(/w+:/i)||[]).length>0?"":"_blank"},(e.prefix?e.prefix:"")+a.join(" ")+(e.suffix?e.suffix:"")))):r.push(c.a.createElement("td",{className:e.className||"",key:"".concat(t.id,"-").concat(n)},"".concat(e.prefix||"").concat(a.join(" ")).concat(e.suffix||"")))}};for(i.s();!(o=i.n()).done;)l()}catch(s){i.e(s)}finally{i.f()}n.push(c.a.createElement("tr",{key:t.id,"data-key":t.id},r))};for(r.s();!(a=r.n()).done;)o()}catch(i){r.e(i)}finally{r.f()}return n}(C.items||[]))),c.a.createElement("div",{className:"d-flex justify-content-between"},c.a.createElement("div",{className:"w-25"},Math.max(p,1)," - ",Math.min(p+l,C.total)," von ",C.total),c.a.createElement(Rt.a,null,c.a.createElement(Rt.a.Prev,{key:"prev",onClick:function(e){f(p-l)},disabled:0===p}),function(e,t,n){for(var a=[],r=function(e){e>=n/t+10||e<=n/t-10?0!==a.length&&a.slice(-1)[0].type===Rt.a.Ellipsis||a.push(c.a.createElement(Rt.a.Ellipsis,null)):a.push(c.a.createElement(Rt.a.Item,{key:e,active:e*t===n,onClick:function(n){f(e*t)}},e+1))},o=0;o*t<e;o++)r(o);return a}(C.total,l,p),c.a.createElement(Rt.a.Next,{key:"next",onClick:function(e){f(p+l)},disabled:p+l>=C.total})),c.a.createElement(Lt.a,{className:"w-25",options:[{value:10,label:"10 Items"},{value:30,label:"30 Items"},{value:90,label:"90 Items"}],value:{value:l,label:"".concat(l," Items")},onChange:function(e){e&&(f(0),s(e.value))},isClearable:!1})))}function Bt(e){var t=Object(i.useState)(),n=Object(It.a)(t,2),a=n[0],r=n[1];if(e.filterQuery)var o=Object(i.useState)(e.defaultFilter),l=Object(It.a)(o,2),s=l[0],u=l[1],d=Object(P.c)(e.filterQuery,{fetchPolicy:"cache-and-network"});return c.a.createElement(ue,{title:e.title},c.a.createElement(xe,null,c.a.createElement(je,null,c.a.createElement(Ne,{actions:e.panelActions||[],title:c.a.createElement(Tt.a,{className:"justify-content-between align-items-center"},function(){if(d&&!d.loading&&d.data){var e=d.data[Object.keys(d.data)[0]];return c.a.createElement(c.a.Fragment,null,c.a.createElement(Dt.a,{className:"filters"},e.map(function(e){return c.a.createElement(Me.a,{variant:"outline-secondary",active:e.id===s,onClick:function(){return(null===e||void 0===e?void 0:e.id)===s?u(void 0):u(null===e||void 0===e?void 0:e.id)}},e.displayName)})))}return!d||d.loading||d.data?d&&d.loading?c.a.createElement(Dt.a,null,c.a.createElement(me,null)):c.a.createElement(Dt.a,null):(d.refetch(),c.a.createElement(Dt.a,null,c.a.createElement(me,null)))}(),e.additionalTitleStuff||[],e.searchable&&c.a.createElement("input",{id:"search",value:a,placeholder:"Search...",className:"form-control form-control-sm",onChange:function(e){return r(e.target.value)}}))},c.a.createElement(Mt,{columns:e.tableColumns.concat([{text:"Actions",keys:["id"],content:c.a.createElement("div",{className:"btn-group"},c.a.createElement("button",{className:"btn btn-success view",onMouseUp:function(t){if(t.currentTarget.parentNode&&t.currentTarget.parentNode.parentNode&&t.currentTarget.parentNode.parentNode.parentElement){var n=t.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");1==t.button?window.open(document.location.origin+e.viewLocation+n):e.history.push(e.viewLocation+n)}}},c.a.createElement(_.a,{icon:"eye"})),e.rowActions)}]),query:e.query,defaultSortBy:e.defaultSortBy,defaultSortDirection:e.defaultSortDirection,pollInterval:e.pollInterval,queryVariables:{searchString:a,filter:s}})))),e.children)}function $t(){var e=Object(M.a)(["\n  mutation EDIT_CONTACT($data: EditContact!) {\n    editContact(data: $data) {\n      id\n    }\n  }\n"]);return $t=function(){return e},e}function Ft(){var e=Object(M.a)(["\n  query GET_MEMBERS_FILTERS {\n    getContactFilters {\n      id\n      displayName\n    }\n  }\n"]);return Ft=function(){return e},e}function Gt(){var e=Object(M.a)(["\n  query GET_CONTACT($id: Int!) {\n    getContact(id: $id) {\n      id\n      contactGroups {\n        id\n        name\n      }\n      address\n      postcode\n      city\n      firstname\n      lastname\n      rank\n      birthday\n      collectionPoint {\n        id\n        name\n        address\n        postcode\n        city\n      }\n      phoneFixed\n      phoneFixedSecond\n      phoneMobile\n      mail\n      mailSecond\n      moreMails\n      entryDate\n      exitDate\n      remarks\n      bexioId\n      bankName\n      iban\n      accountHolder\n      rank\n    }\n  }\n"]);return Gt=function(){return e},e}function Vt(){var e=Object(M.a)(["\n  query GET_MEMBERS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n    $filter: Int\n  ) {\n    getMembers(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n      filter: $filter\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        firstname\n        lastname\n        rank\n        functions\n        address\n        postcode\n        city\n        collectionPoint {\n          id\n          address\n          postcode\n          city\n        }\n        phoneFixed\n        phoneFixedSecond\n        phoneMobile\n        mail\n        mailSecond\n      }\n    }\n  }\n"]);return Vt=function(){return e},e}function qt(){var e=Object(M.a)(["\n  query GET_MAILLING {\n    getMembersAll {\n      mail\n      mailSecond\n      moreMails\n      contactGroups {\n        id\n        bexioId\n      }\n    }\n  }\n"]);return qt=function(){return e},e}function Ut(){var e=Object(M.a)(["\n  query GET_ALL_MEMBERS {\n    getMembersAll {\n      id\n      firstname\n      lastname\n      mail\n      mailSecond\n      moreMails\n      contactGroups {\n        id\n        bexioId\n      }\n    }\n  }\n"]);return Ut=function(){return e},e}function Kt(){var e=Object(M.a)(["\n  query GET_ALL_MEMBERS_SELECT {\n    getMembersAll {\n      id\n      firstname\n      lastname\n    }\n  }\n"]);return Kt=function(){return e},e}var zt=Object(B.a)(Kt()),Ht=Object(B.a)(Ut()),Yt=(Object(B.a)(qt()),Object(B.a)(Vt())),Wt=Object(B.a)(Gt()),Qt=Object(B.a)(Ft()),Jt=Object(B.a)($t());function Zt(e){return c.a.createElement(Bt,Object.assign({query:Yt,filterQuery:Qt,title:"Mitglieder",viewLocation:"/contact/",tableColumns:[{text:"Nachname",keys:["lastname"],sortable:!0},{text:"Vorname",keys:["firstname"],sortable:!0},{text:"Grad",keys:["rank"],sortable:!1},{text:"Funktionen",keys:["functions"],sortable:!1},{text:"Addresse",keys:["address","postcode","city"],link:!0,linkPrefix:"https://www.google.com/maps/search/",sortKey:"address",sortable:!0},{text:"Abholpunkt",keys:{collectionPoint:["address","postcode","city"]},link:!0,linkPrefix:"https://www.google.com/maps/search/",sortable:!1},{text:"Festnetz",keys:["phoneFixed"],link:!0,linkPrefix:"tel:",sortable:!0},{text:"Festnetz 2",keys:["phoneFixedSecond"],link:!0,linkPrefix:"tel:",sortable:!0},{text:"Mobile",keys:["phoneMobile"],link:!0,linkPrefix:"tel:",sortable:!0},{text:"E-Mail",keys:["mail"],link:!0,linkPrefix:"mailto:",sortable:!0},{text:"E-Mail 2",keys:["mailSecond"],link:!0,linkPrefix:"mailto:",sortable:!0}],panelActions:[c.a.createElement(wt,{key:"pdf-export",onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.open("".concat(re.apiEndpoint,"/api/members/pdf"));case 1:case"end":return e.stop()}},e)})),icon:"file-pdf"})],defaultSortBy:"lastname",pollInterval:1e4,searchable:!0},e))}var Xt=n(41),en=function(e){function t(){return Object(h.a)(this,t),Object(T.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(v.a)(t,[{key:"renderChildren",value:function(){return"undefined"!==typeof this.props.value?c.a.createElement(Te,{name:this.props.id,editable:this.props.editable,onChange:this.props.onChange,type:this.props.type,value:this.props.value}):this.props.children}},{key:"render",value:function(){return c.a.createElement(xe,null,c.a.createElement(je,{className:"col-6"},this.props.title),c.a.createElement(je,{className:"col-6"},this.renderChildren()))}}]),t}(i.Component);function tn(){var e=Object(M.a)(["\n  mutation ADD_COLLECTIONPOINT($data: AddCollectionPoint!) {\n    addCollectionPoint(data: $data) {\n      id\n    }\n  }\n"]);return tn=function(){return e},e}function nn(){var e=Object(M.a)(["\n  query GET_ALL_COLLECITONPOINTS {\n    getCollectionPoints {\n      id\n      name\n      address\n      city\n      postcode\n    }\n  }\n"]);return nn=function(){return e},e}function an(){var e=Object(M.a)(["\n  query GET_COLLECTIONPOINTS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n  ) {\n    getAllCollectionPoints(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        name\n        address\n        city\n        postcode\n      }\n    }\n  }\n"]);return an=function(){return e},e}var rn=Object(B.a)(an()),on=Object(B.a)(nn()),cn=Object(B.a)(tn());function ln(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sn(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function un(e){var t=Object(P.c)(on),n=t.loading,a=t.error,r=t.data;if(n)return c.a.createElement(me,null);if(a)return null;if(!r)return null;var o=r.getCollectionPoints,i=[];if(e.defaultValue instanceof Array){var l,s=ln(e.defaultValue);try{for(s.s();!(l=s.n()).done;){var u=l.value;i.push({value:u.id.toString(),label:"(".concat(u.name,") ").concat(u.address,", ").concat(u.postcode," ").concat(u.city)})}}catch(d){s.e(d)}finally{s.f()}}return c.a.createElement(Lt.a,{isClearable:!0,options:function(e){var t,n=[],a=ln(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({value:r.id.toString(),label:"(".concat(r.name,") ").concat(r.address,", ").concat(r.postcode," ").concat(r.city)})}}catch(d){a.e(d)}finally{a.f()}return n}(o||[]),backspaceRemovesValue:!0,hideSelectedOptions:!0,openMenuOnFocus:!0,isMulti:e.isMulti||!1,onChange:function(t){t&&(e.isMulti,e.onChange&&e.onChange(o.find(function(e){return e.id===parseInt(t.value)})))},value:i,required:!!e.required})}function dn(e){var t=Object(i.useState)(!1),n=Object(It.a)(t,2),a=n[0],r=n[1],o=Object(P.b)(Jt),l=Object(It.a)(o,1)[0],s=Object(P.c)(U),m=Object(P.c)(Wt,{variables:{id:parseInt(e.match.params.id)}}),p=m.loading,h=m.error,v=m.data,E=m.refetch,y=Object(i.useState)(null===v||void 0===v?void 0:v.getContact),O=Object(It.a)(y,2),k=O[0],S=O[1],N=Object(u.d)();if(p)return c.a.createElement(ue,{title:"Kontakt"},c.a.createElement(fe,null));if(!k&&(null===v||void 0===v?void 0:v.getContact))return S(null===v||void 0===v?void 0:v.getContact),c.a.createElement(ue,{title:"Kontakt"},c.a.createElement(fe,null));if((null===h||void 0===h?void 0:h.message)&&(null===h||void 0===h?void 0:h.message.indexOf("Access denied!"))>-1||!k)return c.a.createElement(de,null);function j(e,t){var n=Object(d.a)({},k);n[e]=t,S(n)}function x(e){var t=e.target,n=t.value,a=Object(Xt.a)(k.moreMails||[]);a[parseInt(t.name)]=n,j("moreMails",a)}function C(){return(C=Object(b.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:j("moreMails",[].concat(Object(Xt.a)((k.moreMails||[]).slice(0,t)),Object(Xt.a)((k.moreMails||[]).slice(t+1))));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return I.apply(this,arguments)}function I(){return(I=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({variables:{data:{id:k.id,collectionPointId:k.collectionPoint?k.collectionPoint.id:void 0,entryDate:k.entryDate,exitDate:k.exitDate,bankName:k.bankName,iban:k.iban,accountHolder:k.accountHolder,moreMails:k.moreMails}}});case 2:if(!e.sent.errors){e.next=5;break}return e.abrupt("return",!1);case 5:return N(g.showSuccess("Gespeichert")),r(!1),e.t0=S,e.next=10,E();case 10:return e.t1=e.sent.data.getContact,(0,e.t0)(e.t1),e.abrupt("return",!0);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(){return T.apply(this,arguments)}function T(){return(T=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S(null===v||void 0===v?void 0:v.getContact),r(!1),e.t0=S,e.next=5,E();case 5:e.t1=e.sent.data.getContact,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var R="".concat(k.address,", ").concat(k.postcode," ").concat(k.city);return c.a.createElement(ue,{title:k.firstname+" "+k.lastname},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Pers\xf6nliche Informationen",actions:a?[c.a.createElement(wt,{icon:"save",key:"save",onClick:w}),c.a.createElement(wt,{icon:"times",key:"cancel",onClick:D})]:[c.a.createElement(wt,{icon:"pencil-alt",key:"edit",onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r(!0);case 1:case"end":return e.stop()}},e)})),roles:[A.CONTACTS_EDIT,A.MEMBERS_EDIT]})]},c.a.createElement("div",{className:"container-fluid"},c.a.createElement(en,{id:"firstname",title:"Vorname"},k.firstname),c.a.createElement(en,{id:"lastname",title:"Nachname"},k.lastname),c.a.createElement(en,{id:"rank",title:"Rang"},k.rank),c.a.createElement(en,{id:"birthday",title:"Geburtstag"},new Date(k.birthday).toLocaleDateString()),c.a.createElement(en,{id:"address",title:"Adresse"},c.a.createElement("a",{href:"https://www.google.com/maps/search/"+R,target:"_blank"},R)),c.a.createElement(en,{id:"collectionPoint",title:"Abholpunkt"},function(){if(a)return c.a.createElement(un,{isMulti:!1,onChange:(e="collectionPoint",function(t){j(e,t)}),defaultValue:k.collectionPoint?[k.collectionPoint]:[]});var e;if(k.collectionPoint&&k.collectionPoint.hasOwnProperty("name")&&k.collectionPoint.hasOwnProperty("address")&&k.collectionPoint.hasOwnProperty("postcode")&&k.collectionPoint.hasOwnProperty("city")){var t="".concat(k.collectionPoint.address,", ").concat(k.collectionPoint.postcode," ").concat(k.collectionPoint.city);return c.a.createElement("a",{href:"https://www.google.com/maps/search/".concat(t),target:"_blank"},"(".concat(k.collectionPoint.name,")").concat(t))}return null}()),c.a.createElement(en,{id:"phoneFixed",title:"Festnetz"},c.a.createElement("a",{href:"tel:"+k.phoneFixed},k.phoneFixed)),c.a.createElement(en,{id:"phoneFixedSecond",title:"Festnetz 2"},c.a.createElement("a",{href:"tel:"+k.phoneFixedSecond},k.phoneFixedSecond)),c.a.createElement(en,{id:"phoneMobile",title:"Mobile"},c.a.createElement("a",{href:"tel:"+k.phoneMobile},k.phoneMobile)),c.a.createElement(en,{id:"mail",title:"E-Mails"},c.a.createElement("a",{href:"mailto:".concat(k.mail)},k.mail)," ",c.a.createElement("br",null),c.a.createElement("a",{href:"mailto:".concat(k.mailSecond)},k.mailSecond)," ",c.a.createElement("br",null),(k.moreMails||[]).map(function(e,t){return a?c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{type:"email",className:"form-control",value:e,key:t.toString(),name:t.toString(),onChange:x}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement(Me.a,{className:"btn-outline-secondary",onClick:function(){!function(e){C.apply(this,arguments)}(t)}},c.a.createElement(_.a,{icon:"times"})))):c.a.createElement(c.a.Fragment,null,c.a.createElement("a",{href:"mailto:".concat(e)},e),c.a.createElement("br",null))}),a&&c.a.createElement(Me.a,{className:"btn-outline btn-block",onClick:function(){S(Object(d.a)({},k,{moreMails:[].concat(Object(Xt.a)(k.moreMails||[]),[""])}))}},"Hinzuf\xfcgen")),c.a.createElement(en,{id:"groups",title:"Gruppen"},k.contactGroups?k.contactGroups.map(function(e){return c.a.createElement("span",{key:e.name,className:"badge badge-primary"},e.name)}):""),c.a.createElement(en,{id:"entryDate",title:"Eintrittsdatum",type:"date",editable:a,value:k.entryDate?new Date(k.entryDate):"",onChange:j}),c.a.createElement(en,{id:"exitDate",title:"Austrittsdatum",type:"date",editable:a,value:k.exitDate?new Date(k.exitDate):"",onChange:j}),c.a.createElement(en,{id:"remarks",title:"Bemerkungen"},k.remarks)))),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Finanzen"},c.a.createElement("div",{className:"container-fluid"},c.a.createElement(en,{id:"bankName",title:"Bank",value:k.bankName||"",editable:a,onChange:j}),c.a.createElement(en,{id:"iban",title:"IBAN",value:k.iban||"",editable:a,onChange:j}),c.a.createElement(en,{id:"accountHolder",title:"Kontoinhaber",value:k.accountHolder||"",editable:a,onChange:j}))),function(){if(s.data){var e=[],t=!!s.data.me.roles.indexOf(A.ADMIN);if((s.data.me.roles.indexOf(A.CONTACTS_READ)>-1||t)&&e.push(c.a.createElement("a",{target:"_blank",href:"https://office.bexio.com/index.php/kontakt/show/id/"+k.bexioId,className:"btn btn-block btn-outline-primary"},"In Bexio anschauen")),(s.data.me.roles.indexOf(A.MEMBERS_READ)>-1||t)&&e.push(c.a.createElement("a",{target:"_blank",href:"https://vkazu.sharepoint.com/leitung/Personalakten?viewpath=/leitung/Personalakten&id=/leitung/Personalakten/"+k.firstname+" "+k.lastname,className:"btn btn-block btn-outline-primary"},"Personalakte \xf6ffnen")),e.length>0)return c.a.createElement(Ne,{title:"Actions"},e)}return null}())),c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(ct,Object.assign({contactId:k.id},e))),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(St,Object.assign({contactId:k.id},e)))))}function mn(){var e=Object(M.a)(["\n  query GET_ORDER($id: Int!) {\n    getOrder(id: $id) {\n      id,\n      title\n      contact {\n        id\n        firstname\n        lastname\n      }\n      documentNr\n      deliveryAddress\n      execDates\n      bexioId\n      positions {\n        id\n        pos\n        text\n        positionTotal\n      }\n    }\n  }\n"]);return mn=function(){return e},e}function pn(){var e=Object(M.a)(["\n  query GET_ORDERS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n  ) {\n    getAllOrders(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        documentNr\n        title\n        contact {\n          id\n          firstname\n          lastname\n        }\n        total\n        execDates\n      }\n    }\n  }\n"]);return pn=function(){return e},e}function fn(){var e=Object(M.a)(["\n  query GET_OPEN_ORDERS {\n    getOpenOrders {\n      id\n      documentNr\n      title\n      contact {\n        id\n        lastname\n      }\n    }\n  }\n"]);return fn=function(){return e},e}var bn=Object(B.a)(fn()),hn=Object(B.a)(pn()),vn=Object(B.a)(mn());function En(e){return c.a.createElement(Bt,Object.assign({query:hn,title:"Auftr\xe4ge",viewLocation:"/order/",tableColumns:[{text:"Auftragsnummer",keys:["documentNr"],sortable:!0},{text:"Titel",keys:["title"],sortable:!0},{text:"Kunde",keys:{contact:["firstname","lastname"]},sortKey:"contact.firstname",sortable:!0},{text:"Total",keys:["total"],sortable:!0,prefix:"CHF "},{text:"Auftragsdaten",keys:["execDates"],format:"toLocaleDateString"}],defaultSortBy:"documentNr",defaultSortDirection:At.DESC,searchable:!0},e))}function yn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gn(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function On(e){var t,n,a,r,o,i,l,s,u,d,m,p,f,b=Object(P.c)(vn,{variables:{id:parseInt(e.match.params.id)}});if(b.loading)return c.a.createElement(ue,{title:"Loading..."},c.a.createElement(fe,null));(null===(t=b.data)||void 0===t?void 0:t.getOrder.execDates)instanceof Date&&(b.data.getOrder.execDates=[null===(f=b.data)||void 0===f?void 0:f.getOrder.execDates]);return c.a.createElement(ue,{title:(null===(n=b.data)||void 0===n?void 0:n.getOrder.title)||""},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Informationen"},c.a.createElement("div",{className:"container-fluid"},c.a.createElement(en,{id:"title",title:"Titel"},null===(a=b.data)||void 0===a?void 0:a.getOrder.title),c.a.createElement(en,{id:"customer",title:"Kunde"},(null===(r=b.data)||void 0===r?void 0:r.getOrder.contact)?"".concat(null===(o=b.data)||void 0===o?void 0:o.getOrder.contact.firstname," ").concat(null===(i=b.data)||void 0===i?void 0:i.getOrder.contact.lastname):"Kein Kunde gefunden"),c.a.createElement(en,{id:"documentNr",title:"Auftragsnummer"},null===(l=b.data)||void 0===l?void 0:l.getOrder.documentNr),c.a.createElement(en,{id:"deliveryAddress",title:"Lieferadresse"},null===(s=b.data)||void 0===s?void 0:s.getOrder.deliveryAddress),c.a.createElement(en,{id:"executionDates",title:"Auftragsdaten"},(null===(u=b.data)||void 0===u?void 0:u.getOrder.execDates)?null===(d=b.data)||void 0===d?void 0:d.getOrder.execDates.map(function(e){return c.a.createElement("span",{className:"badge badge-secondary"},new Date(e).toLocaleDateString())}):"")))),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Actions"},c.a.createElement("a",{target:"_blank",href:"https://office.bexio.com/index.php/kb_order/show/id/".concat(null===(m=b.data)||void 0===m?void 0:m.getOrder.bexioId),className:"btn btn-block btn-outline-primary"},"In Bexio anschauen")))),c.a.createElement(xe,null,c.a.createElement(je,{className:"col"},c.a.createElement(Ne,{title:"Positionen"},c.a.createElement("div",{className:"container-fluid"},function(){var e,t=[];if(null===(e=b.data)||void 0===e?void 0:e.getOrder.positions){var n,a,r=yn(null===(n=b.data)||void 0===n?void 0:n.getOrder.positions);try{for(r.s();!(a=r.n()).done;){var o=a.value;t.push(c.a.createElement(xe,{className:"position"},c.a.createElement(je,{className:"col-1"},o.pos),c.a.createElement(je,null,c.a.createElement("div",{dangerouslySetInnerHTML:{__html:o.text||""}})),o.positionTotal?c.a.createElement(je,{className:"col-2"},"CHF ",o.positionTotal):""))}}catch(i){r.e(i)}finally{r.f()}}return t}(),c.a.createElement(xe,{className:"position"},c.a.createElement(je,{className:"col-1"}),c.a.createElement(je,null,c.a.createElement("strong",null,"Total")),c.a.createElement(je,{className:"col-2"},"CHF ",null===(p=b.data)||void 0===p?void 0:p.getOrder.total)))))))}function kn(){var e=Object(M.a)(["\n  mutation CHANGE_BILLINGREPORT_STATE($id: Int!, $state: BillingReportState!) {\n    changeBillingReportState(state: $state, id: $id) {\n      id\n    }\n  }\n"]);return kn=function(){return e},e}function Sn(){var e=Object(M.a)(["\n  mutation EDIT_BILLINGREPORT($data: EditBillingReportInput!) {\n    editBillingReport(data: $data) {\n      id\n    }\n  }\n"]);return Sn=function(){return e},e}function Nn(){var e=Object(M.a)(["\n  mutation ADD_BILLINGREPORT($data: AddBillingReportInput!) {\n    addBillingReport(data: $data) {\n      id\n    }\n  }\n"]);return Nn=function(){return e},e}function jn(){var e=Object(M.a)(["\n  query GET_BILLINGREPORT_FILTERS {\n    getBillingReportFilters {\n      id\n      displayName\n    }\n  }\n"]);return jn=function(){return e},e}function xn(){var e=Object(M.a)(["\n  query GET_BILLINGREPORT($id: Int!) {\n    getBillingReport(id: $id) {\n      id\n      order {\n        id\n        title\n      }\n      date\n      creator {\n        id\n        displayName\n      }\n      state\n      els {\n        id\n        firstname\n        lastname\n      }\n      drivers {\n        id\n        firstname\n        lastname\n      }\n      food\n      remarks\n      compensations {\n        id\n        from\n        until\n        charge\n        amount\n        paied\n        date\n        member {\n          id\n          firstname\n          lastname\n        }\n      }\n    }\n  }\n"]);return xn=function(){return e},e}function Cn(){var e=Object(M.a)(["\n  query GET_BILLINGREPORTS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n    $filter: Int\n  ) {\n    getAllBillingReports(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n      filter: $filter\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        date\n        order {\n          id\n          title\n          documentNr\n        }\n        creator {\n          id\n          displayName\n        }\n        state\n      }\n    }\n  }\n"]);return Cn=function(){return e},e}var An=Object(B.a)(Cn()),wn=Object(B.a)(xn()),In=Object(B.a)(jn()),Dn=Object(B.a)(Nn()),Tn=Object(B.a)(Sn()),Rn=Object(B.a)(kn());function Ln(e){return c.a.createElement(Bt,Object.assign({query:An,filterQuery:In,defaultFilter:0,title:"Verrechnungsrapporte",tableColumns:[{text:"Datum",keys:["date"],sortable:!0,format:"toLocaleDateString"},{text:"Auftrag Nr",keys:{order:["documentNr"]},sortKey:"order.documentNr",sortable:!0},{text:"Auftrag Titel",keys:{order:["title"]},sortKey:"order.title",sortable:!0},{text:"Ersteller",keys:{creator:["displayName"]},sortKey:"creator.displayName",sortable:!0},{text:"Status",keys:["state"],sortable:!0}],defaultSortBy:"date",defaultSortDirection:At.DESC,viewLocation:"/billing-report/",searchable:!0},e))}var _n=n(277),Pn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(T.a)(this,Object(R.a)(t).call(this,e))).handleClose=n.handleClose.bind(Object(Q.a)(n)),n}return Object(L.a)(t,e),Object(v.a)(t,[{key:"handleClose",value:function(){this.props.onHide&&this.props.onHide()}},{key:"render",value:function(){return c.a.createElement(_n.a,{show:this.props.show,onHide:this.handleClose,dialogClassName:"modal-lg"},c.a.createElement(_n.a.Header,{closeButton:!0},this.props.header),c.a.createElement(_n.a.Body,null,this.props.body),c.a.createElement(_n.a.Footer,null,this.props.footer))}}]),t}(i.Component);function Mn(e){var t=Object(i.useState)(!1),n=Object(It.a)(t,2),a=n[0],r=n[1],o=Object(P.a)(et),l=Object(It.a)(o,2),s=l[0],u=l[1],d=Object(P.b)(rt),m=Object(It.a)(d,1)[0];function p(){return h.apply(this,arguments)}function h(){return(h=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({variables:{id:null===(t=u.data)||void 0===t?void 0:t.getCompensation.id}});case 2:r(!1);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return c.a.createElement(c.a.Fragment,null,function(){if(u.loading&&a)return c.a.createElement(Pn,{show:a,onHide:function(){return r(!1)},header:c.a.createElement("h3",null,"Loading..."),body:c.a.createElement(fe,null),footer:c.a.createElement(Dt.a,null,c.a.createElement(xt,{variant:"secondary",onClick:function(){return r(!1)}},"Abbrechen"))});if(u.data){var e,t=null===(e=u.data)||void 0===e?void 0:e.getCompensation;return c.a.createElement(Pn,{show:a,onHide:function(){return r(!1)},header:c.a.createElement("h3",null,t.member.firstname+" "+t.member.lastname+" vom  "+new Date(t.date).toLocaleDateString()),body:c.a.createElement("span",null,"Willst du die Entsch\xe4digung von "+t.member.firstname+" "+t.member.lastname+" vom  "+new Date(t.date).toLocaleDateString()+" mit einem Betrag von CHF"+t.amount+" wirklich l\xf6schen?"),footer:c.a.createElement(Dt.a,null,c.a.createElement(xt,{variant:"danger",onClick:p},"L\xf6schen"),c.a.createElement(xt,{variant:"secondary",onClick:function(){return r(!1)}},"Abbrechen"))})}return null}(),c.a.createElement(Bt,Object.assign({query:Xe,filterQuery:tt,defaultFilter:0,title:"Entsch\xe4digungen",viewLocation:"/compensation/",tableColumns:[{text:"Mitglied",keys:{member:["firstname","lastname"]},sortKey:"member.firstname",sortable:!0},{text:"Datum",keys:["date"],sortable:!0,format:"toLocaleDateString"},{text:"Betrag",keys:["amount"],sortable:!0,prefix:"CHF ",format:"toFixed(2)"},{text:"Beschreibung",keys:["description"],sortable:!1},{text:"Ersteller",keys:{creator:["displayName"]},sortKey:"creator.displayName",sortable:!0},{text:"Genehmigt",keys:["approved"],sortable:!0},{text:"Ausbezahlt",keys:["paied"],sortable:!0}],defaultSortBy:"date",defaultSortDirection:At.DESC,panelActions:[c.a.createElement(wt,{icon:"plus",to:"/compensations/add",roles:[A.COMPENSATIONS_CREATE]})],rowActions:[c.a.createElement(xt,{className:"btn delete",variant:"danger",onClick:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentNode&&e.currentTarget.parentNode.parentNode.parentElement){var t=e.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");t&&(s({variables:{id:parseInt(t)}}),r(!0))}},roles:[A.COMPENSATIONS_EDIT]},c.a.createElement(_.a,{icon:"trash"}))],searchable:!0},e)))}var Bn=n(118),$n=n(149),Fn=n.n($n),Gn=function(e){function t(){return Object(h.a)(this,t),Object(T.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(v.a)(t,[{key:"renderSteps",value:function(){for(var e=[],t=this.props.totalSteps||0,n=1;n<=t;n++){var a="dot";n==this.props.currentStep&&(a+=" active"),e.push(c.a.createElement("span",{key:n,className:a},"\u2022"))}return e}},{key:"render",value:function(){return c.a.createElement("div",{key:"WizardNav",id:"WizardNav",className:"d-flex justify-content-center"},this.renderSteps())}}]),t}(i.Component),Vn=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(T.a)(this,Object(R.a)(t).call(this,e))).previousStep=n.previousStep.bind(Object(Q.a)(n)),n.nextStep=n.nextStep.bind(Object(Q.a)(n)),n.renderBackButton=n.renderBackButton.bind(Object(Q.a)(n)),n}return Object(L.a)(t,e),Object(v.a)(t,[{key:"nextStep",value:function(){var e=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,!this.props.onNextStep){e.next=5;break}return e.next=4,this.props.onNextStep();case 4:t=e.sent;case 5:t&&this.props.nextStep&&this.props.nextStep();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"previousStep",value:function(){var e=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.onPreviousStep){e.next=3;break}return e.next=3,this.props.onPreviousStep();case 3:this.props.previousStep&&this.props.previousStep();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderBackButton",value:function(){return(this.props.currentStep||0)>1?c.a.createElement(xt,{variant:"secondary",onClick:this.previousStep},"Zur\xfcck"):c.a.createElement("div",null)}},{key:"render",value:function(){var e="Weiter",t="btn btn-primary";return this.props.currentStep===this.props.totalSteps&&(e="Speichern",t="btn btn-success"),c.a.createElement("div",null,c.a.createElement("div",{className:"wizard-step-header"},c.a.createElement("h4",null,this.props.title)),c.a.createElement("div",{className:"wizard-step-body"},this.props.children),c.a.createElement("div",{className:"d-flex justify-content-between wizard-step-footer"},this.renderBackButton(),c.a.createElement(xt,{className:t,onClick:this.nextStep},e)))}}]),t}(i.Component);function qn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Kn(e){var t,n,a=Object(i.useState)(""),r=Object(It.a)(a,2),o=r[0],l=r[1],s=Object(i.useState)(),u=Object(It.a)(s,2),d=u[0],m=u[1],p=Object(P.c)(bn),h=p.loading,v=p.error,E=p.data;if(v)return null;function y(e){var t=e.target,n=t.value;switch(t.name){case"order":m(parseInt(n));break;case"date":l(n)}}return c.a.createElement(Vn,Object.assign({title:"Details",onNextStep:(n=(null===E||void 0===E?void 0:E.getOpenOrders)||[],Object(b.a)(f.a.mark(function a(){var r;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=5;break}return r=t.checkValidity(),t.className="was-validated",r&&e.onNext({order:n.filter(function(e){return e.id===d}),date:new Date(o)}),a.abrupt("return",r);case 5:return a.abrupt("return",!1);case 6:case"end":return a.stop()}},a)})))},e),c.a.createElement("form",{ref:function(e){return t=e}},c.a.createElement("h5",null,"Einsatz"),h?c.a.createElement(me,null):c.a.createElement("select",{className:"form-control",name:"order",id:"order",onChange:y,value:d,required:!0},function(e){var t,n=[c.a.createElement("option",{key:"none",value:""},"Bitte W\xe4hlen")],a=qn(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.contact.firstname?n.push(c.a.createElement("option",{key:r.documentNr,value:r.id},"".concat(r.title))):n.push(c.a.createElement("option",{key:r.documentNr,value:r.id},"".concat(r.title," (").concat(r.contact.lastname,")")))}}catch(o){a.e(o)}finally{a.f()}return n}((null===E||void 0===E?void 0:E.getOpenOrders)||[])),c.a.createElement("br",null),c.a.createElement("h5",null,"Datum"),c.a.createElement("input",{type:"Date",name:"date",id:"date",className:"form-control",value:o,onChange:y,required:!0})))}var zn=n(55);function Hn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Yn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function Yn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Wn(e){var t=Object(P.c)(zt),n=t.loading,a=t.error,r=t.data,o=[];if(e.defaultValue instanceof Array){var i,l=Hn(e.defaultValue);try{var s=function(){var e=i.value,t=((null===r||void 0===r?void 0:r.getMembersAll)||[]).find(function(t){return t.id.toString()===e});t&&o.push({value:t.id.toString(),label:t.firstname+" "+t.lastname})};for(l.s();!(i=l.n()).done;)s()}catch(u){l.e(u)}finally{l.f()}}if(n)return c.a.createElement(me,null);if(a)return null;if(!r)return null;return c.a.createElement(Lt.a,{isClearable:!0,options:function(e){var t,n=[],a=Hn(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({label:"".concat(r.firstname," ").concat(r.lastname),value:r.id.toString()})}}catch(u){a.e(u)}finally{a.f()}return n}(r.getMembersAll),backspaceRemovesValue:!0,hideSelectedOptions:!0,openMenuOnFocus:!0,isMulti:e.isMulti||!1,onChange:function(t){var n=[t];e.isMulti&&(n=t),e.onChange(n.map(function(e){return null===r||void 0===r?void 0:r.getMembersAll.find(function(t){return t.id===parseInt(e.value)})}))},value:o,required:!!e.required})}function Qn(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function Jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Zn(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var Xn=function(e){Object(L.a)(n,e);var t=Zn(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).onAdd=a.onAdd.bind(Object(Q.a)(a)),a.onInputChange=a.onInputChange.bind(Object(Q.a)(a)),a.onSelectChange=a.onSelectChange.bind(Object(Q.a)(a)),a.removeTableItem=a.removeTableItem.bind(Object(Q.a)(a)),a.validate=a.validate.bind(Object(Q.a)(a)),a.state={tableEntries:{},vks:[],from:"",until:"",charge:!0},a}return Object(v.a)(n,[{key:"onAdd",value:function(e){if(e.preventDefault(),this.formEl){var t=this.state.tableEntries,n=this.formEl.checkValidity();if(this.formEl.className="was-validated",n&&(n=this.state.vks.length>0),n){var a=new Date("01/01/1970 "+this.state.from),r=new Date("01/01/1970 "+this.state.until),o=(r.getTime()-a.getTime())/1e3/60/60;o<0&&(o+=24);var i,c=Qn(this.state.vks);try{for(c.s();!(i=c.n()).done;){var l=i.value;t[Math.round(1e5*Math.random())]={id:l.id,member:l,from:a,until:r,charge:this.state.charge,totalHours:o}}}catch(s){c.e(s)}finally{c.f()}this.setState({tableEntries:t,vks:[],from:"",until:"",charge:!0})}}}},{key:"onInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.name;this.setState(Object(zn.a)({},a,n))}},{key:"onSelectChange",value:function(e){if(e){var t=e;this.setState({vks:t})}}},{key:"removeTableItem",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentElement){var t=e.currentTarget.parentNode.parentElement.getAttribute("data-key");if(t){var n=this.state.tableEntries;delete n[t.replace("_","")],this.setState({tableEntries:n})}}}},{key:"validate",value:function(){var e=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(this.state.tableEntries).length>0)){e.next=3;break}return this.props.onNext({vks:this.state.tableEntries}),e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return c.a.createElement(Vn,Object.assign({title:"Einsatzzeiten",onNextStep:this.validate,onPreviousStep:this.props.onPrevious||Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}))},this.props),c.a.createElement("form",{ref:function(t){return e.formEl=t}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h5",null,"VKs"),c.a.createElement(Wn,{onChange:this.onSelectChange,isMulti:!0,defaultValue:this.state.vks.map(function(e){return e.id.toString()})})),c.a.createElement("div",{className:"col-2"},c.a.createElement("h5",null,"Verrechnen"),c.a.createElement("span",{className:"switch switch-sm"},c.a.createElement("input",{type:"checkbox",className:"switch",id:"charge",name:"charge",checked:this.state.charge,onChange:this.onInputChange}),c.a.createElement("label",{htmlFor:"charge"})))),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h5",null,"Von"),c.a.createElement("input",{type:"time",name:"from",value:this.state.from,onChange:this.onInputChange,className:"form-control",required:!0})),c.a.createElement("div",{className:"col"},c.a.createElement("h5",null,"Bis"),c.a.createElement("input",{type:"time",name:"until",value:this.state.until,onChange:this.onInputChange,className:"form-control",required:!0}))),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.onAdd},"Hinzuf\xfcgen")))),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement(Pe,{columns:[{text:"VK",keys:{member:["firstname","lastname"]},sortable:!0},{text:"Von",keys:["from"],format:"toLocaleTimeString",sortable:!0},{text:"Bis",keys:["until"],format:"toLocaleTimeString",sortable:!0},{text:"Anzahl Stunden",keys:["totalHours"],sortable:!0},{text:"Verrechnet",keys:["charge"],sortable:!0},{text:"Actions",keys:["id"],content:c.a.createElement("button",{className:"btn btn-danger",onClick:this.removeTableItem},"\u2a2f")}],defaultSort:{keys:["from"],direction:"asc"},data:this.state.tableEntries})))}}]),n}(i.Component);function ea(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var ta=function(e){Object(L.a)(n,e);var t=ea(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).onInputChange=a.onInputChange.bind(Object(Q.a)(a)),a.onNext=a.onNext.bind(Object(Q.a)(a)),a.onELChange=a.onSelectChange("els"),a.onDriversChange=a.onSelectChange("drivers"),a.state={els:[],drivers:[],food:!1,remarks:""},a}return Object(v.a)(n,[{key:"onInputChange",value:function(e){var t=e.target,n="checkbox"===t.type?t.checked:t.value,a=t.id;this.setState(Object(zn.a)({},a,n))}},{key:"onSelectChange",value:function(e){var t=this;return function(n){n?t.setState(Object(zn.a)({},e,n)):t.setState(Object(zn.a)({},e,[]))}}},{key:"onNext",value:function(){var e=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,this.state.els.length<=0&&(t=!1),t&&this.props.onNext(this.state),e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return c.a.createElement(Vn,Object.assign({title:"Weiteres",onNextStep:this.onNext},this.props),c.a.createElement("form",{ref:function(t){return e.formEl=t},className:"was-validated"},c.a.createElement("h5",null,"ELs"),c.a.createElement(Wn,{ref:function(t){return e.elSelect=t},onChange:this.onELChange,isMulti:!0,required:!0,defaultValue:this.state.els.map(function(e){return e.id.toString()})}),c.a.createElement("br",null),c.a.createElement("h5",null,"Fahrer"),c.a.createElement(Wn,{ref:function(t){return e.driversSelect=t},onChange:this.onDriversChange,isMulti:!0,required:!1,defaultValue:this.state.drivers.map(function(e){return e.id.toString()})}),c.a.createElement("br",null),c.a.createElement("h5",null,"Diverses"),c.a.createElement(we,{id:"food",checked:this.state.food,onChange:this.onInputChange,label:"Verpflegung"}),c.a.createElement("br",null),c.a.createElement("h5",null,"Bemerkungen"),c.a.createElement("small",{className:"text-muted"},"Bei mehreren EL bitte die Schichtzeiten hier eingeben"),c.a.createElement("textarea",{id:"remarks",value:this.state.remarks,onChange:this.onInputChange,className:"form-control"})))}}]),n}(i.Component),na=function(e){function t(){return Object(h.a)(this,t),Object(T.a)(this,Object(R.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return c.a.createElement(Vn,Object.assign({title:"Zusammenfassung",onNextStep:this.props.onNext},this.props),c.a.createElement("h5",null,"Einsatz"),c.a.createElement("p",null,this.props.order?this.props.order.title:""),c.a.createElement("h5",null,"Datum"),c.a.createElement("p",null,this.props.date?this.props.date.toLocaleDateString():""),c.a.createElement("h5",null,"VKs"),c.a.createElement(Pe,{columns:[{text:"VK",keys:{member:["firstname","lastname"]}},{text:"Von",keys:["from"],format:"toLocaleTimeString"},{text:"Bis",keys:["until"],format:"toLocaleTimeString"},{text:"Verrechnet",keys:["charge"]},{text:"Anzahl Stunden",keys:["totalHours"]}],defaultSort:{keys:["from"],direction:"asc"},data:this.props.vks?this.props.vks:{}}),c.a.createElement("h5",null,"ELs"),c.a.createElement("p",null,this.props.els.join(",")),c.a.createElement("h5",null,"Fahrer"),c.a.createElement("p",null,this.props.drivers.join(",")),c.a.createElement("h5",null,"Diverses"),c.a.createElement("p",{className:"switch switch-sm"},c.a.createElement("input",{type:"checkbox",className:"switch",id:"food",name:"food",checked:this.props.food}),c.a.createElement("label",{htmlFor:"food"},"Verpflegung")),c.a.createElement("h5",null,"Bemerkungen"),c.a.createElement("p",null,this.props.remarks?this.props.remarks:""))}}]),t}(i.Component);function aa(e){var t=Object(i.useState)([]),n=Object(It.a)(t,2),a=n[0],r=n[1],o=Object(i.useState)([]),l=Object(It.a)(o,2),s=l[0],d=l[1],m=Object(i.useState)(),p=Object(It.a)(m,2),h=p[0],v=p[1],E=Object(i.useState)(),y=Object(It.a)(E,2),O=y[0],k=y[1],S=Object(i.useState)(),N=Object(It.a)(S,2),j=N[0],x=N[1],C=Object(i.useState)(),A=Object(It.a)(C,2),w=A[0],I=A[1],D=Object(i.useState)(),T=Object(It.a)(D,2),R=T[0],L=T[1],_=Object(P.b)(Dn),M=Object(It.a)(_,2),B=M[0];Object(Bn.a)(M[1]);var $=Object(P.b)(at),F=Object(It.a)($,2),G=F[0];Object(Bn.a)(F[1]);var V=Object(u.d)();function q(e){for(var t in e)switch(t){case"order":v(e[t][0]);break;case"date":k(e[t]);break;case"vks":x(e[t]);break;case"els":r(e[t]);break;case"drivers":d(e[t]);break;case"food":I(e[t]);break;case"remarks":L(e[t])}}function U(){return(U=Object(b.a)(f.a.mark(function t(){var n,r,o,i,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B({variables:{data:{orderId:null===h||void 0===h?void 0:h.id,date:O,elIds:a.map(function(e){return e.id}),driverIds:s.map(function(e){return e.id}),food:w,remarks:R}}});case 2:if(!(n=t.sent).errors){t.next=5;break}return t.abrupt("return",!1);case 5:for(o in r=[],j)c=j[o],r.push({from:c.from,until:c.until,billingReportId:null===(i=n.data)||void 0===i?void 0:i.addBillingReport.id,memberId:c.id,date:O});return t.next=9,G({variables:{data:r}});case 9:if(!t.sent.errors){t.next=12;break}return t.abrupt("return",!1);case 12:return V(g.showSuccess("Gespeichert")),e.history.push("/billing-reports"),t.abrupt("return",!0);case 15:case"end":return t.stop()}},t)}))).apply(this,arguments)}return c.a.createElement(ue,{title:"Verrechnungsrapport erfassen"},c.a.createElement(xe,null,c.a.createElement(je,{className:"col"},c.a.createElement(Ne,{title:""},c.a.createElement(Fn.a,{nav:c.a.createElement(Gn,null)},c.a.createElement(Kn,{onNext:q}),c.a.createElement(Xn,{onNext:q}),c.a.createElement(ta,{onNext:q}),c.a.createElement(na,{onNext:function(){return U.apply(this,arguments)},order:h,date:O,vks:j,els:a.map(function(e){return e.firstname+" "+e.lastname}),drivers:s.map(function(e){return e.firstname+" "+e.lastname}),food:w||!1,remarks:R||""}))))))}function ra(e){var t,n=Object(P.c)(z),a=Object(u.d)();return n.loading?c.a.createElement(fe,null):n.data?(e.location.state&&e.location.state.prevLocation?e.history.replace(e.location.state.prevLocation):e.history.replace("/dashboard"),null):(e.location.state&&!e.location.state.unAuthenticated&&e.history.replace(e.location.pathname,Object.assign({},e.location.state,{errorShown:!0})),(null===(t=e.location.state)||void 0===t?void 0:t.unAuthenticated)&&a(g.showError("Bitte logge dich ein")),c.a.createElement("div",{className:"d-flex vw-100 vh-100",id:"login-container"},c.a.createElement("div",{id:"login"},c.a.createElement("h2",null,"Login"),c.a.createElement("div",{className:"form-group"},c.a.createElement("a",{className:"btn btn-secondary btn-block d-flex justify-content-between",href:re.apiEndpoint+"/api/auth/azure"},c.a.createElement("span",{className:"icon"},c.a.createElement(_.a,{icon:["fab","microsoft"]})),c.a.createElement("span",null,"VK-Login"),c.a.createElement("span",null))))))}function oa(e){return c.a.createElement(Bt,Object.assign({query:Y,title:"Benutzer",viewLocation:"/user/",tableColumns:[{text:"Name",keys:["displayName"],sortable:!0},{text:"Rechte",keys:["roles"],sortable:!0}],defaultSortBy:"displayName",searchable:!0},e))}function ia(e){return function(){var t,n=Object(R.a)(e);if(function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var a=Object(R.a)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Object(T.a)(this,t)}}var ca=function(e){Object(L.a)(n,e);var t=ia(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return c.a.createElement(ue,{title:""},c.a.createElement("div",{id:"page-404"},c.a.createElement("img",{src:"/webapp/404.png"})))}}]),n}(i.Component);function la(e){var t=Object(P.c)(H,{variables:{id:parseInt(e.match.params.id)}});if(t.loading)return c.a.createElement(fe,null);if(!t.data)return c.a.createElement(ca,null);return c.a.createElement(ue,{title:t.data.getUser.displayName},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Allgemeine Informationen"},c.a.createElement(en,{id:"displayName",title:"Name"},t.data.getUser.displayName)),c.a.createElement(Ne,{title:"Rechte"},function(){var e=[];if(!t.data)return null;for(var n in t.data.getUser.roles)e.push({role:t.data.getUser.roles[n],id:n});return c.a.createElement(Pe,{columns:[{text:"Role",keys:["role"]}],data:e})}())),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Bexio Informationen"},function(){if(!t.data||!t.data.getUser.bexioContact)return c.a.createElement("span",null,"Kein Link gefunden....");var e=t.data.getUser.bexioContact;return c.a.createElement("div",null,c.a.createElement(en,{id:"bexioId",title:"ID"},e.bexioId),c.a.createElement(en,{id:"firstname",title:"Vorname"},e.firstname),c.a.createElement(en,{id:"lastname",title:"Nachname"},e.lastname),c.a.createElement(Ce.a,{to:"/contact/"+e.id,className:"btn btn-block btn-outline-primary"},"Kontakt \xf6ffnen"),c.a.createElement("a",{target:"_blank",href:"https://office.bexio.com/index.php/kontakt/show/id/"+e.bexioId,className:"btn btn-block btn-outline-primary"},"In Bexio anschauen"))}()))))}function sa(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return ua(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ua(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function da(e){var t=Object(P.c)(bn),n=t.loading,a=t.error,r=t.data;if(n)return c.a.createElement(me,null);if(a)return null;if(!(null===r||void 0===r?void 0:r.getOpenOrders))return null;var o=[];if(e.defaultValue instanceof Array){var i,l=sa(e.defaultValue);try{var s=function(){var e=i.value,t=(r.getOpenOrders||[]).find(function(t){return t.id.toString()===e});t&&o.push({value:t.id.toString(),label:t.title})};for(l.s();!(i=l.n()).done;)s()}catch(u){l.e(u)}finally{l.f()}}return c.a.createElement(Lt.a,{isClearable:!0,options:function(e){var t,n=[],a=sa(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n.push({label:r.title,value:r.id.toString()})}}catch(u){a.e(u)}finally{a.f()}return n}((null===r||void 0===r?void 0:r.getOpenOrders)||[]),backspaceRemovesValue:!0,hideSelectedOptions:!0,openMenuOnFocus:!0,isMulti:e.isMulti||!1,onChange:function(t){var n=[t];e.isMulti&&(n=t),e.onChange(n.map(function(e){return null===r||void 0===r?void 0:r.getOpenOrders.find(function(t){return t.id===parseInt(e.value)})}))},value:o,required:!!e.required})}function ma(e){var t=Object(P.c)(wn,{variables:{id:parseInt(e.match.params.id),fetchPolicy:"cache-and-network"}}),n=t.loading,a=t.error,r=t.data,o=t.refetch,l=Object(i.useState)(),s=Object(It.a)(l,2),m=s[0],p=s[1],h=Object(i.useState)(!1),v=Object(It.a)(h,2),E=v[0],y=v[1],O=Object(i.useState)(!1),k=Object(It.a)(O,2),S=k[0],N=k[1],j=Object(i.useState)(),x=Object(It.a)(j,2),C=x[0],w=x[1],I=Object(P.c)(U),D=Object(P.c)(K),T=Object(P.b)(Tn),R=Object(It.a)(T,1)[0],L=Object(P.b)(Rn),M=Object(It.a)(L,1)[0],B=Object(P.b)(at),$=Object(It.a)(B,1)[0],F=Object(P.b)(rt),G=Object(It.a)(F,1)[0],V=Object(u.d)();if(n)return c.a.createElement(fe,null);if(a)return null;function q(){return z.apply(this,arguments)}function z(){return(z=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:t=e.sent,p(t.data.getBillingReport);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return Y.apply(this,arguments)}function Y(){return(Y=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M({variables:{id:null===r||void 0===r?void 0:r.getBillingReport.id,state:"APPROVED"}});case 2:if(!e.sent.errors){e.next=5;break}return e.abrupt("return");case 5:V(g.showSuccess("Bewilligt")),q();case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(){return(W=Object(b.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.currentTarget.parentNode&&t.currentTarget.parentNode.parentNode&&t.currentTarget.parentNode.parentNode.parentElement&&(n=t.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key"))&&(w(null===m||void 0===m?void 0:m.compensations.find(function(e){return e.id===parseInt(n||"")})),y(!0));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Q(){return J.apply(this,arguments)}function J(){return(J=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=10;break}return e.next=3,G({variables:{id:C.id}});case 3:if(!e.sent.errors){e.next=6;break}return e.abrupt("return");case 6:V(g.showSuccess("Gespeichert")),y(!1),w(void 0),q();case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Z(e){return X.apply(this,arguments)}function X(){return(X=Object(b.a)(f.a.mark(function e(t){var n,a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],m)for(a in t.vks)r=t.vks[a],n.push({from:r.from,until:r.until,billingReportId:m.id,date:m.date,memberId:r.member.id});return e.next=4,$({variables:{data:n}});case 4:if(!e.sent.errors){e.next=7;break}return e.abrupt("return");case 7:V(g.showSuccess("Gespeichert")),q(),y(!1);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e,t){var n=Object(d.a)({},m);n[e]=t,p(n)}function te(e){return function(t){var n=Object(d.a)({},m);n[e]=t,"order"===e&&(n[e]=t[0]),p(n)}}function ne(){return ae.apply(this,arguments)}function ae(){return(ae=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p(null===r||void 0===r?void 0:r.getBillingReport),N(!1);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(){return oe.apply(this,arguments)}function oe(){return(oe=Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=9;break}return e.next=3,R({variables:{data:{id:m.id,orderId:parseInt(m.order.id.toString()),date:m.date,elIds:m.els.map(function(e){return parseInt(e.id.toString())}),driverIds:m.drivers.map(function(e){return parseInt(e.id.toString())}),food:m.food,remarks:m.remarks}}});case 3:if(!e.sent.errors){e.next=6;break}return e.abrupt("return");case 6:V(g.showSuccess("Gespeichert")),q(),N(!1);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return!m&&(null===r||void 0===r?void 0:r.getBillingReport)&&p(r.getBillingReport),c.a.createElement(ue,{title:"Verrechnungsrapport"},C?c.a.createElement(Pn,{show:E,onHide:function(){y(!1)},header:c.a.createElement("h3",null,C.member.firstname+" "+C.member.lastname+" vom  "+new Date(C.date).toLocaleDateString()),body:c.a.createElement("span",null,"Willst du die Entsch\xe4digung von "+C.member.firstname+" "+C.member.lastname+" vom  "+new Date(C.date).toLocaleDateString()+" mit einem Betrag von CHF"+C.amount+" wirklich l\xf6schen?"),footer:c.a.createElement(Dt.a,null,c.a.createElement(xt,{variant:"danger",onClick:Q},"L\xf6schen"),c.a.createElement(xt,{variant:"secondary",onClick:function(){y(!1)}},"Abbrechen"))}):null,C?null:c.a.createElement(Pn,{show:E,onHide:function(){return y(!1)},header:c.a.createElement("h3",null,"Entsch\xe4digungen hinzuf\xfcgen"),body:c.a.createElement(Xn,{onNext:Z,onPrevious:function(){return y(!1),Promise.resolve(!0)}}),footer:c.a.createElement("div",null)}),c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},function(){if(m){var e,t,n,a="badge-success";"pending"===(null===m||void 0===m?void 0:m.state)&&(a="badge-warning"),"declined"===(null===m||void 0===m?void 0:m.state)&&(a="badge-danger");var r=[];return((null===(e=I.data)||void 0===e?void 0:e.me.roles.includes(A.ADMIN))||(null===(t=I.data)||void 0===t?void 0:t.me.roles.includes(A.BILLINGREPORTS_EDIT))||"pending"===(null===m||void 0===m?void 0:m.state)&&m.creator.id===(null===(n=D.data)||void 0===n?void 0:n.me.id))&&(S?(r.push(c.a.createElement(wt,{icon:"save",key:"save",onClick:re})),r.push(c.a.createElement(wt,{icon:"times",key:"edit",onClick:ne}))):r.push(c.a.createElement(wt,{icon:"pencil-alt",key:"edit",onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N(!0));case 1:case"end":return e.stop()}},e)})),roles:[A.BILLINGREPORTS_EDIT]}))),c.a.createElement(Ne,{title:"Informationen",actions:r,className:S?"editable":""},c.a.createElement(en,{id:"orderTitle",title:"Auftrag"},function(){if(m)return S?c.a.createElement(da,{defaultValue:[null===m||void 0===m?void 0:m.order.id.toString()],onChange:te("order")}):(null===m||void 0===m?void 0:m.order).title}()),c.a.createElement(en,{id:"date",title:"Datum",value:m.date?new Date(null===m||void 0===m?void 0:m.date).toISOString().split("T")[0]:"",type:"date",editable:S,onChange:ee}),c.a.createElement(en,{id:"creator",title:"Ersteller"},(null===m||void 0===m?void 0:m.creator).displayName),c.a.createElement(en,{id:"state",title:"Status"},c.a.createElement("div",{className:"badge "+a},null===m||void 0===m?void 0:m.state)),c.a.createElement(en,{id:"els",title:"ELs"},S?c.a.createElement(Wn,{defaultValue:null===m||void 0===m?void 0:m.els.map(function(e){return e.id.toString()}),isMulti:!0,onChange:te("els")}):null===m||void 0===m?void 0:m.els.map(function(e){return e.firstname+" "+e.lastname}).join(",")),c.a.createElement(en,{id:"drivers",title:"Fahrer"},S?c.a.createElement(Wn,{defaultValue:null===m||void 0===m?void 0:m.drivers.map(function(e){return e.id.toString()}),isMulti:!0,onChange:te("drivers")}):null===m||void 0===m?void 0:m.drivers.map(function(e){return e.firstname+" "+e.lastname}).join(",")),c.a.createElement(en,{id:"food",title:"Verpflegung",value:null===m||void 0===m?void 0:m.food,type:"checkbox",editable:S,onChange:ee}),c.a.createElement(en,{id:"remarks",title:"Bemerkungen",value:null===m||void 0===m?void 0:m.remarks,type:"textarea",editable:S,onChange:ee}))}}()),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Actions"},function(){var e=[c.a.createElement(Ce.a,{to:"/order/".concat(null===m||void 0===m?void 0:m.order.id),className:"btn btn-block btn-outline-primary"},"Auftrag \xf6ffnen")];return"pending"===(null===m||void 0===m?void 0:m.state)&&e.push(c.a.createElement(xt,{id:"approve",block:!0,variant:"outline-success",onClick:H,roles:[A.BILLINGREPORTS_APPROVE]},"Genehmigen")),e}()))),c.a.createElement(xe,null,c.a.createElement(je,null,c.a.createElement(Ne,{title:"VKs",actions:[c.a.createElement(wt,{icon:"plus",onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y(!0));case 1:case"end":return e.stop()}},e)}))})]},c.a.createElement(Pe,{columns:[{text:"Name",keys:{member:["firstname","lastname"]},sortable:!0},{text:"Von",keys:["from"],format:"toLocaleTimeString",sortable:!0},{text:"Bis",keys:["until"],format:"toLocaleTimeString",sortable:!0},{text:"Verrechnen",keys:["charge"],sortable:!0},{text:"Betrag",keys:["amount"],prefix:"CHF ",sortable:!0,format:"toFixed(2)"},{text:"Ausbezahlt",keys:["paied"],sortable:!0},{text:"Actions",keys:["_id"],content:c.a.createElement(Dt.a,null,[c.a.createElement(xt,{variant:"success",className:"view",onClick:function(t){if(t.preventDefault(),t.currentTarget.parentNode&&t.currentTarget.parentNode.parentNode&&t.currentTarget.parentNode.parentNode.parentElement){var n=t.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");1==t.button?window.open(document.location.origin+"/compensation/"+n):e.history.push("/compensation/"+n)}}},c.a.createElement(_.a,{icon:"eye"})),c.a.createElement(xt,{variant:"danger",className:"delete",onClick:function(e){return W.apply(this,arguments)},roles:[A.BILLINGREPORTS_EDIT]},c.a.createElement(_.a,{icon:"trash"}))])}],defaultSort:{keys:["from"],direction:"desc"},data:(null===m||void 0===m?void 0:m.compensations.map(function(e){return Object(d.a)({},e,{from:new Date(e.from),until:new Date(e.until)})}))||[]})))))}function pa(e){var t,n=Object(i.useState)(),a=Object(It.a)(n,2),r=a[0],o=a[1],l=Object(i.useState)(),s=Object(It.a)(l,2),d=s[0],m=s[1],p=Object(i.useState)(),h=Object(It.a)(p,2),v=h[0],E=h[1],y=Object(i.useState)(),O=Object(It.a)(y,2),k=O[0],S=O[1],N=Object(P.b)(nt),j=Object(It.a)(N,2),x=j[0],C=(j[1].data,Object(u.d)());function A(e){var t=e.target,n=t.value;switch(t.name){case"date":m(new Date(n));break;case"description":E(n);break;case"amount":S(parseFloat(n))}}function w(){return(w=Object(b.a)(f.a.mark(function n(a){var o;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!t){n.next=16;break}if(o=t.checkValidity(),t.className="was-validated",!o){n.next=14;break}return n.next=7,x({variables:{data:{memberId:r,date:d,description:v,amount:k}}});case 7:if(!n.sent.errors){n.next=10;break}return n.abrupt("return",!1);case 10:C(g.showSuccess("Gespeichert")),e.history.push("/compensations"),n.next=15;break;case 14:C(g.showError("Korrigiere zuerst die Fehler"));case 15:return n.abrupt("return",o);case 16:return C(g.showError("Korrigiere zuerst die Fehler")),n.abrupt("return",!1);case 18:case"end":return n.stop()}},n)}))).apply(this,arguments)}return c.a.createElement(ue,{title:"Entsch\xe4digung hinzuf\xfcgen"},c.a.createElement(xe,null,c.a.createElement(je,null,c.a.createElement(Ne,null,c.a.createElement("form",{id:"addCompensation",ref:function(e){t=e}},c.a.createElement("h5",null,"Mitglied"),c.a.createElement(Wn,{onChange:function(e){o(e?e[0].id:void 0)},isMulti:!1,defaultValue:r?[r.toString()]:void 0}),c.a.createElement("br",null),c.a.createElement("h5",null,"Datum"),c.a.createElement("input",{name:"date",type:"date",className:"form-control",value:d?d.toISOString().split("T")[0]:void 0,onChange:A,required:!0}),c.a.createElement("br",null),c.a.createElement("h5",null,"Beschreibung"),c.a.createElement("input",{name:"description",type:"text",className:"form-control",value:v,onChange:A,required:!0}),c.a.createElement("br",null),c.a.createElement("h5",null,"Betrag"),c.a.createElement("div",{className:"input-group mb-2"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("div",{className:"input-group-text"},"CHF")),c.a.createElement("input",{type:"number",step:"0.05",className:"form-control",name:"amount",value:k,onChange:A,placeholder:"0.00",required:!0})),c.a.createElement("br",null),c.a.createElement(Me.a,{variant:"primary",block:!0,onClick:function(e){return w.apply(this,arguments)}},"Speichern"))))))}function fa(e){var t,n=Object(P.c)(Qe,{variables:{id:parseInt(e.match.params.id)},fetchPolicy:"cache-and-network"}),a=n.loading,r=n.data,o=n.error,i=n.refetch,l=Object(P.b)(ot),s=Object(It.a)(l,1)[0],d=Object(u.d)();if((null===o||void 0===o?void 0:o.message)&&(null===o||void 0===o?void 0:o.message.indexOf("Access denied!"))>-1)return c.a.createElement(de,null);if(a||!r)return c.a.createElement(fe,null);if(!(t=r.getOrderCompensation?r.getOrderCompensation:r.getCustomCompensation))return c.a.createElement(ca,null);function m(){return p.apply(this,arguments)}function p(){return(p=Object(b.a)(f.a.mark(function n(){var a;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s({variables:{id:t.id}});case 2:if(!n.sent.errors){n.next=5;break}return n.abrupt("return",!1);case 5:return d(g.showSuccess("Bewilligt")),n.next=8,i({id:parseInt(e.match.params.id)});case 8:a=n.sent,t=a.data.getOrderCompensation||a.data.getCustomCompensation;case 10:case"end":return n.stop()}},n)}))).apply(this,arguments)}var h="badge-success";return t.approved||(h="badge-warning"),c.a.createElement(ue,{title:"Entsch\xe4digung"},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Informationen"},c.a.createElement(en,{id:"member",title:"Mitglied"},t.member.firstname," ",t.member.lastname),c.a.createElement(en,{id:"date",title:"Datum"},new Date(t.date).toLocaleDateString()),c.a.createElement(en,{id:"amount",title:"Betrag"},"CHF ",t.amount.toFixed(2)),t.description&&c.a.createElement(en,{id:"description",title:"Beschreibung"},t.description),c.a.createElement(en,{id:"state",title:"Status"},c.a.createElement("div",{className:"badge "+h},t.approved?"Bewilligt":"Ausstehend")),c.a.createElement(en,{id:"creator",title:"Ersteller"},t.creator.displayName))),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Actions"},function(){var e=[c.a.createElement(Ce.a,{to:"/contact/"+t.member.id,className:"btn btn-block btn-outline-primary"},"Kontakt \xf6ffnen")];return t.approved||e.push(c.a.createElement(xt,{id:"approve",block:!0,variant:"outline-success",onClick:m,roles:[A.COMPENSATIONS_APPROVE]},"Genehmigen")),e}()))),c.a.createElement(xe,null,function(){if(t.billingReport){var e="badge-success";return"pending"===(t=t).billingReport.state&&(e="badge-warning"),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Verrechnungsrapport"},c.a.createElement(en,{id:"orderNr",title:"Auftragsnummer"},t.billingReport.order.documentNr),c.a.createElement(en,{id:"orderNr",title:"Auftrag"},t.billingReport.order.title),c.a.createElement(en,{id:"state",title:"Verrechnungsrapportstatus"},c.a.createElement("div",{className:"badge "+e},t.billingReport.state)),c.a.createElement(en,{id:"from",title:"Von"},new Date(t.from).toLocaleTimeString()),c.a.createElement(en,{id:"until",title:"Bis"},new Date(t.until).toLocaleTimeString()),c.a.createElement(en,{id:"charge",title:"Verrechnen"},t.charge?"\u2713":"\u2a2f"),c.a.createElement(Ce.a,{to:"/order/"+t.billingReport.order.id,className:"btn btn-outline-primary btn-block"},"Auftrag"),c.a.createElement(Ce.a,{to:"/billing-report/"+t.billingReport.id,className:"btn btn-outline-primary btn-block"},"Verrechnungsrapport")))}}(),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Auszahlung"},c.a.createElement(en,{id:"paied",title:"Ausbezahlt"},t.paied?"\u2713":"\u2a2f"),t.payout?c.a.createElement(Ce.a,{to:"/payout/"+t.payout.id+"/"+t.member.id,className:"btn btn-outline-primary btn-block"},"Auszahlung"):c.a.createElement("p",null),t.bexioBill?c.a.createElement("a",{href:"https://office.bexio.com/index.php/kb_bill/show/id/".concat(t.bexioBill),target:"_blank",className:"btn btn-outline-primary btn-block"},"Bexio Lieferantenrechnung"):c.a.createElement("p",null),t.transferCompensation?c.a.createElement(Ce.a,{to:"/compensation/".concat(t.transferCompensation.id),className:"btn btn-outline-primary btn-block"},"\xdcbertrag"):c.a.createElement("p",null)))))}function ba(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ha(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function va(){var e=Object(P.c)(Ht),t=e.loading,n=(e.error,e.data),a=Object(u.d)();if(t||!n)return c.a.createElement(ue,{title:"Verteiler"},c.a.createElement(fe,null));var r,o={all:[],drivers:[],vks:[],squad:[],vst:[],con:[]},i=ba(n.getMembersAll);try{for(i.s();!(r=i.n()).done;){var l=r.value;o.all.push(l.mail),l.mailSecond&&o.all.push(l.mailSecond),o.all=o.all.concat(l.moreMails||[]),l.contactGroups&&(l.contactGroups.find(function(e){return 9===e.bexioId})&&(o.drivers.push(l.mail),l.mailSecond&&o.drivers.push(l.mailSecond),o.drivers=o.drivers.concat(l.moreMails||[])),l.contactGroups.find(function(e){return 17===e.bexioId||13===e.bexioId||11===e.bexioId||12===e.bexioId||28===e.bexioId||29===e.bexioId||15===e.bexioId||27===e.bexioId||26===e.bexioId||10===e.bexioId||14===e.bexioId})&&(o.vks.push(l.mail),l.mailSecond&&o.vks.push(l.mailSecond),o.vks=o.vks.concat(l.moreMails||[])),l.contactGroups.find(function(e){return 13===e.bexioId||12===e.bexioId||28===e.bexioId||29===e.bexioId||15===e.bexioId||14===e.bexioId})&&(o.squad.push(l.mail),l.mailSecond&&o.squad.push(l.mailSecond),o.squad=o.squad.concat(l.moreMails||[])),l.contactGroups.find(function(e){return 16===e.bexioId})&&(o.vst.push(l.mail),l.mailSecond&&o.vst.push(l.mailSecond),o.vst=o.vst.concat(l.moreMails||[])),l.contactGroups.find(function(e){return 22===e.bexioId})&&(o.con.push(l.mail),l.mailSecond&&o.con.push(l.mailSecond),o.con=o.con.concat(l.moreMails||[])))}}catch(m){i.e(m)}finally{i.f()}function s(e){navigator.permissions.query({name:"clipboard-write"}).then(function(t){"granted"!=t.state&&"prompt"!=t.state||(navigator.clipboard.writeText(e),a(g.showSuccess("Kopiert")))})}function d(e){return c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("button",{className:"btn btn-outline-secondary",id:"btnGroupAddon",onClick:Object(b.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s(e));case 1:case"end":return t.stop()}},t)}))},c.a.createElement(_.a,{icon:"clipboard"})))}return c.a.createElement(ue,{title:"Verteiler"},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-4"},c.a.createElement(Ne,{title:"Mitglieder"},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{className:"form-control",readOnly:!0,value:o.all.join(";")}),d(o.all.join(";"))))),c.a.createElement(je,{className:"col-md-4"},c.a.createElement(Ne,{title:"VKs (ohne Fahrer und Condor)"},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{className:"form-control",readOnly:!0,value:o.vks.join(";")}),d(o.vks.join(";"))))),c.a.createElement(je,{className:"col-md-4"},c.a.createElement(Ne,{title:"Kader"},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{className:"form-control",readOnly:!0,value:o.squad.join(";")}),d(o.squad.join(";")))))),c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-4"},c.a.createElement(Ne,{title:"Fahrer"},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{className:"form-control",readOnly:!0,value:o.drivers.join(";")}),d(o.drivers.join(";"))))),c.a.createElement(je,{className:"col-md-4"},c.a.createElement(Ne,{title:"Vorstand"},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{className:"form-control",readOnly:!0,value:o.vst.join(";")}),d(o.vst.join(";"))))),c.a.createElement(je,{className:"col-md-4"},c.a.createElement(Ne,{title:"Condor"},c.a.createElement("div",{className:"input-group"},c.a.createElement("input",{className:"form-control",readOnly:!0,value:o.con.join(";")}),d(o.con.join(";")))))))}function Ea(e){return c.a.createElement(Bt,Object.assign({query:rn,title:"Abholpunkte",panelActions:[c.a.createElement(wt,{icon:"plus",to:"/draft/collection-point/add",roles:[A.DRAFT_CREATE,A.DRAFT_EDIT]})],viewLocation:"/collection-point/",tableColumns:[{text:"Name",keys:["name"],sortable:!0},{text:"Abholpunkt",keys:["address","postcode","city"],link:!0,linkPrefix:"https://www.google.com/maps/search/",sortKey:"address",sortable:!0}],defaultSortBy:"name",searchable:!0},e))}function ya(e){var t,n=Object(i.useState)(""),a=Object(It.a)(n,2),r=a[0],o=a[1],l=Object(i.useState)(""),s=Object(It.a)(l,2),d=s[0],m=s[1],p=Object(i.useState)(""),h=Object(It.a)(p,2),v=h[0],E=h[1],y=Object(i.useState)(""),O=Object(It.a)(y,2),k=O[0],S=O[1],N=Object(P.b)(cn),j=Object(It.a)(N,2),x=j[0],C=(j[1].data,Object(u.d)());function A(e){var t=e.target,n=t.value;switch(t.name){case"name":o(n);break;case"address":m(n);break;case"postcode":E(n);break;case"city":S(n)}}function w(){return(w=Object(b.a)(f.a.mark(function n(a){var o;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!t){n.next=16;break}if(o=t.checkValidity(),t.className="was-validated",!o){n.next=14;break}return n.next=7,x({variables:{data:{name:r,address:d,postcode:v,city:k}}});case 7:if(!n.sent.errors){n.next=10;break}return n.abrupt("return",!1);case 10:C(g.showSuccess("Gespeichert")),e.history.push("/draft/collection-points"),n.next=15;break;case 14:C(g.showError("Korrigiere zuerst die Fehler"));case 15:return n.abrupt("return",o);case 16:return C(g.showError("Korrigiere zuerst die Fehler")),n.abrupt("return",!1);case 18:case"end":return n.stop()}},n)}))).apply(this,arguments)}return c.a.createElement(ue,{title:"Abholpunkt Hinzuf\xfcgen"},c.a.createElement(xe,null,c.a.createElement(je,null,c.a.createElement(Ne,null,c.a.createElement("form",{ref:function(e){return t=e}},c.a.createElement("h5",null,"Name"),c.a.createElement("input",{type:"text",name:"name",id:"name",className:"form-control",value:r,onChange:A,required:!0}),c.a.createElement("br",null),c.a.createElement("h5",null,"Addresse"),c.a.createElement("input",{type:"text",name:"address",id:"address",className:"form-control",value:d,onChange:A,required:!0}),c.a.createElement("br",null),c.a.createElement("h5",null,"PLZ"),c.a.createElement("input",{type:"text",minLength:4,maxLength:4,name:"postcode",id:"postcode",className:"form-control",value:v,onChange:A,required:!0}),c.a.createElement("br",null),c.a.createElement("h5",null,"Ort"),c.a.createElement("input",{type:"text",name:"city",id:"city",className:"form-control",value:k,onChange:A,required:!0}),c.a.createElement("br",null),c.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(e){return w.apply(this,arguments)}},"Speichern"))))))}function ga(){var e=Object(M.a)(["\n  mutation TRANSFER_PAYOUT($id: Int!, $memberIds: [Int!]!) {\n    transferPayout(id: $id, memberIds: $memberIds)\n  }\n"]);return ga=function(){return e},e}function Oa(){var e=Object(M.a)(["\n  mutation RECLAIM_PAYOUT($id: Int!) {\n    reclaimPayout(id: $id) {\n      id\n    }\n  }\n"]);return Oa=function(){return e},e}function ka(){var e=Object(M.a)(["\n  mutation SEND_PAYOUT_BEXIO($id: Int!, $memberIds: [Int!]) {\n    send2Bexio(id: $id, memberIds: $memberIds)\n  }\n"]);return ka=function(){return e},e}function Sa(){var e=Object(M.a)(["\n  mutation SEND_PAYOUT_MAIL($id: Int!, $memberIds: [Int!]) {\n    sendPayoutMails(id: $id, memberIds: $memberIds)\n  }\n"]);return Sa=function(){return e},e}function Na(){var e=Object(M.a)(["\n  mutation ADD_PAYOUT($until: DateTime!, $from: DateTime) {\n    addPayout(until: $until, from: $from) {\n      id\n    }\n  }\n"]);return Na=function(){return e},e}function ja(){var e=Object(M.a)(["\n  query GET_PAYOUT($id: Int!) {\n    getPayout(id: $id) {\n      id,\n      from,\n      until,\n      compensations {\n        id,\n        member {\n          id\n          firstname\n          lastname\n        }\n        amount\n      }\n      total\n    }\n  }\n"]);return ja=function(){return e},e}function xa(){var e=Object(M.a)(["\n  query GET_PAYOUTS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n  ) {\n    getAllPayouts(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        from\n        until\n        total\n      }\n    }\n  }\n"]);return xa=function(){return e},e}var Ca=Object(B.a)(xa()),Aa=Object(B.a)(ja()),wa=Object(B.a)(Na()),Ia=Object(B.a)(Sa()),Da=Object(B.a)(ka()),Ta=Object(B.a)(Oa()),Ra=Object(B.a)(ga());function La(e){return c.a.createElement(Bt,Object.assign({query:Ca,title:"Auszahlungen",viewLocation:"/payout/",tableColumns:[{text:"Von",keys:["from"],sortable:!0,format:"toLocaleDateString"},{text:"Bis",keys:["until"],sortable:!0,format:"toLocaleDateString"},{text:"Total",keys:["total"],sortable:!0,prefix:"CHF ",format:"toFixed(2)"}],defaultSortBy:"until",defaultSortDirection:At.DESC},e))}var _a=n(93),Pa=n.n(_a);function Ma(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"===typeof e)return Ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ba(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,o=!0,i=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){i=!0,r=e},f:function(){try{o||null==a.return||a.return()}finally{if(i)throw r}}}}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function $a(e){var t,n,a,r,o,l,s,d,m=Object(P.c)(Aa,{variables:{id:parseInt(e.match.params.id)}}),p=Object(i.useState)(!1),h=Object(It.a)(p,2),v=h[0],E=h[1],y=Object(i.useState)(),O=Object(It.a)(y,2),k=O[0],S=O[1],N=Object(i.useState)([]),j=Object(It.a)(N,2),x=j[0],C=j[1],w=Object(P.b)(Ia),I=Object(It.a)(w,1)[0],D=Object(P.b)(Da),T=Object(It.a)(D,1)[0],R=Object(P.b)(Ta),L=Object(It.a)(R,1)[0],M=Object(P.b)(Ra),B=Object(It.a)(M,1)[0],$=Object(u.d)();function F(){return(F=Object(b.a)(f.a.mark(function t(n){var a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),n.currentTarget.parentNode&&n.currentTarget.parentNode.parentNode&&n.currentTarget.parentNode.parentNode.parentElement&&(a=n.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key"),1==n.button?window.open(document.location.origin+e.history.location.pathname+"/".concat(a)):e.history.push(e.history.location.pathname+"/".concat(a)));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function G(){return V.apply(this,arguments)}function V(){return(V=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I({variables:{id:null===(t=m.data)||void 0===t?void 0:t.getPayout.id,memberIds:x}}),$(g.showSuccess("Mailversand gestarted")),E(!1);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(){return U.apply(this,arguments)}function U(){return(U=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T({variables:{id:null===(t=m.data)||void 0===t?void 0:t.getPayout.id,memberIds:x}}),$(g.showSuccess("Bexio\xfcbertrag gestarted")),E(!1);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function K(){return(K=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L({variables:{id:null===(t=m.data)||void 0===t?void 0:t.getPayout.id}});case 2:if(!e.sent.errors){e.next=5;break}return e.abrupt("return");case 5:$(g.showSuccess("Abgeschlossen"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){return(z=Object(b.a)(f.a.mark(function e(){var t;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(x.length>0)){e.next=8;break}return e.next=3,B({variables:{id:null===(t=m.data)||void 0===t?void 0:t.getPayout.id,memberIds:x}});case 3:if(!e.sent.errors){e.next=6;break}return e.abrupt("return");case 6:return $(g.showSuccess("\xdcbertragen")),e.abrupt("return");case 8:$(g.showError("Zuerst eine Auswahl t\xe4tigen"));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e,t){return Y.apply(this,arguments)}function Y(){return(Y=Object(b.a)(f.a.mark(function e(t,n){var a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=window.URL.createObjectURL(t),(r=document.createElement("a")).href=a,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(){return(W=Object(b.a)(f.a.mark(function e(){var t,n,a,r,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.data){e.next=5;break}return e.next=3,Pa()({method:"POST",url:"".concat(re.apiEndpoint,"/api/payouts/xml"),data:{payoutId:null===(t=m.data)||void 0===t?void 0:t.getPayout.id,memberIds:x},withCredentials:!0,timeout:6e5});case 3:o=e.sent,H(new Blob([o.data]),"Soldperiode_".concat(new Date(null===(n=m.data)||void 0===n?void 0:n.getPayout.from)>new Date("1970-01-01")?new Date(null===(a=m.data)||void 0===a?void 0:a.getPayout.from).toLocaleDateString():"","_-_").concat(new Date(null===(r=m.data)||void 0===r?void 0:r.getPayout.until).toLocaleDateString(),".xml"));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}if(!m.data||m.loading)return c.a.createElement(ue,{title:"Loading..."},c.a.createElement(fe,null));var Q,J={},Z=Ma(null===(d=m.data)||void 0===d?void 0:d.getPayout.compensations);try{for(Z.s();!(Q=Z.n()).done;){var X=Q.value;J.hasOwnProperty(X.member.id)||(J[X.member.id]={id:X.member.id,member:X.member,total:0});var ee=J[X.member.id];ee.total=ee.total+X.amount,J[X.member.id]=ee}}catch(te){Z.e(te)}finally{Z.f()}return c.a.createElement(ue,{title:"Auszahlung ".concat(new Date(null===(t=m.data)||void 0===t?void 0:t.getPayout.from).toLocaleDateString()," - ").concat(new Date(null===(n=m.data)||void 0===n?void 0:n.getPayout.until).toLocaleDateString())},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Informationen"},c.a.createElement(en,{id:"from",title:"Von",value:new Date(null===(a=m.data)||void 0===a?void 0:a.getPayout.from).toLocaleDateString(),type:"date"}),c.a.createElement(en,{id:"until",title:"Bis",value:new Date(null===(r=m.data)||void 0===r?void 0:r.getPayout.until).toLocaleDateString(),type:"date"}),c.a.createElement(en,{id:"countCompensations",title:"Anzahl Entsch\xe4diungen",value:null===(o=m.data)||void 0===o?void 0:o.getPayout.compensations.length,editable:!1}),c.a.createElement(en,{id:"total",title:"Total",value:"CHF ".concat(null===(l=m.data)||void 0===l?void 0:l.getPayout.total.toFixed(2))}))),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Actions"},c.a.createElement("a",{className:"btn btn-block btn-outline-primary",target:"_blank",href:"".concat(re.apiEndpoint,"/api/payouts/").concat(null===(s=m.data)||void 0===s?void 0:s.getPayout.id,"/pdf")},"PDF"),c.a.createElement(xt,{block:!0,variant:"outline-primary",roles:[A.PAYOUTS_SEND],onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(!0),S("mail");case 2:case"end":return e.stop()}},e)}))},"Best\xe4tigung E-Mails verschicken"),c.a.createElement(xt,{block:!0,variant:"outline-primary",roles:[A.PAYOUTS_SEND],onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(!0),S("bexio");case 2:case"end":return e.stop()}},e)}))},"An Bexio \xfcbertragen"),c.a.createElement(xt,{block:!0,variant:"outline-primary",onClick:function(){return function(){return W.apply(this,arguments)}()}},"Banking XML herunterladen"),c.a.createElement(xt,{block:!0,variant:"outline-primary",onClick:function(){return K.apply(this,arguments)}},"Neu Berechnen"),c.a.createElement(xt,{block:!0,variant:"outline-primary",roles:[A.PAYOUTS_SEND],onClick:function(){return function(){return z.apply(this,arguments)}()}},"\xdcbertragen")))),c.a.createElement(xe,null,c.a.createElement(je,null,c.a.createElement(Ne,{title:"Entsch\xe4diungen"},c.a.createElement(Pe,{columns:[{text:"Mitglied",keys:{member:["lastname","firstname"]},sortable:!0},{text:"Betrag",keys:["total"],prefix:"CHF ",sortable:!0,format:"toFixed(2)"},{text:"Actions",keys:["id"],content:c.a.createElement("div",{className:"btn-group"},c.a.createElement(xt,{variant:"success",className:"view",onClick:function(e){return F.apply(this,arguments)}},c.a.createElement(_.a,{icon:"eye"})))}],checkable:!0,onCheck:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentNode&&e.currentTarget.parentNode.parentNode.parentElement){var t=e.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");if(t){var n=parseInt(t);x.indexOf(n)>-1?C(Object(Xt.a)(x.filter(function(e){return e!==n}))):C([].concat(Object(Xt.a)(x),[parseInt(t)]))}}},defaultSort:{keys:["_member.lastname","firstname"],direction:"asc"},data:J})))),"mail"===k?0===x.length?c.a.createElement(Pn,{show:v,header:c.a.createElement("h3",null,"E-Mails versenden"),body:c.a.createElement("span",null,"Willst du wirklich eine E-Mail ",c.a.createElement("b",null,"an alle")," mit der Entsch\xe4digungsauszahlung senden?"),footer:c.a.createElement(Dt.a,null,c.a.createElement(xt,{variant:"success",onClick:G},"Senden"),c.a.createElement(xt,{variant:"danger",onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(!1);case 1:case"end":return e.stop()}},e)}))},"Abbrechen"))}):c.a.createElement(Pn,{show:v,header:c.a.createElement("h3",null,"E-Mails versenden"),body:c.a.createElement("span",null,"Willst du wirklich eine E-Mail ",c.a.createElement("b",null,"an folgende Personen")," mit der Entsch\xe4digungsauszahlung senden?",c.a.createElement("ul",null,x.map(function(e){var t,n,a=null===(t=m.data)||void 0===t?void 0:null===(n=t.getPayout.compensations.find(function(t){return t.member.id===e}))||void 0===n?void 0:n.member;return c.a.createElement("li",null,null===a||void 0===a?void 0:a.lastname," ",null===a||void 0===a?void 0:a.firstname)}))),footer:c.a.createElement(Dt.a,null,c.a.createElement(xt,{variant:"success",onClick:G},"Senden"),c.a.createElement(xt,{variant:"danger",onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(!1);case 1:case"end":return e.stop()}},e)}))},"Abbrechen"))}):"bexio"===k?0===x.length?c.a.createElement(Pn,{show:v,header:c.a.createElement("h3",null,"Bexio \xdcbertrag"),body:c.a.createElement("span",null,"Willst du wirklich ",c.a.createElement("b",null,"alle")," Entsch\xe4digungen an Bexio \xfcbertragen?"),footer:c.a.createElement(Dt.a,null,c.a.createElement(xt,{variant:"success",onClick:q},"Ja"),c.a.createElement(xt,{variant:"danger",onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(!1);case 1:case"end":return e.stop()}},e)}))},"Nein"))}):c.a.createElement(Pn,{show:v,header:c.a.createElement("h3",null,"Bexio \xdcbertrag"),body:c.a.createElement("span",null,"Willst du wirklich ",c.a.createElement("b",null,"folgende Entsch\xe4digungen")," an Bexio \xfcbertragen?",c.a.createElement("ul",null,x.map(function(e){var t,n,a=null===(t=m.data)||void 0===t?void 0:null===(n=t.getPayout.compensations.find(function(t){return t.member.id===e}))||void 0===n?void 0:n.member;return c.a.createElement("li",null,null===a||void 0===a?void 0:a.lastname," ",null===a||void 0===a?void 0:a.firstname)}))),footer:c.a.createElement(Dt.a,null,c.a.createElement(xt,{variant:"success",onClick:q},"Ja"),c.a.createElement(xt,{variant:"danger",onClick:Object(b.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(!1);case 1:case"end":return e.stop()}},e)}))},"Abbrechen"))}):null)}function Fa(e){var t,n,a,r,o,i,l,s,u,d,m,p,h,v=Object(P.c)(Ze,{variables:{payoutId:parseInt(e.match.params.id),memberId:parseInt(e.match.params.memberId)}}),E=Object(P.c)(Wt,{variables:{id:parseInt(e.match.params.memberId)}}),y=Object(P.c)(Aa,{variables:{id:parseInt(e.match.params.id)}});if(v.loading||E.loading||y.loading)return c.a.createElement(ue,{title:"Loading..."},c.a.createElement(fe,null));if(!(null===(t=v.data)||void 0===t?void 0:t.getContactCompensations)||!(null===(n=E.data)||void 0===n?void 0:n.getContact)||!(null===(a=y.data)||void 0===a?void 0:a.getPayout))return null;function g(e,t){return O.apply(this,arguments)}function O(){return(O=Object(b.a)(f.a.mark(function e(t,n){var a,r;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=window.URL.createObjectURL(t),(r=document.createElement("a")).href=a,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(function(){window.URL.revokeObjectURL(a)},100);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e,t){return S.apply(this,arguments)}function S(){return(S=Object(b.a)(f.a.mark(function e(t,n){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pa()({method:"POST",url:"".concat(re.apiEndpoint,"/api/payouts/member/pdf"),data:{payoutId:t,memberId:n.id},withCredentials:!0,timeout:6e5,responseType:"arraybuffer"});case 2:return a=e.sent,e.next=5,g(new Blob([a.data],{type:"application/pdf"}),"Auszahlung Verkehrskadettenentsch\xe4digung ".concat(n.lastname," ").concat(n.firstname,".pdf"));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var N=0;return null===(r=v.data)||void 0===r||r.getContactCompensations.map(function(e){return N+=parseFloat(e.amount.toFixed(2))}),c.a.createElement(ue,{title:"Auszahlung ".concat(new Date(null===(o=y.data)||void 0===o?void 0:o.getPayout.from).toLocaleDateString()," - ").concat(new Date(null===(i=y.data)||void 0===i?void 0:i.getPayout.until).toLocaleDateString()," / ").concat(null===(l=E.data)||void 0===l?void 0:l.getContact.firstname," ").concat(null===(s=E.data)||void 0===s?void 0:s.getContact.lastname)},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Informationen"},c.a.createElement(en,{id:"member",title:"Mitglied"},null===(u=E.data)||void 0===u?void 0:u.getContact.firstname," ",null===(d=E.data)||void 0===d?void 0:d.getContact.lastname),c.a.createElement(en,{id:"amountCompensations",title:"Anzahl Entsch\xe4digungen"},null===(m=v.data)||void 0===m?void 0:m.getContactCompensations.length),c.a.createElement(en,{id:"total",title:"Total"},"CHF ",N.toFixed(2)),c.a.createElement(en,{id:"payout",title:"Auszahlung"},new Date(null===(p=y.data)||void 0===p?void 0:p.getPayout.until).toLocaleDateString()))),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Actions"},c.a.createElement(xt,{block:!0,variant:"outline-primary",onClick:Object(b.a)(f.a.mark(function e(){var t,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k((null===(t=y.data)||void 0===t?void 0:t.getPayout).id,null===(n=E.data)||void 0===n?void 0:n.getContact);case 2:case"end":return e.stop()}},e)}))},"PDF")))),c.a.createElement(xe,null,c.a.createElement(je,null,c.a.createElement(Ne,{title:"Entsch\xe4digungen"},c.a.createElement(Pe,{columns:[{text:"Datum",keys:["date"],sortable:!0,format:"toLocaleDateString"},{text:"Beschreibung",keys:["description"],sortable:!0},{text:"Betrag",keys:["amount"],prefix:"CHF ",sortable:!0,format:"toFixed(2)"},{text:"Genehmigt",keys:["approved"],sortable:!0},{text:"Ausbezahlt",keys:["paied"],sortable:!0},{text:"Actions",keys:["_id"],content:c.a.createElement(Me.a,{variant:"success",className:"view",onMouseUp:function(t){if(t.currentTarget.parentNode&&t.currentTarget.parentNode.parentElement){var n=t.currentTarget.parentNode.parentElement.getAttribute("data-key");1==t.button?window.open(document.location.origin+"/compensation/"+n):e.history.push("/compensation/"+n)}}},c.a.createElement(_.a,{icon:"eye"}))}],defaultSort:{keys:["date"],direction:"desc"},data:null===(h=v.data)||void 0===h?void 0:h.getContactCompensations})))))}function Ga(e){var t,n=Object(i.useState)(),a=Object(It.a)(n,2),r=a[0],o=a[1],l=Object(i.useState)(),s=Object(It.a)(l,2),d=s[0],m=s[1],p=Object(P.b)(wa),h=Object(It.a)(p,2),v=h[0],E=(h[1].data,Object(u.d)());function y(e,t){switch(e){case"from":o(t);break;case"until":m(t)}}function O(){return(O=Object(b.a)(f.a.mark(function n(a){var o;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!t){n.next=16;break}if(o=t.checkValidity(),t.className="was-validated",!o){n.next=14;break}return n.next=7,v({variables:{until:d,from:r}});case 7:if(!n.sent.errors){n.next=10;break}return n.abrupt("return",!1);case 10:E(g.showSuccess("Gespeichert")),e.history.push("/payouts"),n.next=15;break;case 14:E(g.showError("Korrigiere zuerst die Fehler"));case 15:return n.abrupt("return",o);case 16:return E(g.showError("Korrigiere zuerst die Fehler")),n.abrupt("return",!1);case 18:case"end":return n.stop()}},n)}))).apply(this,arguments)}return c.a.createElement(ue,{title:"Auszahlung hinzuf\xfcgen"},c.a.createElement(xe,null,c.a.createElement(je,null,c.a.createElement(Ne,null,c.a.createElement("form",{id:"addPayout",ref:function(e){t=e}},c.a.createElement("h5",null,"Von (optional)"),c.a.createElement(Te,{type:"date",name:"from",key:"from",value:r,onChange:y,editable:!0}),c.a.createElement("br",null),c.a.createElement("h5",null,"Bis"),c.a.createElement(Te,{type:"date",name:"until",key:"until",value:d,onChange:y,editable:!0,required:!0}),c.a.createElement("br",null),c.a.createElement(xt,{variant:"primary",block:!0,onClick:function(e){return O.apply(this,arguments)}},"Speichern"))))))}function Va(e){var t=Object(P.b)(Ot),n=Object(It.a)(t,1)[0],a=Object(i.useState)(!1),r=Object(It.a)(a,2),o=r[0],l=r[1],s=Object(i.useState)(0),u=Object(It.a)(s,2),d=u[0],m=u[1],p=Object(P.a)(ht,{variables:{id:d}}),f=Object(It.a)(p,2),b=f[0],h=f[1];function v(){n({variables:{id:d}}),l(!1)}return c.a.createElement(c.a.Fragment,null,function(){var e,t,n,a,r,i,s,u,m,p,f,b;return d?h.loading||!h.called?c.a.createElement(Pn,{show:o,onHide:function(){l(!1)},header:c.a.createElement("h3",null,"Loading..."),body:c.a.createElement(fe,null),footer:c.a.createElement(Dt.a,null,c.a.createElement(Me.a,{variant:"secondary",onClick:function(){l(!1)}},"Abbrechen"))}):c.a.createElement(Pn,{show:o,onHide:function(){l(!1)},header:c.a.createElement("h3",null,"".concat(null===(e=h.data)||void 0===e?void 0:e.getLogoff.contact.firstname," ").concat(null===(t=h.data)||void 0===t?void 0:t.getLogoff.contact.lastname," (").concat((null===(n=h.data)||void 0===n?void 0:n.getLogoff.from)?new Date(null===(a=h.data)||void 0===a?void 0:a.getLogoff.from).toLocaleDateString():""," - ").concat((null===(r=h.data)||void 0===r?void 0:r.getLogoff.until)?new Date(null===(i=h.data)||void 0===i?void 0:i.getLogoff.until).toLocaleDateString():"")),body:c.a.createElement("span",null,"Willst du die Abmeldung von \n                                ".concat(null===(s=h.data)||void 0===s?void 0:s.getLogoff.contact.firstname," ").concat(null===(u=h.data)||void 0===u?void 0:u.getLogoff.contact.lastname,"\n                                vom ").concat((null===(m=h.data)||void 0===m?void 0:m.getLogoff.from)?new Date(null===(p=h.data)||void 0===p?void 0:p.getLogoff.from).toLocaleDateString():""," bis ").concat((null===(f=h.data)||void 0===f?void 0:f.getLogoff.until)?new Date(null===(b=h.data)||void 0===b?void 0:b.getLogoff.until).toLocaleDateString():"","\n                                wirklich l\xf6schen?")),footer:c.a.createElement(Dt.a,null,c.a.createElement(Me.a,{variant:"danger",onClick:v},"L\xf6schen"),c.a.createElement(Me.a,{variant:"secondary",onClick:function(){l(!1)}},"Abbrechen"))}):null}(),c.a.createElement(Bt,Object.assign({query:vt,filterQuery:Et,defaultFilter:0,title:"Abmeldungen",viewLocation:"/draft/logoff/",panelActions:[c.a.createElement(wt,{icon:"plus",to:"/draft/logoff/add",roles:[A.LOGOFFS_CREATE]})],rowActions:[c.a.createElement("button",{className:"btn btn-danger delete",onMouseUp:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentNode&&e.currentTarget.parentNode.parentNode.parentElement){var t=e.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");t&&(m(parseInt(t)),l(!0),b())}}},c.a.createElement(_.a,{icon:"trash"}))],tableColumns:[{text:"Mitglied",keys:{contact:["firstname","lastname"]},sortKey:"contact.firstname",sortable:!0},{text:"Von",keys:["from"],sortable:!0,format:"toLocaleString"},{text:"Bis",keys:["until"],sortable:!0,format:"toLocaleString"},{text:"Status",keys:["state"],sortable:!0}],defaultSortBy:"from",defaultSortDirection:At.DESC,pollInterval:1e3,searchable:!0},e)))}var qa;!function(e){e.APPROVED="APPROVED",e.PENDING="PENDING",e.DECLINED="DECLINED"}(qa||(qa={}));function Ua(e){var t,n,a,r,o,i,l,s,d,m,p,h=Object(P.c)(ht,{variables:{id:parseInt(e.match.params.id)},fetchPolicy:"cache-and-network"}),v=Object(P.b)(gt),E=Object(It.a)(v,1)[0],y=Object(u.d)();function O(e){return k.apply(this,arguments)}function k(){return(k=Object(b.a)(f.a.mark(function e(t){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E({variables:{id:null===(n=h.data)||void 0===n?void 0:n.getLogoff.id,state:t,notify:!0}});case 2:if(!e.sent.errors){e.next=5;break}return e.abrupt("return",!1);case 5:t===qa.APPROVED?y(g.showSuccess("Bewilligt")):y(g.showError("Abgelehnt")),h.refetch();case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}if(h.loading)return c.a.createElement(ue,{title:"Abmeldung"},c.a.createElement(fe,null));if(!h.data)return c.a.createElement(ca,null);var S="";switch(null===(t=h.data)||void 0===t?void 0:t.getLogoff.state){case qa.PENDING:S="badge-warning";break;case qa.APPROVED:S="badge-success";break;case qa.DECLINED:S="badge-danger"}return c.a.createElement(ue,{title:"Abmeldung"},c.a.createElement(xe,null,c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Informationen"},c.a.createElement(en,{id:"contact",title:"Mitglied"},null===(n=h.data)||void 0===n?void 0:n.getLogoff.contact.firstname," ",null===(a=h.data)||void 0===a?void 0:a.getLogoff.contact.lastname),c.a.createElement(en,{id:"from",title:"Von"},new Date(null===(r=h.data)||void 0===r?void 0:r.getLogoff.from).toLocaleString()),c.a.createElement(en,{id:"until",title:"Bis"},new Date(null===(o=h.data)||void 0===o?void 0:o.getLogoff.until).toLocaleString()),c.a.createElement(en,{id:"state",title:"Status"},c.a.createElement("div",{className:"badge "+S},null===(i=h.data)||void 0===i?void 0:i.getLogoff.state)),c.a.createElement(en,{id:"creator",title:"Ersteller"},null===(l=h.data)||void 0===l?void 0:l.getLogoff.createdBy.displayName),c.a.createElement(en,{id:"changedStateBy",title:"Status ge\xe4ndert von"},null===(s=h.data)||void 0===s?void 0:null===(d=s.getLogoff)||void 0===d?void 0:null===(m=d.changedStateBy)||void 0===m?void 0:m.displayName),c.a.createElement(en,{id:"remarks",title:"Bemerkungen"},null===(p=h.data)||void 0===p?void 0:p.getLogoff.remarks))),c.a.createElement(je,{className:"col-md-6"},c.a.createElement(Ne,{title:"Actions"},function(){var e,t,n=[c.a.createElement(Ce.a,{to:"/contact/"+(null===(e=h.data)||void 0===e?void 0:e.getLogoff.contact.id),className:"btn btn-block btn-outline-primary"},"Kontakt \xf6ffnen")];return(null===(t=h.data)||void 0===t?void 0:t.getLogoff.state)===qa.PENDING&&(n=[].concat(Object(Xt.a)(n),[c.a.createElement(xt,{id:"approve",block:!0,variant:"outline-success",onClick:function(){O(qa.APPROVED)},roles:[A.LOGOFFS_APPROVE]},"Genehmigen"),c.a.createElement(xt,{id:"decline",block:!0,variant:"outline-danger",onClick:function(){O(qa.DECLINED)},roles:[A.LOGOFFS_APPROVE]},"Ablehnen")])),n}()))))}function Ka(e){var t,n=Object(i.useState)(),a=Object(It.a)(n,2),r=a[0],o=a[1],l=Object(i.useState)(!0),s=Object(It.a)(l,2),d=s[0],m=s[1],p=Object(i.useState)([]),h=Object(It.a)(p,2),v=h[0],E=h[1],y=Object(P.b)(yt),O=Object(It.a)(y,2),k=O[0],S=(O[1].data,Object(u.d)());function N(e,t,n,a){if(a){var r={id:v.length.toString()};r[t]=n,r.state=qa.APPROVED,E([].concat(Object(Xt.a)(v),[r]))}else e&&E(v.map(function(a,r){return r===parseInt(e.toString())&&(a[t]=n),a}))}function j(){return(j=Object(b.a)(f.a.mark(function n(a){var o;return f.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!t){n.next=16;break}if(o=t.checkValidity(),t.className="was-validated",!o){n.next=14;break}return n.next=7,k({variables:{data:v.map(function(e){return{contactId:r,from:e.from,until:e.until,state:e.state,remarks:e.remarks}}),notify:d}});case 7:if(!n.sent.errors){n.next=10;break}return n.abrupt("return",!1);case 10:S(g.showSuccess("Gespeichert")),e.history.push("/draft/logoffs"),n.next=15;break;case 14:S(g.showError("Korrigiere zuerst die Fehler"));case 15:return n.abrupt("return",o);case 16:return S(g.showError("Korrigiere zuerst die Fehler")),n.abrupt("return",!1);case 18:case"end":return n.stop()}},n)}))).apply(this,arguments)}return c.a.createElement(ue,{title:"Abmeldungen hinzuf\xfcgen"},c.a.createElement(xe,null,c.a.createElement(je,null,c.a.createElement(Ne,null,c.a.createElement("form",{id:"addLogoffs",ref:function(e){t=e}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("h5",null,"Mitglied"),c.a.createElement(Wn,{onChange:function(e){o(e?e[0].id:void 0)},defaultValue:r?[r.toString()]:void 0,required:!0})),c.a.createElement("div",{className:"col-1"},c.a.createElement("h5",null,"Benachrichtigen"),c.a.createElement(Te,{type:"checkbox",className:"d-flex justify-content-center",name:"notify",key:"notify",value:d,onChange:function(e,t){switch(e){case"notify":m(t)}},editable:!0}))),c.a.createElement("br",null),c.a.createElement(Pe,{columns:[{keys:["from"],text:"Von",editable:!0,type:"datetime",onChange:N,required:!0},{keys:["until"],text:"Bis",editable:!0,type:"datetime",onChange:N,required:!0},{keys:["state"],text:"Status",editable:!0,type:"select",options:["approved","pending","declined"],onChange:N,required:!0},{keys:["remarks"],text:"Bemerkungen",editable:!0,type:"text",onChange:N,required:!1}],addNew:!0,data:v}),c.a.createElement(Me.a,{variant:"primary",block:!0,onClick:function(e){return j.apply(this,arguments)}},"Speichern"))))))}var za=n(81);var Ha=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ya(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(n.postMessage({type:"SKIP_WAITING"}),navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):"activated"===n.state?window.location.reload():(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(c.a.createElement(function(){re.loadConfig();var e=Object(Ee.a)({basename:"/webapp/"}),t=function(e){return{store:Object(m.createStore)(Object(m.combineReducers)(Object(d.a)({},S,{router:Object(j.b)(e)})),Object(C.composeWithDevTools)(Object(m.applyMiddleware)(N.a,Object(x.a)(e))))}}(e).store;t.getState();var n=new Se.a({credentials:"include",uri:"".concat(re.apiEndpoint,"/graphql")}),a=Object(za.a)(function(n){var a=n.graphQLErrors,r=n.networkError,o=n.operation;a&&a.map(function(t){var n=t.message,a=t.path;a&&"me"===a[0]&&n.indexOf("Access denied!")>-1&&"/login"!==e.location.pathname?e.push("/login",{unAuthenticated:!0,prevLocation:e.location.pathname}):console.error("[GraphQL error]: Message: ".concat(n,", Operation: ").concat(o.operationName,", Path: ").concat(a))}),r&&(t.dispatch(g.showError("Etwas ist schief gelaufen")),console.error("[Network error]: ".concat(r)))}),r=new ye.a({link:ge.a.from([a,n]),cache:new Oe.a});return c.a.createElement(u.a,{store:t},c.a.createElement("div",{className:"body"},c.a.createElement(O.ToastContainer,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,draggable:!0,pauseOnHover:!0}),c.a.createElement(j.a,{history:e},c.a.createElement(ke.a,{client:r},c.a.createElement(w.a,null,c.a.createElement(I.a,{exact:!0,path:"/",component:function(){return c.a.createElement(D.a,{to:"/login"})}}),c.a.createElement(I.a,{exact:!0,path:"/login",component:ra}),c.a.createElement(I.a,{exact:!0,path:"/login?source=:source",component:ra}),c.a.createElement(ve,{exact:!0,path:"/dashboard",roles:[A.AUTHENTICATED],component:Nt}),c.a.createElement(ve,{exact:!0,path:"/members",roles:[A.MEMBERS_READ],component:Zt}),c.a.createElement(ve,{exact:!0,path:"/mailing-lists",roles:[A.MAILING_LISTS],component:va}),c.a.createElement(ve,{exact:!0,path:"/draft/collection-points",roles:[A.DRAFT_READ],component:Ea}),c.a.createElement(ve,{exact:!0,path:"/draft/collection-point/add",roles:[A.DRAFT_EDIT,A.DRAFT_CREATE],component:ya}),c.a.createElement(ve,{exact:!0,path:"/draft/logoffs",roles:[A.LOGOFFS_READ],component:Va}),c.a.createElement(ve,{exact:!0,path:"/draft/logoff/add",roles:[A.LOGOFFS_CREATE],component:Ka}),c.a.createElement(ve,{exact:!0,path:"/draft/logoff/:id",roles:[A.LOGOFFS_READ,A.AUTHENTICATED],component:Ua}),c.a.createElement(ve,{exact:!0,path:"/contact/:id",roles:[A.CONTACTS_READ,A.MEMBERS_READ,A.AUTHENTICATED],component:dn}),c.a.createElement(ve,{exact:!0,path:"/orders",roles:[A.ORDERS_READ],component:En}),c.a.createElement(ve,{exact:!0,path:"/order/:id",roles:[A.ORDERS_READ],component:On}),c.a.createElement(ve,{exact:!0,path:"/billing-reports",roles:[A.BILLINGREPORTS_READ,A.BILLINGREPORTS_CREATE],component:Ln}),c.a.createElement(ve,{exact:!0,path:"/billing-reports/add",roles:[A.BILLINGREPORTS_CREATE],component:aa}),c.a.createElement(ve,{exact:!0,path:"/billing-report/:id",roles:[A.BILLINGREPORTS_CREATE,A.BILLINGREPORTS_READ],component:ma}),c.a.createElement(ve,{exact:!0,path:"/compensations",roles:[A.COMPENSATIONS_READ],component:Mn}),c.a.createElement(ve,{exact:!0,path:"/compensations/add",roles:[A.COMPENSATIONS_CREATE],component:pa}),c.a.createElement(ve,{exact:!0,path:"/compensation/:id",roles:[A.COMPENSATIONS_READ,A.AUTHENTICATED],component:fa}),c.a.createElement(ve,{exact:!0,path:"/payouts",roles:[A.PAYOUTS_READ],component:La}),c.a.createElement(ve,{exact:!0,path:"/payouts/add",roles:[A.PAYOUTS_CREATE],component:Ga}),c.a.createElement(ve,{exact:!0,path:"/payout/:id",roles:[A.PAYOUTS_READ],component:$a}),c.a.createElement(ve,{exact:!0,path:"/payout/:id/:memberId",roles:[A.PAYOUTS_READ],component:Fa}),c.a.createElement(ve,{exact:!0,path:"/users",roles:[A.ADMIN],component:oa}),c.a.createElement(ve,{exact:!0,path:"/user/:id",roles:[A.ADMIN],component:la}),c.a.createElement(I.a,{path:"/*",component:ca}))))))},null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/webapp",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/webapp","/service-worker.js");Ha?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ya(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):Ya(t,e)})}}()}},[[154,2,1]]]);
//# sourceMappingURL=main.c4fd958c.chunk.js.map