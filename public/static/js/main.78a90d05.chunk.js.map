{"version":3,"sources":["fontawesome_init.ts","actions/UIActions.ts","reducers/UIReducer.ts","reducers/IndexReducer.ts","interfaces/AuthRoles.ts","graphql/UserQueries.ts","components/Header.tsx","components/NavibarElement.tsx","components/NavibarLevelHeader.tsx","Config.ts","components/Navibar.tsx","components/Page.tsx","components/Errors/403.tsx","components/LoadingDots.tsx","components/Loading.tsx","components/SecureRoute.tsx","components/Panel.tsx","components/Column.tsx","components/Row.tsx","components/Checkbox.tsx","components/Input.tsx","components/Table.tsx","graphql/CompensationQueries.ts","components/ContactCompensation.tsx","graphql/LogoffQueries.ts","components/ContactLogoffs.tsx","views/Dashboard.tsx","components/Button.tsx","graphql/Interfaces.ts","components/Action.tsx","components/GraphQLDataList.tsx","components/GraphQLTable.tsx","graphql/ContactQueries.ts","views/Members.tsx","components/FormEntry.tsx","graphql/CollectionPointQueries.ts","components/CollectionPointSelect.tsx","views/Contact.tsx","graphql/OrderQueries.ts","views/Orders.tsx","views/Order.tsx","graphql/BillingReportQueries.ts","views/BillingReports.tsx","components/Modal.tsx","views/Compensations.tsx","components/WizardNav.tsx","components/WizardStep.tsx","views/AddBillingReportSteps/AddBillingReportStep1.tsx","components/MemberSelect.tsx","views/AddBillingReportSteps/AddBillingReportStep2.tsx","views/AddBillingReportSteps/AddBillingReportStep3.tsx","views/AddBillingReportSteps/AddBillingReportStep4.tsx","views/AddBillingReport.tsx","views/Login.tsx","views/Users.tsx","components/Errors/404.tsx","views/User.tsx","components/OrderSelect.tsx","views/BillingReport.tsx","views/AddCompensation.tsx","views/Compensation.tsx","views/MailingLists.tsx","views/CollectionPoints.tsx","views/AddCollectionPoint.tsx","graphql/PayoutQueries.ts","views/Payouts.tsx","views/Payout.tsx","views/PayoutMember.tsx","views/AddPayout.tsx","entities/Logoff.ts","views/Logoffs.tsx","views/Logoff.tsx","views/AddLogoff.tsx","serviceWorker.js","index.tsx","Root.tsx","Store.ts"],"names":["library","add","fab","faUserTimes","faCheckCircle","faFileInvoiceDollar","faFileWord","faFilePdf","faExternalLinkAlt","faFileExcel","faPowerOff","faTrash","faSave","faAddressBook","faMapMarkerAlt","faDownload","faClipboard","faBars","faTachometerAlt","faUsers","faCircleNotch","faTimes","faCheck","faSortUp","faSortDown","faPencilAlt","faFileAlt","faEye","faFileSignature","faPlus","faList","faDollarSign","faUser","faAngleLeft","faAngleDown","faMailBulk","UIActions","NAVIBAR_TOGGLE","NAVIBAR_OPEN","NAVIBAR_CLOSE","NAVIBAR_LEVEL_OPEN","NAVIBAR_LEVEL_COLLAPSE","NOTIFICATION_SUCCESS","NOTIFICATION_ERROR","LOGOUT","WORKING","UI","Object","classCallCheck","this","createClass","key","value","type","id","payload","message","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","wrap","_context","prev","next","push","abrupt","stop","_x","apply","arguments","working","combineReducers","IndexReducer","ui","navibar_open","state","length","undefined","CurrentDevice","mobile","navibar_level","action","notification","toast","success","autoClose","position","error","AuthRoles","GET_MY_ROLES","gql","_templateObject","GET_MY_ID","_templateObject2","GET_ME","_templateObject3","GET_USER","_templateObject4","GET_USERS","_templateObject5","Header","props","_useQuery","useQuery","loading","data","className","open","react_default","createElement","me","displayName","onClick","react_fontawesome_index_es","icon","_NavibarElement","_Component","_this","possibleConstructorReturn","getPrototypeOf","call","onMouseUp","bind","assertThisInitialized","level","inherits","event","onClose","toggleNavibar","to","content","match","href","target","NavLink","exact","activeClassName","leftIcon","rightIcon","renderLinkElement","text","Component","NavibarElement","withRouter","connect","collapseNavibarLevel","_NavibarLevelHeader","_super","open_level","onOpen","_this2","openClass","toString","Children","map","children","child","cloneElement","NavibarLevelHeader","openNavibarLevel","Config","apiEndpoint","concat","window","location","protocol","host","isMode","mode","process","toLowerCase","Navibar","renderElement","element","roles","_step","_iterator","_createForOfIteratorHelper","s","n","done","role","includes","ADMIN","err","e","f","AUTHENTICATED","MEMBERS_READ","MAILING_LISTS","DRAFT_READ","LOGOFFS_READ","ORDERS_READ","BILLINGREPORTS_CREATE","BILLINGREPORTS_READ","COMPENSATIONS_READ","PAYOUTS_READ","_Page","Page_createSuper","closeNavibar","openNavibar","title","Page","Error403","LoadingDots","Loading","fullscreen","SecureRoute","Loading_Loading","showError","Route","path","component","SecureRoute_createForOfIteratorHelper","indexOf","Redirect","pathname","prevLocation","Panel","header","actions","React","isValidElement","el","scrollable","Column","Row","Checkbox","onCheck","checked","editable","setState","onChange","prevProps","hasOwnProperty","required","htmlFor","label","Input","name","Checkbox_Checkbox","aria-describedby","readOnly","Date","react_datepicker_min_default","date","selected","allowSameDay","dateFormat","disabledKeyboardNavigation","toLocaleDateString","showTimeSelect","timeFormat","shouldCloseOnSelect","toLocaleString","options","option","Table","sortClick","search","ref","onColumnDataChange","defaultSort","sortKey","keys","join","sortDirection","direction","searchableKeys","genSearchKeys","columns","filter","defaultFilter","filters","columnKey","newly","column","find","colKey","Array","k","table","obj","filterKey","goDownFilterKey","RegExp","test","filterId","matches","index","maxIndex","currentFilter","compareableData","filterMatcher","matchedKeys","result","forEach","genSortKeys","prepared","sortValues","i","Table_createForOfIteratorHelper","b","replace","getTime","sort","aValue","bValue","parseFloat","isNaN","sorted","_i","_prepared","split","_step2","finalKeys","_iterator2","dataKey","dataset","parentElement","onSort","_step3","searchKeys","_iterator3","searchable","searchString","_step4","record","searchableString","_iterator4","_step5","_iterator5","_this3","renderColumnValues","format","param","command","_this4","rows","onDataChange","_loop","dataEntry","row","checkable","style","width","_step7","_iterator7","_loop3","tdKey","_loop4","link","linkPrefix","prefix","suffix","Input_Input","trKey","data-key","addNew","_step6","newRow","_iterator6","_loop2","_this5","sortIndicator","sortable","scope","cursor","renderRows","GET_COMPENSATION","CompensationQueries_templateObject","GET_COMPENSATIONS_BY_CONTACT","CompensationQueries_templateObject2","GET_COMPENSATIONS_BY_CONTACT_AND_PAYOUT","CompensationQueries_templateObject3","GET_COMPENSATIONS","CompensationQueries_templateObject4","GET_BASE_COMPENSATION","CompensationQueries_templateObject5","GET_COMPENSATION_FILTERS","_templateObject6","ADD_CUSTOMCOMPENSATION","_templateObject7","ADD_ORDERCOMPENSATIONS","_templateObject8","DELETE_COMPENSATION","_templateObject9","_templateObject10","APPROVE_COMPENSATION","_templateObject11","ContactCompensation","ContactCompensation_createSuper","compensationView","currentTarget","parentNode","getAttribute","button","document","origin","history","esm_Button","variant","react_components_esm","query","variables","contactId","fetchPolicy","Panel_Panel","openCompensationsSum","compensations","getContactCompensations","reduce","p","c","paied","amount","toFixed","Table_Table","GET_LOGOFFS_BY_CONTACT","LogoffQueries_templateObject","GET_LOGOFF","LogoffQueries_templateObject2","GET_LOGOFFS","LogoffQueries_templateObject3","GET_LOGOFF_FILTERS","LogoffQueries_templateObject4","ADD_LOGOFFS","LogoffQueries_templateObject5","CHANGE_LOGOFF_STATE","LogoffQueries_templateObject6","DELETE_LOGOFF","LogoffQueries_templateObject7","ContactLogoff","logoffView","getContactLogoffs","Dashboard","Row_Row","Column_Column","shortcuts","Link","bexioContact","CONTACTS_READ","renderShortcuts","ContactLogoffs_ContactLogoff","assign","renderLogoffs","ContactCompensation_ContactCompensation","renderCompensations","Button","setTimeout","rec","_this3$props$roles","active","block","size","disabled","viewBox","d","fillOpacity","attributeName","from","dur","repeatCount","nextProps","prevState","PaginationSortDirections","Action","preventDefault","Button_Button","PaginationFilterOperator","GraphQLTable","_props$queryVariables","_props$queryVariables2","_props$queryVariables3","_useState","useState","_useState2","slicedToArray","limit","setLimit","_useState3","_useState4","setCursor","_useState5","defaultSortBy","_useState6","sortBy","setSortBy","_useState7","defaultSortDirection","ASC","_useState8","setSortDirection","objectSpread","queryVariables","pollInterval","useEffect","dataSet","sortkey","DESC","data-sortKey","GraphQLTable_createForOfIteratorHelper","items","Math","max","min","total","Pagination","Prev","page","slice","Ellipsis","Item","renderPaginationItems","Next","react_select_esm","opt","isClearable","GraphQLDataList","setSearchString","filterQuery","customFilters","setFilter","customFilter","setCustomFilter","onFilterClick","fs","getFilter","forceRerender","panelActions","ButtonToolbar","toRenderFilters","filterAdditions","ButtonGroup","components","Fragment","refetch","renderFilters","additionalTitleStuff","placeholder","tableColumns","viewLocation","rowActions","GET_ALL_MEMBERS_SELECT","ContactQueries_templateObject","GET_ALL_MEMBERS","ContactQueries_templateObject2","GET_MEMBERS","ContactQueries_templateObject3","ContactQueries_templateObject4","GET_CONTACT","ContactQueries_templateObject5","GET_MEMBERS_FILTERS","ContactQueries_templateObject6","EDIT_CONTACT","ContactQueries_templateObject7","Members","collectionPoint","Action_Action","FormEntry","renderChildren","GET_COLLECTIONPOINTS","CollectionPointQueries_templateObject","GET_ALL_COLLECITONPOINTS","CollectionPointQueries_templateObject2","ADD_COLLECTIONPOINT","CollectionPointQueries_templateObject3","CollectionPointSelect","collectionPoints","getCollectionPoints","valueProps","defaultValue","CollectionPointSelect_createForOfIteratorHelper","address","postcode","city","prepareOptions","backspaceRemovesValue","hideSelectedOptions","openMenuOnFocus","isMulti","r","parseInt","Contact","setEditable","_useMutation","useMutation","editContactMutation","myroles","params","getContact","contact","setContact","useDispatch","_403_Error403","onInputChange","clone","onMoreMailsChange","toConsumableArray","moreMails","_removeMoreMailEntry","_callee2","_context2","onSave","_onSave","_callee3","_context3","collectionPointId","entryDate","exitDate","bankName","iban","accountHolder","sent","errors","showSuccess","t0","t1","onAbort","_onAbort","_callee4","_context4","firstname","lastname","CONTACTS_EDIT","MEMBERS_EDIT","FormEntry_FormEntry","rank","birthday","opts","renderCollectionPoint","phoneFixed","phoneFixedSecond","phoneMobile","mail","mailSecond","removeMoreMailEntry","contactGroups","group","remarks","isAdmin","bexioId","renderActions","GET_OPEN_ORDERS","OrderQueries_templateObject","GET_ORDERS","OrderQueries_templateObject2","GET_ORDER","OrderQueries_templateObject3","Orders","Order","_order$data3","_order$data5","_order$data6","_order$data7","_order$data8","_order$data9","_order$data10","_order$data11","_order$data12","_order$data13","_order$data14","_order$data15","_order$data4","order","getOrder","execDates","documentNr","deliveryAddress","_order$data","positionsRendered","positions","_order$data2","Order_createForOfIteratorHelper","pos","dangerouslySetInnerHTML","__html","positionTotal","renderPositions","GET_BILLINGREPORTS","BillingReportQueries_templateObject","GET_BILLINGREPORT","BillingReportQueries_templateObject2","GET_BILLINGREPORT_FILTERS","BillingReportQueries_templateObject3","ADD_BILLINGREPORT","BillingReportQueries_templateObject4","EDIT_BILLINGREPORT","BillingReportQueries_templateObject5","CHANGE_BILLINGREPORT_STATE","BillingReportQueries_templateObject6","BillingReports","creator","Modal","handleClose","onHide","esm_Modal","show","dialogClassName","closeButton","Body","body","Footer","footer","Compensations","showModal","setShowModal","_useLazyQuery","useLazyQuery","_useLazyQuery2","getCompensation","lazyCompensation","deleteCompensationMutation","deleteCompensationConfirmed","_deleteCompensationConfirmed","_lazyCompensation$dat2","Modal_Modal","_lazyCompensation$dat","toDeleteCompensation","member","renderModal","COMPENSATIONS_CREATE","COMPENSATIONS_EDIT","WizardNav","steps","totalSteps","classes","currentStep","renderSteps","WizardStep","previousStep","nextStep","renderBackButton","valid","onNextStep","onPreviousStep","nextButtonText","nextButtonClasses","AddBillingReportStep1","formEl","openOrders","setDate","setOrder","WizardStep_WizardStep","getOpenOrders","checkValidity","onNext","form","AddBillingReportStep1_createForOfIteratorHelper","renderOptions","MemberSelect","MemberSelect_createForOfIteratorHelper","getMembersAll","ops","m","AddBillingReportStep2","onAdd","onSelectChange","removeTableItem","validate","tableEntries","vks","until","charge","selection","totalHours","AddBillingReportStep2_createForOfIteratorHelper","round","random","defineProperty","optlet","entries","onPrevious","AddBillingReportStep3","onELChange","onDriversChange","els","drivers","food","stateName","select","elSelect","driversSelect","AddBillingReportStep4","AddBillingReport","setEls","setDrivers","_useState9","_useState10","setVks","_useState11","_useState12","setFood","_useState13","_useState14","setRemarks","_useMutation2","addBillingReport","objectDestructuringEmpty","_useMutation3","_useMutation4","addOrderCompensations","_save","_result$data","vk","orderId","elIds","driverIds","billingReportId","memberId","react_step_wizard_min_default","nav","WizardNav_WizardNav","AddBillingReportStep2_AddBillingReportStep2","AddBillingReportStep3_AddBillingReportStep3","AddBillingReportStep4_AddBillingReportStep4","driver","Login","_props$location$state","unAuthenticated","errorShown","Users","Error404","src","User","user","_404_Error404","getUser","renderRolePart","renderBexioPart","OrderSelect","OrderSelect_createForOfIteratorHelper","o","BillingReport","billingReport","setBillingReport","setToDeleteCompensation","Å•oles","myId","editBillingReportMutation","changeBillingReportStateMutation","_useMutation5","addOrderCompensationsMutation","_useMutation7","refetchAndSet","_refetchAndSet","getBillingReport","approve","_approve","_deleteCompensation","_callee6","_context6","_callee7","_context7","addCompensations","_x2","_addCompensations","_callee8","input","compensationEntries","entry","_context8","_callee9","_context9","_callee10","_context10","Promise","resolve","_oles$data","_oles$data2","_myId$data","statusBadgeClass","BILLINGREPORTS_EDIT","renderOrder","toISOString","renderInformations","BILLINGREPORTS_APPROVE","AddCollectionPoint","setMember","description","setDescription","setAmount","addCustomCompensation","step","Compensation","compensation","approveMutation","getOrderCompensation","getCustomCompensation","response","approved","COMPENSATIONS_APPROVE","toLocaleTimeString","renderBillingReport","payout","bexioBill","transferCompensation","MailingLists","mailingLists","all","squad","vst","con","MailingLists_createForOfIteratorHelper","copy","navigator","permissions","then","clipboard","writeText","addCopy","CollectionPoints","DRAFT_CREATE","DRAFT_EDIT","setName","setAddress","setPostcode","setCity","addCollectionPoint","minLength","maxLength","GET_PAYOUTS","PayoutQueries_templateObject","GET_PAYOUT","PayoutQueries_templateObject2","ADD_PAYOUT","PayoutQueries_templateObject3","SEND_PAYOUT_MAIL","PayoutQueries_templateObject4","SEND_PAYOUT_BEXIO","PayoutQueries_templateObject5","RECLAIM_PAYOUT","PayoutQueries_templateObject6","TRANSFER_PAYOUT","PayoutQueries_templateObject7","Payouts","Payout","_payout$data3","_payout$data4","_payout$data5","_payout$data6","_payout$data7","_payout$data8","_payout$data9","_payout$data18","modalType","setModalType","setSelected","sendMailMutation","sendBexioMutation","reclaimMutation","transferMutation","_elementView","sendMails","_sendMails","_payout$data10","getPayout","memberIds","sendToBexio","_sendToBexio","_payout$data11","_reclaim","_payout$data12","_transfer","_callee11","_payout$data13","_context11","downloader","_x3","_downloader","_callee12","blob","filename","url","_context12","URL","createObjectURL","download","appendChild","click","removeChild","_getBankingXml","_callee13","_payout$data14","_payout$data15","_payout$data16","_payout$data17","_context13","axios","method","payoutId","withCredentials","timeout","Blob","Payout_createForOfIteratorHelper","PAYOUTS_SEND","_callee5","_context5","getBankingXml","transfer","newId","_payout$data","_payout$data$getPayou","_payout$data2","_payout$data2$getPayo","PayoutMember","_memberCompensations$","_member$data","_memberCompensations$2","_member$data2","_member$data3","_member$data4","_member$data5","_memberCompensations$3","_memberCompensations$4","memberCompensations","revokeObjectURL","memberPdf","_x4","_memberPdf","responseType","_member$data6","AddPayout","setFrom","setUntil","addPayout","LogoffState","Logoffs","toDeleteLogoff","setToDeleteLogoff","fromFilter","setFromFilter","untilFilter","setUntilFilter","APPROVED","stateFilter","setStateFilter","deleteLogoffMutation","lazyGetLogoff","logoff","deleteLogoffConfirmed","_logoff$data","_logoff$data2","_logoff$data3","_logoff$data4","_logoff$data5","_logoff$data6","_logoff$data7","_logoff$data8","_logoff$data9","_logoff$data10","_logoff$data11","_logoff$data12","called","getLogoff","LOGOFFS_CREATE","minDate","values","useCallback","field","operator","getFilterValue","selectedCustomFilter","Logoff","_logoff$data10$getLog","_logoff$data10$getLog2","changeStateMutation","changeState","_changeState","notify","PENDING","DECLINED","createdBy","changedStateBy","LOGOFFS_APPROVE","AddLogoff","setNotify","logoffs","setLogoffs","addLogoffs","onLogoffChange","item","Col","contacts","lg","md","sm","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","postMessage","controller","console","log","onUpdate","reload","onSuccess","catch","ReactDOM","render","loadConfig","createBrowserHistory","basename","store","createStore","router","connectRouter","composeWithDevTools","applyMiddleware","thunkMiddleware","routerMiddleware","configureStore","getState","httpLink","BatchHttpLink","credentials","uri","errorLink","onError","graphQLErrors","networkError","operation","_ref2","operationName","apolloClient","ApolloClient","ApolloLink","cache","InMemoryCache","es","lib","hideProgressBar","newestOnTop","closeOnClick","rtl","draggable","pauseOnHover","esm","react_common_esm","client","Switch","AddCompensation","PAYOUTS_CREATE","getElementById","addEventListener","fetch","contentType","headers","get","status","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.78a90d05.chunk.js","sourcesContent":["import { library } from '@fortawesome/fontawesome-svg-core'\nimport { faUserTimes, faCheckCircle, faFileInvoiceDollar, faFileWord, faFilePdf, faExternalLinkAlt, faFileExcel, faPowerOff, faTrash, faSave, faAddressBook, faMapMarkerAlt, faDownload, faClipboard, faBars, faTachometerAlt, faUsers, faCircleNotch, faTimes, faCheck, faSortUp, faSortDown, faPencilAlt, faFileAlt, faEye, faFileSignature, faPlus, faList, faDollarSign, faUser, faAngleLeft, faAngleDown, faMailBulk } from '@fortawesome/free-solid-svg-icons'\nimport { fab } from '@fortawesome/free-brands-svg-icons'\n//@ts-ignore\nlibrary.add(fab, faUserTimes, faCheckCircle, faFileInvoiceDollar, faFileWord, faFilePdf, faExternalLinkAlt, faFileExcel, faPowerOff, faTrash, faSave, faAddressBook, faMapMarkerAlt, faDownload, faClipboard, faBars, faTachometerAlt, faUsers, faCircleNotch, faTimes, faCheck, faSortUp, faSortDown, faPencilAlt, faFileAlt, faEye, faFileSignature, faPlus, faList, faDollarSign, faDollarSign, faUser, faAngleLeft, faAngleDown, faMailBulk)\n","import { ThunkAction } from \"redux-thunk\"\nimport { State } from \"../reducers/IndexReducer\"\nimport { AnyAction, Dispatch } from \"redux\"\nimport { push } from \"connected-react-router\"\nimport { ExecutionResult } from \"react-apollo\"\n\nexport const UIActions = {\n    NAVIBAR_TOGGLE: 'navibar_toggle',\n    NAVIBAR_OPEN: 'navibar_open',\n    NAVIBAR_CLOSE: 'navibar_close',\n    NAVIBAR_LEVEL_OPEN: 'navibar_level_open',\n    NAVIBAR_LEVEL_COLLAPSE: 'navibar_level_collapse',\n\n    NOTIFICATION_SUCCESS: 'notification_success',\n    NOTIFICATION_ERROR: 'notification_error',\n\n    LOGOUT: 'logout',\n\n    WORKING: 'working'\n}\n\nexport class UI {\n    public static toggleNavibar() {\n        return {\n            type: UIActions.NAVIBAR_TOGGLE\n        }\n    }\n\n    public static openNavibar() {\n        return {\n            type: UIActions.NAVIBAR_OPEN\n        }\n    }\n\n    public static closeNavibar() {\n        return {\n            type: UIActions.NAVIBAR_CLOSE\n        }\n    }\n\n    public static openNavibarLevel(id: string) {\n        return {\n            type: UIActions.NAVIBAR_LEVEL_OPEN,\n            payload: id\n        }\n    }\n\n    public static collapseNavibarLevel() {\n        return {\n            type: UIActions.NAVIBAR_LEVEL_COLLAPSE\n        }\n    }\n\n    public static showError(message: string) {\n        return {\n            type: UIActions.NOTIFICATION_ERROR,\n            payload: message\n        }\n    }\n\n    public static showSuccess(message: string) {\n        return {\n            type: UIActions.NOTIFICATION_SUCCESS,\n            payload: message\n        }\n    }\n\n    public static logout(): ThunkAction<Promise<AnyAction>, State, void, AnyAction> {\n        return async (dispatch: Dispatch) => {\n            dispatch(push('/login'))\n            return { type: UIActions.LOGOUT }\n        }\n    }\n\n    public static setWorking(working: string) {\n        return {\n            type: UIActions.WORKING,\n            payload: working\n        }\n    }\n}","import { combineReducers, AnyAction } from \"redux\"\nimport { UIActions } from \"../actions/UIActions\"\nimport { toast } from 'react-toastify'\nimport CurrentDevice from 'current-device'\n\nexport interface UI {\n    navibar_open: boolean,\n    navibar_level: string,\n    notification: null,\n    working: string\n}\n\n\nfunction NavibarToggle(state: boolean = !CurrentDevice.mobile(), action: AnyAction) {\n    switch (action.type) {\n        case UIActions.NAVIBAR_TOGGLE:\n            return !state\n        case UIActions.NAVIBAR_OPEN:\n            return true\n        case UIActions.NAVIBAR_CLOSE:\n            return false\n        default:\n            return state\n    }\n}\n\nfunction NavibarLevel(state: string = '', action: AnyAction) {\n    switch (action.type) {\n        case UIActions.NAVIBAR_LEVEL_OPEN:\n            return action.payload\n        case UIActions.NAVIBAR_LEVEL_COLLAPSE:\n            return ''\n        default:\n            return state\n    }\n}\n\nfunction Notify(state = null, action: AnyAction): null {\n    switch (action.type) {\n        case UIActions.NOTIFICATION_SUCCESS:\n            toast.success(action.payload, {\n                autoClose: 2000,\n                position: (CurrentDevice.mobile() ? 'bottom-center' : 'top-right')\n            })\n            return state\n        case UIActions.NOTIFICATION_ERROR:\n            toast.error(action.payload, {\n                autoClose: 2000,\n                position: (CurrentDevice.mobile() ? 'bottom-center' : 'top-right')\n            })\n            return state\n        default:\n            return state\n    }\n}\n\nexport default combineReducers({ navibar_open: NavibarToggle, navibar_level: NavibarLevel, notification: Notify })","import UIReducer, { UI } from \"./UIReducer\";\n\nexport interface State {\n    ui: UI,\n}\n\nexport default { ui: UIReducer }","export enum AuthRoles {\n    AUTHENTICATED = 'AUTHENTICATED',\n\n    CONTACTS_READ = 'CONTACTS_READ',\n    CONTACTS_EDIT = 'CONTACTS_EDIT',\n\n    MEMBERS_READ = 'MEMBERS_READ',\n    MEMBERS_EDIT = 'MEMBERS_EDIT',\n\n    MAILING_LISTS = 'MAILING_LISTS',\n\n    RANKS_READ = 'RANKS_READ',\n    RANKS_EDIT = 'RANKS_EDIT',\n\n    ORDERS_READ = 'ORDERS_READ',\n    ORDERS_EDIT = 'ORDERS_EDIT',\n\n    COMPENSATIONS_READ = 'COMPENSATIONS_READ',\n    COMPENSATIONS_CREATE = 'COMPENSATIONS_CREATE',\n    COMPENSATIONS_EDIT = 'COMPENSATIONS_EDIT',\n    COMPENSATIONS_APPROVE = 'COMPENSATIONS_APPROVE',\n\n    BILLINGREPORTS_READ = 'BILLINGREPORTS_READ',\n    BILLINGREPORTS_CREATE = 'BILLINGREPORTS_CREATE',\n    BILLINGREPORTS_EDIT = 'BILLINGREPORTS_EDIT',\n    BILLINGREPORTS_APPROVE = 'BILLINGREPORTS_APPROVE',\n\n    DRAFT_READ = 'DRAFT_READ',\n    DRAFT_CREATE = 'DRAFT_CREATE',\n    DRAFT_EDIT = 'DRAFT_EDIT',\n\n    PAYOUTS_READ = 'PAYOUTS_READ',\n    PAYOUTS_CREATE = 'PAYOUTS_CREATE',\n    PAYOUTS_SEND = 'PAYOUTS_SEND',\n\n    LOGOFFS_READ = 'LOGOFFS_READ',\n    LOGOFFS_CREATE = 'LOGOFFS_CREATE',\n    LOGOFFS_EDIT = 'LOGOFFS_EDIT',\n    LOGOFFS_APPROVE = 'LOGOFFS_APPROVE',\n\n    ADMIN = 'ADMIN'\n}","import { gql } from \"apollo-boost\";\n\nexport const GET_MY_ROLES = gql`\n  query GET_MY_ROLES {\n    me {\n      roles\n    }\n  }\n`;\n\nexport const GET_MY_ID = gql`\n  query GET_MY_ID {\n    me {\n      id\n    }\n  }\n`;\n\nexport const GET_ME = gql`\n  query GET_ME {\n    me {\n      displayName\n      bexioContact {\n        id\n      }\n    }\n  }\n`;\n\nexport const GET_USER = gql`\n  query GET_USER($id: Int!) {\n    getUser(id: $id) {\n      id\n      displayName\n      bexioContact {\n        bexioId\n        id\n        firstname\n        lastname\n      }\n      roles\n    }\n  }\n`;\n\nexport const GET_USERS = gql`\n  query GET_USERS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n  ) {\n    getAllUsers(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        displayName\n        roles\n      }\n    }\n  }\n`;\n","import React from \"react\"\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport User from \"../entities/User\"\nimport { useQuery } from \"react-apollo\"\nimport { GET_ME } from \"../graphql/UserQueries\"\n\nexport interface HeaderProps {\n    open: boolean,\n    onClick?: () => void\n}\n\nexport default function Header(props: HeaderProps) {\n    const { loading, error, data } = useQuery<{me: User}>(GET_ME)\n\n    if (error) return null\n\n    let className = 'navibar-open'\n    if (!props.open) {\n        className = 'navibar-collapsed'\n    }\n\n    return (\n        <div id=\"header\">\n            <div id=\"header-title\" className={className}>\n                <div id=\"user\">\n                    {data?.me.displayName}\n                </div>\n            </div>\n            <div id=\"header-bars\" onClick={props.onClick}>\n                <span>\n                    <FontAwesomeIcon icon=\"bars\" />\n                </span>\n            </div>\n        </div>\n    )\n}","import React, { Component } from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { NavLink } from \"react-router-dom\";\nimport { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport { UI } from \"../actions/UIActions\";\nimport { connect } from \"react-redux\";\nimport { AnyAction } from \"redux\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { State } from \"../reducers/IndexReducer\";\nimport CurrentDevice from 'current-device'\nimport { withRouter } from 'react-router-dom'\n\nexport interface NavibarElementProps {\n    level?: number,\n    leftIcon?: IconProp,\n    rightIcon?: IconProp,\n    to?: string,\n    text: string,\n    navibar_open?: boolean,\n    onMouseUp?: (event: React.MouseEvent<HTMLElement>) => void,\n    onClose?: () => void,\n    toggleNavibar?: () => void\n}\n\nexport class _NavibarElement extends Component<NavibarElementProps> {\n    private level: number\n\n    constructor(props: NavibarElementProps) {\n        super(props)\n\n        this.onMouseUp = this.onMouseUp.bind(this)\n        this.level = this.props.level || 0\n    }\n\n    private onMouseUp(event: React.MouseEvent<HTMLElement>) {\n        if (this.level === 0 && this.props.onClose) this.props.onClose()\n        if (this.props.onMouseUp) this.props.onMouseUp(event)\n        if (CurrentDevice.mobile() && this.props.toggleNavibar && this.props.to) this.props.toggleNavibar()\n    }\n\n    private renderLinkElement(to: string, content: Array<JSX.Element>, onMouseUp: (event: React.MouseEvent<HTMLElement>) => void) {\n        if (to.match(/^(http|https):\\/\\//)) {\n            return (\n                <a href={to} className=\"navibar-element\" onMouseUp={onMouseUp} target=\"_blank\">\n                    {content}\n                </a>\n            )\n        } else {\n            return (\n                <NavLink exact to={to} className=\"navibar-element\" activeClassName=\"navibar-element-active\" onMouseUp={onMouseUp} >\n                    {content}\n                </ NavLink>\n            )\n        }\n    }\n\n    public render() {\n        let leftIcon\n        let rightIcon: JSX.Element = <p></p>\n\n        if (this.props.leftIcon) leftIcon = <FontAwesomeIcon icon={this.props.leftIcon} className=\"navibar-element-icon\" />\n        if (this.props.rightIcon) rightIcon = <FontAwesomeIcon icon={this.props.rightIcon} className=\"navibar-element-icon navibar-element-icon-right float-right\" />\n\n        if (this.props.to) {\n            return this.renderLinkElement(this.props.to, [\n                <li key={this.props.to}>\n                    {leftIcon}\n                    <p className=\"navibar-element-text\">{this.props.text}</p>\n                    {rightIcon}\n                </li>\n            ], this.onMouseUp)\n        } else {\n            return (\n                <li className=\"navibar-element\" onMouseUp={this.onMouseUp} key={this.props.text}>\n                    {leftIcon}\n                    <p className=\"navibar-element-text\">{this.props.text}</p>\n                    {rightIcon}\n                </li>\n            )\n        }\n    }\n}\n\n\nconst mapStateToProps = (state: State) => {\n    return {\n        navibar_open: state.ui.navibar_open\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<State, undefined, AnyAction>) => {\n    return {\n        onClose: () => {\n            dispatch(UI.collapseNavibarLevel())\n        },\n        toggleNavibar: () => {\n            dispatch(UI.toggleNavibar())\n        }\n    }\n}\n\n//@ts-ignore\nexport const NavibarElement = withRouter(connect(mapStateToProps, mapDispatchToProps)(_NavibarElement))","import { NavibarElement } from \"./NavibarElement\";\nimport { IconProp } from \"@fortawesome/fontawesome-svg-core\";\nimport React, { Component, Children, cloneElement, ReactElement, PropsWithChildren } from \"react\";\nimport { connect } from \"react-redux\";\nimport { State } from \"../reducers/IndexReducer\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\nimport { UI } from \"../actions/UIActions\";\n\nexport interface NavibarLevelHeaderProps {\n    leftIcon?: IconProp,\n    text: string,\n    id: string,\n    level: number,\n    open_level: string,\n    onOpen: (id: string) => void,\n    onClose: () => void\n}\n\nexport default class _NavibarLevelHeader extends Component<PropsWithChildren<NavibarLevelHeaderProps>> {\n\n    constructor(props: NavibarLevelHeaderProps) {\n        super(props)\n        this.onClick = this.onClick.bind(this)\n    }\n\n    private onClick(event: React.MouseEvent<HTMLElement>) {\n        if (this.props.open_level === this.props.id) {\n            this.props.onClose()\n        } else {\n            this.props.onOpen(this.props.id)\n        }\n    }\n\n    public render() {\n        let openClass = ''\n        let rightIcon: IconProp = 'angle-down'\n\n        if (this.props.id !== this.props.open_level) {\n            openClass = ' level-collapsed'\n            rightIcon = 'angle-left'\n        }\n\n        return (\n            <div>\n                <NavibarElement leftIcon={this.props.leftIcon} rightIcon={rightIcon} text={this.props.text} onMouseUp={this.onClick} />\n                <div key={\"levelContainer-\" + this.props.id} className={\"level-container\" + \" level-\" + this.props.level.toString() + openClass}>\n                    {\n                        Children.map(this.props.children, child => {\n                            if (child) {\n                                return cloneElement(child as ReactElement<any>, { level: this.props.level })\n                            }\n                        })\n                    }\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        open_level: state.ui.navibar_level\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<State, undefined, AnyAction>) => {\n    return {\n        onOpen: (id: string) => {\n            dispatch(UI.openNavibarLevel(id))\n        },\n        onClose: () => {\n            dispatch(UI.collapseNavibarLevel())\n        },\n    }\n}\n\n\n//@ts-ignore\nexport const NavibarLevelHeader = connect(mapStateToProps, mapDispatchToProps)(_NavibarLevelHeader)","export default class Config {\n    static apiEndpoint: string\n\n    public static loadConfig(): void {\n        if (process.env.NODE_ENV && process.env.NODE_ENV === 'development') {\n            Config.apiEndpoint = \"http://localhost:8000\"\n        } else {\n            Config.apiEndpoint = `${window.location.protocol}//${window.location.host}`\n        }\n    }\n\n    public static isModeProduction(): boolean {\n        return Config.isMode('production')\n    }\n\n    public static isModeDev(): boolean {\n        return Config.isMode('development')\n    }\n\n    private static isMode(mode: string): boolean {\n        return (process.env.NODE_ENV || 'production').toLowerCase() === mode.toLowerCase()\n    }\n}","import React from \"react\"\nimport { NavibarElement } from \"./NavibarElement\"\nimport { NavibarLevelHeader } from \"./NavibarLevelHeader\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport Config from \"../Config\"\nimport { useQuery } from \"react-apollo\"\nimport { GET_MY_ROLES } from \"../graphql/UserQueries\"\n\nexport default function Navibar(props: { open: boolean }) {\n    const { loading, error, data } = useQuery(GET_MY_ROLES)\n\n    if (loading) return <div></div>\n    if (error) return <div></div>\n    if (!data) return <div></div>\n\n    function renderElement(element: JSX.Element, roles?: Array<AuthRoles>) {\n        if (roles) {\n            for (let role of roles) {\n                if (data.me.roles.includes(role) || data.me.roles.includes(AuthRoles.ADMIN)) {\n                    return element\n                }\n            }\n        } else {\n            return element\n        }\n    }\n\n    return (\n        <div id=\"navibar\" className={(props.open) ? 'navibar-open' : 'navibar-collapsed'}>\n            <ol>\n                {renderElement(<NavibarElement to=\"/dashboard\" text=\"Dashboard\" leftIcon=\"tachometer-alt\" />, [AuthRoles.AUTHENTICATED])}\n                {renderElement(<NavibarElement to=\"/members\" text=\"Mitglieder\" leftIcon=\"users\" />, [AuthRoles.MEMBERS_READ])}\n                {renderElement(<NavibarElement to=\"/mailing-lists\" text=\"Verteiler\" leftIcon=\"mail-bulk\" />, [AuthRoles.MAILING_LISTS])}\n                {renderElement(\n                    <NavibarLevelHeader text=\"Aufgebot\" leftIcon=\"address-book\" id=\"draft\" level={1}>\n                        {renderElement(<NavibarElement to=\"/draft/collection-points\" leftIcon=\"map-marker-alt\" text=\"Abholpunkte\" />, [AuthRoles.DRAFT_READ])}\n                        {renderElement(<NavibarElement to=\"/draft/logoffs\" leftIcon=\"user-times\" text=\"Abmeldungen\" />, [AuthRoles.LOGOFFS_READ])}\n                    </NavibarLevelHeader>\n                    , [AuthRoles.DRAFT_READ, AuthRoles.LOGOFFS_READ]\n                )}\n                {renderElement(<NavibarElement to=\"/orders\" text=\"AuftrÃ¤ge\" leftIcon=\"file-alt\" />, [AuthRoles.ORDERS_READ])}\n                {renderElement(\n                    <NavibarLevelHeader text=\"Verrechnungsrapporte\" leftIcon=\"file-signature\" id=\"billingreports\" level={1}>\n                        {renderElement(<NavibarElement to=\"/billing-reports/add\" leftIcon=\"plus\" text=\"Erstellen\" />, [AuthRoles.BILLINGREPORTS_CREATE])}\n                        <NavibarElement to=\"/billing-reports\" leftIcon=\"list\" text=\"Alle\" />\n                        <NavibarElement to=\"https://vkazu.sharepoint.com/:w:/r/Vorlagen/Verrechungsrapport.docx?d=w66977fb79dfd4ab3832ca05fd6d9b8d2&csf=1&e=Spme13\" text=\"Word Vorlage\" leftIcon=\"file-word\" />\n                    </NavibarLevelHeader>\n                    , [AuthRoles.BILLINGREPORTS_READ, AuthRoles.BILLINGREPORTS_CREATE]\n                )}\n                {renderElement(<NavibarElement to=\"/compensations\" leftIcon=\"dollar-sign\" text=\"EntschÃ¤digungen\" />, [AuthRoles.COMPENSATIONS_READ])}\n                {renderElement(<NavibarElement to=\"/payouts\" text=\"Auszahlungen\" leftIcon=\"file-invoice-dollar\" />, [AuthRoles.PAYOUTS_READ])}\n                {renderElement(<NavibarElement to=\"/users\" text=\"Benutzer\" leftIcon=\"user\" />, [AuthRoles.ADMIN])}\n                <NavibarElement to=\"https://vkazu.sharepoint.com/Dokumente\" text=\"Dokumente\" leftIcon=\"external-link-alt\" />\n                <NavibarElement to={`${Config.apiEndpoint}/api/logout`} text=\"Abmelden\" leftIcon=\"power-off\" />\n            </ol>\n        </div>\n    )\n}","import React, { Component, PropsWithChildren } from \"react\"\nimport { State } from \"../reducers/IndexReducer\"\nimport { connect } from \"react-redux\"\nimport { Dispatch } from \"redux\"\nimport { UI } from \"../actions/UIActions\"\nimport Header from \"./Header\"\nimport Navibar from \"./Navibar\"\n\nexport interface PageProps {\n    title: string,\n    open: boolean,\n    openNavibar?: () => void,\n    closeNavibar?: () => void\n}\n\nexport class _Page extends Component<PropsWithChildren<PageProps>> {\n    constructor(props: PageProps) {\n        super(props)\n    }\n\n    public render() {\n        let className = 'navibar-open'\n        if (!this.props.open) {\n            className = 'navibar-collapsed'\n        }\n\n        return (\n            <div className=\"body\">\n                <Header open={this.props.open} onClick={(this.props.open) ? this.props.closeNavibar : this.props.openNavibar} />\n                <Navibar open={this.props.open} />\n                <div className={`content ${className}`}>\n                    <div className=\"content-top\">\n                        <h1 className=\"page-title\">{this.props.title}</h1>\n                    </div>\n                    <div className=\"content-body container-fluid\">\n                        {this.props.children}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state: State) => {\n    return {\n        open: state.ui.navibar_open\n    }\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch) => {\n    return {\n        closeNavibar: () => {\n            dispatch(UI.closeNavibar())\n        },\n        openNavibar: () => {\n            dispatch(UI.openNavibar())\n        }\n    }\n}\n\nexport const Page = connect(mapStateToProps, mapDispatchToProps)(_Page)","\nimport React, { Component } from \"react\";\nimport { Page } from \"../Page\";\n\nexport class Error403 extends Component {\n    public render() {\n        return (\n            <Page title=\"\">\n                <div className=\"gandalf\">\n                    <div className=\"fireball\"></div>\n                    <div className=\"skirt\"></div>\n                    <div className=\"sleeves\"></div>\n                    <div className=\"shoulders\">\n                        <div className=\"hand left\"></div>\n                        <div className=\"hand right\"></div>\n                    </div>\n                    <div className=\"head\">\n                        <div className=\"hair\"></div>\n                        <div className=\"beard\"></div>\n                    </div>\n                </div>\n                <div className=\"message\">\n                    <h1>403 - You Shall Not Pass</h1>\n                    <p>Uh oh, Gandalf is blocking the way!<br />Maybe you have a typo in the url? Or you meant to go to a different location? Like...Hobbiton?</p>\n                </div>\n            </Page>\n        )\n    }\n}\n","import React from 'react'\n\nexport default function LoadingDots() {\n    return (\n        <div className=\"d-flex justify-content-center\">\n            <div className=\"lds-ellipsis\"><div></div><div></div><div></div><div></div></div>\n        </div>\n    )\n}","import React, { Component } from 'react'\nimport LoadingDots from './LoadingDots'\n\nexport default class Loading extends Component<{ fullscreen?: boolean }> {\n    public render() {\n        return (\n            <div className={\"loading-animation \" + ((this.props.fullscreen) ? 'fullscreen' : '')}>\n                <LoadingDots />\n                {this.props.children}\n            </div>\n        )\n    }\n}","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport { AuthRoles } from '../interfaces/AuthRoles'\nimport { RouteProps } from 'react-router'\nimport { Error403 } from './Errors/403'\nimport { useQuery } from 'react-apollo'\nimport { GET_MY_ROLES } from '../graphql/UserQueries'\nimport Loading from './Loading'\n\nexport interface SecureRouteProps extends RouteProps {\n    exact: boolean,\n    path: string,\n    roles: Array<AuthRoles>\n    component: any,\n    showError?: boolean\n}\n\nexport default function SecureRoute(props: SecureRouteProps) {\n    const { loading, error, data } = useQuery(GET_MY_ROLES)\n\n    if (loading || !data) {\n        return <Loading fullscreen={true} />\n    }\n\n    if (props.showError) {\n        return <Route exact={props.exact} path={props.path} component={Error403} />\n    }\n\n    for (let role of props.roles) {\n        if (data.me.roles.includes(role) || data.me.roles.includes(AuthRoles.ADMIN)) {\n            return (\n                <Route exact={props.exact} path={props.path} component={props.component} />\n            )\n        }\n    }\n\n    if (error && error.message.indexOf('Access denied!') > -1) {\n        return (\n            <Route exact={props.exact} path={props.path} component={() => {\n                return (<Redirect push to={{\n                    pathname: \"/login\",\n                    state: {\n                        prevLocation: (props.location || { pathname: '' }).pathname\n                    },\n                }} />)\n            }} />\n        )\n    }\n\n    return <Route exact={props.exact} path={props.path} component={Error403} />\n}\n","import React, { Component } from \"react\"\n\nexport default class Panel extends Component<{ title?: string | React.ReactNode, actions?: Array<any>, className?: string, scrollable?: boolean }> {\n    public render() {\n        let header\n        let actions = this.props.actions || []\n\n        if (this.props.title) {\n            if (this.props.title && React.isValidElement(this.props.title)) {\n                header = <div className=\"panel-header d-flex align-items-center\">{this.props.title}\n                    <div className=\"panel-actions\">\n                        {actions.map(el => el)}\n                    </div>\n                </div>\n            } else {\n                header = <div className=\"panel-header\"><span className=\"panel-title\">{this.props.title}</span>\n                    <div className=\"panel-actions\">\n                        {actions.map(el => el)}\n                    </div>\n                </div>\n            }\n        } else if (this.props.actions && this.props.actions.length > 0) {\n            header = <div className=\"panel-header\">\n                <div className=\"panel-actions\">\n                    {actions.map(el => el)}\n                </div>\n            </div>\n        }\n\n        return (\n            <div className={\"panel \" + (this.props.className || '')}>\n                {header}\n                <div className={`panel-body ${(this.props.scrollable) ? 'panel-body-scrollable' : ''}`}>\n                    {this.props.children}\n                </div>\n            </div>\n        )\n    }\n}","import React, { Component } from \"react\";\n\nexport default class Column extends Component<{ className?: string }> {\n    private className = 'col'\n\n    constructor(props: { className?: string }) {\n        super(props)\n\n        if (this.props.className && this.props.className.indexOf('col') > -1) {\n            this.className = this.props.className\n        } else if (this.props.className) {\n            this.className += ' ' + this.props.className\n        }\n    }\n\n    public render() {\n        return (\n            <div className={this.className}>\n                {this.props.children}\n            </div>\n        )\n    }\n}","import React, { Component } from \"react\";\n\nexport default class Row extends Component<{ className?: string }> {\n    public render() {\n        return (\n            <div className={\"row \" + this.props.className}>\n                {this.props.children}\n            </div>\n        )\n    }\n}","import { Component } from \"react\"\nimport React from \"react\"\n\ninterface CheckboxProps {\n    onChange: (event: React.ChangeEvent<HTMLInputElement>) => void\n    checked?: boolean\n    label?: string\n    id?: string\n    required?: boolean\n    className?: string\n    editable?: boolean\n}\n\nexport default class Checkbox extends Component<CheckboxProps, { checked: boolean }> {\n    constructor(props: CheckboxProps) {\n        super(props)\n\n        this.onCheck = this.onCheck.bind(this)\n\n        this.state = { checked: this.props.checked || false }\n    }\n\n    private onCheck(event: React.ChangeEvent<HTMLInputElement>): void {\n        if (this.props.editable === true || this.props.editable === undefined) {\n            this.setState({\n                checked: !this.state.checked\n            })\n\n            this.props.onChange(event)\n        }\n    }\n\n    public componentDidUpdate(prevProps: CheckboxProps) {\n        if (this.props.hasOwnProperty('checked')) {\n            if (this.props.checked !== prevProps.checked) {\n                this.setState({\n                    checked: this.props.checked || false\n                })\n            }\n        }\n    }\n\n    public render() {\n        return (\n            <span className={this.props.className}>\n                <input id={this.props.id || ''} type=\"checkbox\" checked={this.state.checked || false} onChange={this.onCheck} required={!!this.props.required} />\n                <label htmlFor=\"food\">{this.props.label || ''}</label>\n            </span>\n        )\n    }\n}","import React, { Component } from \"react\"\nimport Checkbox from \"./Checkbox\"\nimport ReactDatePicker from \"react-datepicker\"\n\nimport \"react-datepicker/dist/react-datepicker.css\"\n\nexport interface InputProps {\n    name: string\n    value: any,\n    options?: string[],\n    type?: string,\n    editable?: boolean\n    onChange?: (name: string, value: any) => void,\n    required?: boolean\n    className?: string\n}\n\nexport default class Input extends Component<InputProps> {\n    public render() {\n        let onChange = (name: string, value: any) => { }\n        if (this.props.onChange) onChange = this.props.onChange\n        let value: Date | null\n\n        switch (this.props.type) {\n            case 'checkbox':\n                return <Checkbox checked={this.props.value} editable={this.props.editable} onChange={(event) => onChange(this.props.name, event.target.checked)} label='' required={!!this.props.required} aria-describedby={this.props.name} className={this.props.className} />\n            case 'textarea':\n                return <textarea name={this.props.name} value={this.props.value} onChange={(event) => onChange(this.props.name, event.target.value)} className={'form-entry form-control' + ((!this.props.editable) ? '-plaintext' : '') + ` ${this.props.className}`} readOnly={!this.props.editable} required={!!this.props.required} aria-describedby={this.props.name} />\n            case 'date':\n                value = this.props.value\n                if (typeof this.props.value === 'string') value = new Date(this.props.value)\n                if (this.props.value === '') value = null\n\n                if (this.props.editable) {\n                    return <ReactDatePicker name={this.props.name} onChange={(date, event) => onChange(this.props.name, date)} selected={value} className={'form-entry form-control' + ` ${this.props.className}`} allowSameDay={true} required={!!this.props.required} dateFormat=\"dd.MM.yyyy\" disabledKeyboardNavigation={true} aria-describedby={this.props.name} />\n                } else {\n                    if (value instanceof Date) return value.toLocaleDateString()\n                    return ''\n                }\n            case 'datetime':\n                value = this.props.value\n                if (typeof this.props.value === 'string') value = new Date(this.props.value)\n                if (this.props.value === '') value = null\n\n                if (this.props.editable) {\n                    return <ReactDatePicker name={this.props.name} onChange={(date, event) => onChange(this.props.name, date)} selected={value} showTimeSelect={true} className={'form-entry form-control' + ` ${this.props.className}`} required={!!this.props.required} timeFormat=\"HH:mm\" dateFormat=\"dd.MM.yyyy HH:mm\" disabledKeyboardNavigation={true} shouldCloseOnSelect={false} aria-describedby={this.props.name} />\n                } else {\n                    if (value instanceof Date) return value.toLocaleString()\n                    return ''\n                }\n            case 'select':\n                if (this.props.options) {\n                    return (<select name={this.props.name} value={this.props.value} onChange={(event) => onChange(this.props.name, event.target.value)} className={'form-entry form-control' + ((!this.props.editable) ? '-plaintext' : '') + ` ${this.props.className}`} required={!!this.props.required} aria-describedby={this.props.name}>\n                        {this.props.options.map(option => <option value={option}>{option}</option>)}\n                    </select>)\n                }\n            default:\n                return <input name={this.props.name} type={this.props.type || 'text'} value={this.props.value} onChange={(event) => onChange(this.props.name, event.target.value)} className={'form-entry form-control' + ((!this.props.editable) ? '-plaintext' : '') + ` ${this.props.className}`} readOnly={!this.props.editable} required={!!this.props.required} aria-describedby={this.props.name} />\n\n        }\n    }\n}","import React, { Component, MouseEvent } from \"react\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport StringIndexed from \"../interfaces/StringIndexed\"\nimport Checkbox from \"../components/Checkbox\"\nimport Input from \"./Input\"\n\nexport interface TableColumn {\n    text: string\n    keys: Array<string> | { [index: string]: Array<string> }\n    content?: JSX.Element\n    link?: boolean\n    linkPrefix?: string,\n    sortable?: boolean,\n    searchable?: boolean,\n    prefix?: string\n    suffix?: string\n    format?: string\n    className?: string\n    editable?: boolean,\n    type?: string,\n    options?: string[],\n    required?: boolean,\n    onChange?: (id: string | number | null, field: string, value: any, newly: boolean) => void\n}\n\nexport type FilterKey = string | { [index: string]: FilterKey }\n\nexport interface AnyFilter {\n    type: 'any'\n}\n\nexport interface StringFilter {\n    type: 'eq',\n    key: FilterKey,\n    value: string | RegExp\n}\n\nexport interface RangeFilter {\n    type: 'gt' | 'gte' | 'lt' | 'lte',\n    key: FilterKey,\n    value: number\n}\n\nexport interface CustomFilter {\n    type: 'cu',\n    filter: (obj: any) => boolean\n}\n\nexport interface TableFilter {\n    id: string,\n    displayName: string,\n    filters: Array<StringFilter | RangeFilter | AnyFilter | CustomFilter>\n}\n\nexport interface TableProps<T> {\n    columns: Array<TableColumn>,\n    data: StringIndexed<T> | Array<T>,\n    onSort?: (event: MouseEvent<HTMLTableHeaderCellElement>, clickedKeys: Array<string> | StringIndexed<any>, sortDirection: 'asc' | 'desc') => void,\n    defaultSort?: { keys: Array<string> | StringIndexed<any>, direction: 'asc' | 'desc' },\n    searchString?: string,\n    ref?: Function,\n    className?: string,\n    checkable?: boolean,\n    onCheck?: (event: React.ChangeEvent<HTMLInputElement>) => void\n    addNew?: boolean\n    filters?: TableFilter[],\n    defaultFilter?: string\n    onDataChange?: (data: StringIndexed<T>) => void\n}\n\ninterface TableState<T> {\n    sortKey: string,\n    sortDirection: 'asc' | 'desc',\n    searchableKeys: Array<string | { [index: string]: Array<string> }>,\n    filter?: string\n}\n\nexport default class Table<T extends { id: string | number }> extends Component<TableProps<T>, TableState<T>> {\n    constructor(props: TableProps<T>) {\n        super(props)\n        this.sortClick = this.sortClick.bind(this)\n        this.search = this.search.bind(this)\n        this.ref = this.ref.bind(this)\n        this.onColumnDataChange = this.onColumnDataChange.bind(this)\n\n        if (this.props.defaultSort) {\n            this.state = {\n                sortKey: this.props.defaultSort.keys.join('-'),\n                sortDirection: this.props.defaultSort.direction,\n                searchableKeys: this.genSearchKeys(this.props.columns),\n                filter: this.props.defaultFilter || (this.props.filters || [{ id: '' }])[0].id\n            }\n        } else {\n            this.state = {\n                sortKey: '',\n                sortDirection: 'asc',\n                searchableKeys: this.genSearchKeys(this.props.columns),\n                filter: this.props.defaultFilter || (this.props.filters || [{ id: '' }])[0].id\n            }\n        }\n    }\n\n    private onColumnDataChange(columnKey: string, id: string | number | null, value: any, newly = false): void {\n        const column = this.props.columns.find(column => {\n            let colKey = ''\n            if (column.keys instanceof Array) {\n                colKey = column.keys.join('-')\n            } else {\n                for (let k in column.keys) {\n                    colKey += '_' + k + '.' + column.keys[k].join('-')\n                }\n            }\n            return colKey === columnKey\n        })\n        if (column && column.onChange) {\n            column.onChange(id, columnKey, value, newly)\n\n        }\n    }\n\n    public componentDidUpdate(prevProps: TableProps<T>) {\n        if (prevProps !== this.props) {\n            this.setState({\n                searchableKeys: this.genSearchKeys(this.props.columns),\n                filter: this.props.defaultFilter\n            })\n        }\n    }\n\n    private ref(table: HTMLTableElement) {\n        if (this.props.ref) this.props.ref(table)\n    }\n\n    private goDownFilterKey(obj: any, filterKey: FilterKey): any {\n        if (typeof filterKey === 'string') return obj[filterKey]\n        return this.goDownFilterKey(obj[Object.keys(filterKey)[0]], filterKey[Object.keys(filterKey)[0]])\n    }\n\n    private filterMatcher(filter: StringFilter | RangeFilter, value: string | number): boolean {\n        switch (filter.type) {\n            case 'eq':\n                if (filter.value instanceof RegExp) return filter.value.test(value.toString())\n                return value.toString() === filter.value\n            case 'lt':\n                return value < filter.value\n            case 'lte':\n                return value <= filter.value\n            case 'gt':\n                return value > filter.value\n            case 'gte':\n                return value >= filter.value\n        }\n    }\n\n    private filter(filterId: string, data?: StringIndexed<T> | Array<T>): StringIndexed<T> | Array<T> {\n        data = data || this.props.data\n        if (data) {\n            if (this.props.filters) {\n                const filter = this.props.filters.find(filter => filter.id === filterId)\n                if (filter) {\n                    if (filter.filters.find(f => f.type === 'any')) return data\n                    if (data instanceof Array) {\n                        return data.filter(el => {\n                            let matches = true\n                            let index = 0\n                            let maxIndex = filter.filters.length\n                            while (matches && index < maxIndex) {\n                                const currentFilter = filter.filters[index] as StringFilter | RangeFilter | CustomFilter\n                                if (currentFilter.type === 'cu') {\n                                    matches = currentFilter.filter(el)\n                                } else {\n                                    const compareableData = this.goDownFilterKey(el, currentFilter.key)\n                                    matches = this.filterMatcher(currentFilter, compareableData)\n                                }\n                                index += 1\n                            }\n                            return matches\n                        })\n                    } else {\n                        const matchedKeys = Object.keys(data).filter(k => {\n                            // @ts-ignore\n                            const el = data[k]\n                            let matches = true\n                            let index = 0\n                            let maxIndex = filter.filters.length\n                            while (matches && index < maxIndex) {\n                                const currentFilter = filter.filters[index] as StringFilter | RangeFilter | CustomFilter\n                                if (currentFilter.type === 'cu') {\n                                    matches = currentFilter.filter(el)\n                                } else {\n                                    const compareableData = this.goDownFilterKey(el, currentFilter.key)\n                                    matches = this.filterMatcher(currentFilter, compareableData)\n                                }\n                                index += 1\n                            }\n                            return matches\n                        })\n                        const result: StringIndexed<T> = {}\n                        matchedKeys.forEach(key => {\n                            // @ts-ignore\n                            result[key] = data[key]\n                        })\n                        return result\n                    }\n                }\n            }\n            return data\n        }\n        return []\n    }\n\n    private sort(sortKey: string, direction: 'asc' | 'desc', data?: StringIndexed<T> | Array<T>): StringIndexed<T> {\n        let keys = this.genSortKeys(sortKey)\n        let prepared = []\n        data = data || this.props.data\n        for (let a in data) {\n            //@ts-ignore\n            let element = data[a]\n            let sortValues = []\n            for (let i in keys) {\n                //@ts-ignore\n                let key = keys[i]\n                if (key instanceof Array) {\n                    for (let b of key) {\n                        if (element[i]) {\n                            if (b.indexOf('phone') > -1) {\n                                //@ts-ignore\n                                sortValues.push(element[i][b].replace(' ', ''))\n                            } else if (element[key] instanceof Date) {\n                                sortValues.push(element[key].getTime())\n                            } else {\n                                //@ts-ignore\n                                sortValues.push(element[i][b])\n                            }\n                        }\n                    }\n                } else {\n                    if (key.indexOf('phone') > -1) {\n                        //@ts-ignore\n                        sortValues.push(element[key].replace(' ', ''))\n                    } else if (element[key] instanceof Date) {\n                        sortValues.push(element[key].getTime())\n                    } else {\n                        //@ts-ignore\n                        sortValues.push(element[key])\n                    }\n                }\n\n            }\n            prepared.push({ id: a, value: sortValues.join(' ').toLowerCase() })\n        }\n\n        prepared.sort((a, b) => {\n            let aValue, bValue\n            aValue = parseFloat(a.value)\n            bValue = parseFloat(b.value)\n            if (isNaN(aValue) || isNaN(bValue)) {\n                aValue = a.value\n                bValue = b.value\n            }\n\n            if (aValue < bValue)\n                return (direction === 'asc') ? -1 : 1\n            if (aValue > bValue)\n                return (direction === 'asc') ? 1 : -1\n            return 0\n        })\n\n        let sorted = {}\n        for (let id of prepared) {\n            //@ts-ignore\n            sorted[`_${id.id}`] = this.props.data[id.id]\n        }\n\n        return sorted\n    }\n\n    private genSortKeys(key: string): Array<string> | StringIndexed<any> {\n        let keys = [key]\n        if (key.indexOf('_') > -1) keys = key.split('_')\n\n        let finalKeys: StringIndexed<any> | Array<string> = {}\n        for (let key of keys) {\n            if (key) {\n                if (key.indexOf('.') > -1) {\n                    (finalKeys as StringIndexed<any>)[key.split('.')[0]] = key.split('.')[1].split('-')\n                } else {\n                    (finalKeys as Array<string>) = key.split('-')\n                }\n            }\n        }\n\n        return finalKeys\n    }\n\n    private sortClick(event: MouseEvent<HTMLTableHeaderCellElement>) {\n        let dataKey = (event.target as HTMLElement).dataset.key as string\n        if (!dataKey) dataKey = ((event.target as HTMLElement).parentElement as HTMLElement).dataset.key as string\n        let direction: 'asc' | 'desc' = 'asc'\n\n        if (this.state.sortKey === dataKey) {\n            if (this.state.sortDirection === 'asc') {\n                direction = 'desc'\n            } else {\n                direction = 'asc'\n            }\n        }\n\n        if (this.props.onSort) this.props.onSort(event, this.genSortKeys(dataKey), direction)\n\n        this.setState({\n            sortDirection: direction,\n            sortKey: dataKey\n        })\n    }\n\n    private genSearchKeys(columns: Array<TableColumn>): Array<string | { [index: string]: Array<string> }> {\n        let searchKeys: Array<string | { [index: string]: Array<string> }> = []\n        for (let column of columns) {\n            if (column.searchable) {\n                if (column.keys instanceof Array) {\n                    searchKeys = searchKeys.concat(column.keys)\n                } else {\n                    searchKeys.push(column.keys)\n                }\n            }\n        }\n\n        return searchKeys\n    }\n\n    private search(searchString: string, data?: StringIndexed<T> | Array<T>): StringIndexed<T> | Array<T> {\n        let result: StringIndexed<T> | Array<T> = {}\n        data = data || this.props.data\n\n        if (searchString && this.state.searchableKeys.length > 0) {\n            for (let a in data) {\n                //@ts-ignore\n                let record = data[a]\n                let searchableString = ''\n                for (let key of this.state.searchableKeys) {\n\n                    if (key instanceof Object) {\n                        for (let f in key) {\n                            for (let k of key[f]) {\n                                if (record[f] && record[f][k]) {\n                                    if (k.indexOf('phone') > -1) {\n                                        //@ts-ignore\n                                        searchableString += record[f][k].toString().replace(' ', '') + ' '\n                                    }\n                                    //@ts-ignore\n                                    searchableString += record[f][k].toString() + ' '\n                                }\n                            }\n                        }\n                    } else if (typeof key === 'string' && record.hasOwnProperty(key) && record[key] !== null) {\n                        if (key.indexOf('phone') > -1) {\n                            //@ts-ignore\n                            searchableString += record[key].toString().replace(' ', '') + ' '\n                        }\n                        //@ts-ignore\n                        searchableString += record[key].toString() + ' '\n                    }\n                }\n\n                if (searchableString.toLowerCase().indexOf(searchString.toLowerCase()) > -1 && !result.hasOwnProperty(a)) {\n                    //@ts-ignore\n                    result[a] = record\n                }\n            }\n            return result\n        }\n\n        return data\n    }\n\n    private renderColumnValues(value: any, column: TableColumn): string {\n        const dateRegex = new RegExp(/\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+/)\n        if (dateRegex.test(value) && !(value instanceof Array)) {\n            value = new Date(value)\n        }\n\n        if (typeof value === 'boolean') {\n            if (value) {\n                return 'âœ“'\n            }\n            return 'â¨¯'\n        }\n\n        if (value instanceof Array) {\n            return value.map(el => this.renderColumnValues(el, column)).join(',')\n        }\n\n        if (column.format) {\n            let param\n            let command = column.format\n            if (column.format.indexOf('(') > -1 && column.format.indexOf(')') > -1) {\n                const match = column.format.match(/(\\w+)\\((.*)\\)/)\n                if (match && match.length > 2) {\n                    command = match[1]\n                    param = match[2]\n                }\n            }\n            if (value[command]) {\n                return value[command](param)\n            }\n        }\n        return (value || '').toString()\n    }\n\n    private renderRows() {\n        let rows = []\n        let data = this.filter(this.state.filter || '')\n        data = this.search(this.props.searchString || '', data)\n        data = this.sort(this.state.sortKey, this.state.sortDirection, data)\n        if (this.props.onDataChange) this.props.onDataChange(data)\n\n        for (let id in data) {\n            //@ts-ignore\n            let dataEntry = data[id] as T & { [index: string]: any }\n            let row = []\n\n            if (this.props.checkable) {\n                row.push(<td style={{ width: '40px' }}><Checkbox onChange={this.props.onCheck || (() => { })} /></td>)\n            }\n\n            for (let column of this.props.columns) {\n                let tdKey = (column.keys instanceof Array) ? column.keys.join('-') : Object.keys(column.keys).map((el: string) => ((column.keys as StringIndexed<Array<string>>)[el].join('-'))).join('-')\n\n                if (column.content) {\n                    row.push(<td key={tdKey}>{column.content || ''}</td>)\n                } else {\n                    let content: Array<string> = []\n                    if (column.keys instanceof Array) {\n                        content = column.keys.map((key) => this.renderColumnValues(dataEntry[key], column))\n                    } else {\n                        for (let k in column.keys) {\n                            tdKey = `${tdKey}${k}`\n                            content = content.concat(column.keys[k].map((key) => {\n                                if (dataEntry.hasOwnProperty(k) && dataEntry[k]) return this.renderColumnValues(dataEntry[k][key], column)\n                                return ''\n                            }))\n                        }\n                    }\n\n                    if (column.link) {\n                        row.push(<td className={column.className || ''} key={`${dataEntry.id}-${tdKey}`}><a key={`${dataEntry.id}-${tdKey}-a`} href={((column.linkPrefix) ? column.linkPrefix : '') + content.join(' ')} target={(column.linkPrefix && (column.linkPrefix.match(/w+:/i) || []).length > 0) ? \"\" : \"_blank\"}>{((column.prefix) ? column.prefix : '') + content.join(' ') + ((column.suffix) ? column.suffix : '')}</a></td>)\n                    } else if (column.editable) {\n                        row.push(<td className={column.className || ''} key={`${dataEntry.id}-${tdKey}`}><Input name={tdKey} value={content.join(' ')} editable={true} type={column.type} onChange={(name, value) => this.onColumnDataChange(tdKey, dataEntry.id, value)} options={column.options} required={column.required} /></td>)\n                    } else {\n                        row.push(<td className={column.className || ''} key={`${dataEntry.id}-${tdKey}`}>{`${column.prefix || ''}${content.join(' ')}${column.suffix || ''}`}</td>)\n                    }\n                }\n            }\n            let trKey = id\n            if (this.props.data instanceof Array) trKey = dataEntry.id.toString()\n            rows.push(<tr key={trKey} data-key={trKey.replace(/^_/, '')}>{row}</tr>)\n        }\n\n        if (this.props.addNew) {\n            const trKey = Object.keys(this.props.data).length\n            const newRow = []\n            for (const column of this.props.columns) {\n                let tdKey = ''\n                if (column.keys instanceof Array) {\n                    tdKey = column.keys.join('-')\n                } else {\n                    tdKey = Object.keys(column.keys).join('-')\n                }\n\n\n                if (column.editable) {\n                    newRow.push(<td className={column.className || ''} key={`${trKey}-${tdKey}`}><Input name={`${trKey}-${tdKey}`} value={''} editable={true} type={column.type} onChange={(name, value) => this.onColumnDataChange(tdKey, null, value, true)} options={column.options} /></td>)\n                } else {\n                    newRow.push(<td className={column.className || ''} key={`${trKey}-${tdKey}`}></td>)\n                }\n            }\n            rows.push(<tr key={trKey}>{newRow}</tr>)\n        }\n        return rows\n    }\n\n    public render() {\n        return (\n            <div className=\"table-responsive\">\n                <table className={`table table-striped ${this.props.className || ''}`} ref={this.ref}>\n                    <thead key=\"table-head\">\n                        <tr key=\"table-head-row\">\n                            {this.props.checkable ? <th></th> : null}\n                            {this.props.columns.map((column) => {\n                                let columnKey = ''\n                                if (column.keys instanceof Array) {\n                                    columnKey = column.keys.join('-')\n                                } else {\n                                    for (let k in column.keys) {\n                                        columnKey += '_' + k + '.' + column.keys[k].join('-')\n                                    }\n                                }\n                                let sortIndicator\n                                if (columnKey === this.state.sortKey) {\n                                    if (this.state.sortDirection === 'asc') {\n                                        sortIndicator = <FontAwesomeIcon icon=\"sort-down\" className=\"float-right\" />\n                                    } else {\n                                        sortIndicator = <FontAwesomeIcon icon=\"sort-up\" className=\"float-right\" />\n                                    }\n                                }\n                                if (column.sortable) {\n                                    return <th key={columnKey} data-key={columnKey} scope=\"col\" onClick={this.sortClick} style={{ cursor: 'pointer' }}>{column.text}{sortIndicator}</th>\n                                }\n                                return <th key={columnKey} data-key={columnKey} scope=\"col\">{column.text}</th>\n                            })}\n                        </tr>\n                    </thead>\n                    <tbody key=\"table-body\">\n                        {this.renderRows()}\n                    </tbody>\n                </table>\n            </div>\n        )\n    }\n}","import { gql } from \"apollo-boost\";\n\nexport const GET_COMPENSATION = gql`\n  query GET_COMPENSATION($id: Int!) {\n    getOrderCompensation(id: $id) {\n      id\n      billingReport {\n        order {\n          id\n          documentNr\n          title\n        }\n        id\n        state\n      }\n      from\n      until\n      charge\n      member {\n        id\n        firstname\n        lastname\n      }\n      date\n      amount\n      description\n      approved\n      creator {\n        id\n        displayName\n      }\n      payout {\n        id\n      }\n      bexioBill\n      transferCompensation {\n        id\n      }\n    }\n    getCustomCompensation(id: $id) {\n      id\n      member {\n        id\n        firstname\n        lastname\n      }\n      date\n      amount\n      description\n      approved\n      creator {\n        id\n        displayName\n      }\n      payout {\n        id\n      }\n      bexioBill\n      transferCompensation {\n        id\n      }\n    }\n  }\n`;\n\nexport const GET_COMPENSATIONS_BY_CONTACT = gql`\n  query GET_COMPENSATIONS_BY_CONTACT($id: Int!) {\n    getContactCompensations(id: $id) {\n      id\n      date\n      amount\n      description\n      paied\n      approved\n    }\n  }\n`;\n\nexport const GET_COMPENSATIONS_BY_CONTACT_AND_PAYOUT = gql`\n  query GET_COMPENSATIONS_BY_CONTACT_AND_PAYOUT(\n    $memberId: Int!\n    $payoutId: Int!\n  ) {\n    getContactCompensations(id: $memberId, payoutId: $payoutId) {\n      id\n      date\n      amount\n      description\n      paied\n      approved\n    }\n  }\n`;\n\nexport const GET_COMPENSATIONS = gql`\n  query GET_COMPENSATIONS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n    $filter: Int\n  ) {\n    getAllCompensations(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n      filter: $filter\n    ) {\n      cursor\n      total\n      items {\n        id\n        member {\n          id\n          firstname\n          lastname\n        }\n        date\n        amount\n        description\n        creator {\n          id\n          displayName\n        }\n        approved\n        paied\n      }\n    }\n  }\n`;\n\nexport const GET_BASE_COMPENSATION = gql`\n  query GET_BASE_COMPENSATION($id: Int!) {\n    getCompensation(id: $id) {\n      id\n      member {\n        id\n        firstname\n        lastname\n      }\n      date\n      amount\n    }\n  }\n`;\n\nexport const GET_COMPENSATION_FILTERS = gql`\n  query GET_COMPENSATION_FILTERS {\n    getCompensationFilters {\n      id\n      displayName\n    }\n  }\n`;\n\nexport const ADD_CUSTOMCOMPENSATION = gql`\n  mutation ADD_CUSTOMCOMPENSATION($data: AddCustomCompensation!) {\n    addCustomCompensation(data: $data) {\n      id\n    }\n  }\n`;\n\nexport const ADD_ORDERCOMPENSATIONS = gql`\n  mutation ADD_ORDERCOMPENSATIONS($data: [AddOrderCompensation!]!) {\n    addOrderCompensations(data: $data) {\n      id\n    }\n  }\n`;\n\nexport const ADD_ORDERCOMPENSATION = gql`\n  mutation ADD_ORDERCOMPENSATION($data: AddOrderCompensation!) {\n    addOrderCompensation(data: $data) {\n      id\n    }\n  }\n`;\n\nexport const DELETE_COMPENSATION = gql`\n  mutation DELETE_COMPENSATION($id: Int!) {\n    deleteCompensation(id: $id) {\n      id\n    }\n  }\n`;\n\nexport const APPROVE_COMPENSATION = gql`\n  mutation APPROVE_COMPENSATION($id: Int!) {\n    approveCompensation(id: $id) {\n      id\n    }\n  }\n`;\n","import React, { Component } from \"react\"\nimport Panel from \"./Panel\"\nimport Loading from \"./Loading\"\nimport Compensation from \"../entities/Compensation\"\nimport { RouteComponentProps } from \"react-router\"\nimport Table from \"./Table\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { Query } from 'react-apollo'\nimport { GET_COMPENSATIONS_BY_CONTACT } from \"../graphql/CompensationQueries\"\n\nexport class ContactCompensation extends Component<{ contactId: number } & RouteComponentProps> {\n    constructor(props: { contactId: number } & RouteComponentProps) {\n        super(props)\n\n        this.compensationView = this.compensationView.bind(this)\n    }\n\n    public compensationView(event: React.MouseEvent<HTMLButtonElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n\n            // open a new tap when the middle button is pressed (buttonID 1)\n            if (event.button == 1) {\n                window.open((document.location as Location).origin + '/compensation/' + id)\n            } else {\n                this.props.history.push('/compensation/' + id)\n            }\n        }\n    }\n\n    public render() {\n        const actions: Array<React.ReactElement> = [<Button variant=\"success\" className=\"view\" onMouseUp={this.compensationView}><FontAwesomeIcon icon=\"eye\" /></Button>]\n\n        return (<Query<{ getContactCompensations: Compensation[] }> query={GET_COMPENSATIONS_BY_CONTACT} variables={{ id: this.props.contactId }} fetchPolicy='cache-and-network'>\n            {(result) => {\n                if (result.loading) return (\n                    <Panel title={`EntschÃ¤digungen`} scrollable={true}>\n                        <Loading />\n                    </Panel>\n                )\n                if (result.error) return null\n                if (!result.data) return null\n\n                let openCompensationsSum = 0\n                const compensations = result.data.getContactCompensations\n                openCompensationsSum = compensations.reduce((p, c) => {\n                    if (!c.paied) {\n                        return p + c.amount\n                    }\n                    return p\n                }, 0)\n\n                return (\n                    <Panel title={`EntschÃ¤digungen (Offen: ${openCompensationsSum.toFixed(2)}.-)`} scrollable={true}>\n                        <Table<Compensation>\n                            columns={[\n                                { text: 'Datum', keys: ['date'], sortable: true, format: 'toLocaleDateString' },\n                                { text: 'Beschreibung', keys: ['description'], sortable: true },\n                                { text: 'Betrag', keys: ['amount'], prefix: 'CHF ', sortable: true, format: 'toFixed(2)' },\n                                { text: 'Genehmigt', keys: ['approved'], sortable: true },\n                                { text: 'Ausbezahlt', keys: ['paied'], sortable: true },\n                                {\n                                    text: 'Actions', keys: ['_id'], content: <div className=\"btn-group\">\n                                        {actions}\n                                    </div>\n                                }\n                            ]}\n                            defaultSort={{\n                                keys: ['date'],\n                                direction: 'desc'\n                            }}\n                            data={compensations || []}\n                        />\n                    </Panel>\n                )\n            }}\n        </Query>)\n    }\n}","import { gql } from \"apollo-boost\";\n\nexport const GET_LOGOFFS_BY_CONTACT = gql`\n  query GET_LOGOFFS_BY_CONTACT($id: Int!) {\n    getContactLogoffs(id: $id) {\n      id\n      from\n      until\n      state\n    }\n  }\n`;\n\nexport const GET_LOGOFF = gql`\n  query GET_LOGOFF($id: Int!) {\n    getLogoff(id: $id) {\n      id\n      from\n      until\n      contact {\n        id\n        firstname\n        lastname\n      }\n      createdBy {\n        id\n        displayName\n      }\n      changedStateBy {\n        id\n        displayName\n      }\n      remarks\n      state\n    }\n  }\n`;\n\nexport const GET_LOGOFFS = gql`\n  query GET_LOGOFFS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n    $filter: Int\n    $customFilter: [InputPaginationFilter!]\n  ) {\n    getAllLogoffs(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n      filter: $filter\n      customFilter: $customFilter\n    ) {\n      cursor\n      total\n      items {\n        id\n        contact {\n          id\n          firstname\n          lastname\n        }\n        from\n        until\n        state\n      }\n    }\n  }\n`;\n\nexport const GET_LOGOFF_FILTERS = gql`\n  query GET_LOGOFF_FILTERS {\n    getLogoffFilters {\n      id\n      displayName\n    }\n  }\n`;\n\nexport const ADD_LOGOFFS = gql`\n  mutation ADD_LOGOFFS($data: [AddLogoff!]!, $notify: Boolean!) {\n    addLogoffs(data: $data, notify: $notify) {\n      id\n    }\n  }\n`;\n\nexport const CHANGE_LOGOFF_STATE = gql`\n  mutation CHANGE_LOGOFF_STATE(\n    $id: Int!\n    $state: LogoffState!\n    $notify: Boolean\n  ) {\n    changeLogoffState(state: $state, id: $id, notify: $notify) {\n      id\n    }\n  }\n`;\n\nexport const DELETE_LOGOFF = gql`\n  mutation DELETE_LOGOFF($id: Int!, $notify: Boolean) {\n    deleteLogoff(id: $id, notify: $notify) {\n      id\n    }\n  }\n`;\n","import React, { Component } from \"react\"\nimport Panel from \"./Panel\"\nimport Loading from \"./Loading\"\nimport Table from \"./Table\"\nimport { Button } from \"react-bootstrap\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport Logoff from \"../entities/Logoff\"\nimport { Query } from 'react-apollo'\nimport { GET_LOGOFFS_BY_CONTACT } from \"../graphql/LogoffQueries\"\nimport { RouteComponentProps } from \"react-router\"\n\n\nexport default class ContactLogoff extends Component<{ contactId: number } & RouteComponentProps> {\n    constructor(props: { contactId: number } & RouteComponentProps) {\n        super(props)\n\n        this.logoffView = this.logoffView.bind(this)\n    }\n\n    public logoffView(event: React.MouseEvent<HTMLButtonElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n\n            // open a new tap when the middle button is pressed (buttonID 1)\n            if (event.button == 1) {\n                window.open((document.location as Location).origin + '/draft/logoff/' + id)\n            } else {\n                this.props.history.push('/draft/logoff/' + id)\n            }\n        }\n    }\n\n    public render() {\n        const actions: Array<React.ReactElement> = [<Button variant=\"success\" className=\"view\" onMouseUp={this.logoffView}><FontAwesomeIcon icon=\"eye\" /></Button>]\n\n        return (\n            <Query<{ getContactLogoffs: Logoff[] }> query={GET_LOGOFFS_BY_CONTACT} variables={{ id: this.props.contactId }} fetchPolicy='cache-and-network'>\n                {(result) => {\n                    if (result.loading) return (\n                        <Panel title={`Abmeldungen`} scrollable={true}>\n                            <Loading />\n                        </Panel>\n                    )\n                    if (result.error) return null\n                    if (!result.data) return null\n\n                    return (\n                        <Panel title={`Abmeldungen`} scrollable={true}>\n                            <Table<Logoff>\n                                columns={[\n                                    { text: 'Von', keys: ['from'], sortable: true, format: 'toLocaleString' },\n                                    { text: 'Bis', keys: ['until'], sortable: true, format: 'toLocaleString' },\n                                    { text: 'Status', keys: ['state'], sortable: true },\n                                    {\n                                        text: 'Actions', keys: ['_id'], content: <div className=\"btn-group\">\n                                            {actions}\n                                        </div>\n                                    }\n                                ]}\n                                defaultSort={{\n                                    keys: ['date'],\n                                    direction: 'desc'\n                                }}\n                                data={result.data.getContactLogoffs || []}\n                            />\n                        </Panel>\n                    )\n                }}\n            </Query>\n        )\n    }\n}","import React from \"react\"\nimport { Page } from '../components/Page'\nimport Panel from \"../components/Panel\"\nimport Column from \"../components/Column\"\nimport Row from \"../components/Row\"\nimport { Link, RouteComponentProps } from \"react-router-dom\"\nimport Loading from \"../components/Loading\"\nimport { ContactCompensation } from \"../components/ContactCompensation\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport ContactLogoff from \"../components/ContactLogoffs\"\nimport { useQuery } from \"react-apollo\"\nimport { GET_ME, GET_MY_ROLES } from \"../graphql/UserQueries\"\n\nexport default function Dashboard(props: RouteComponentProps) {\n    const me = useQuery(GET_ME)\n    const roles = useQuery(GET_MY_ROLES)\n\n    if (me.loading || roles.loading) {\n        return <Loading />\n    }\n\n    function renderShortcuts() {\n        const shortcuts = []\n        if (roles.data.me.roles.includes(AuthRoles.BILLINGREPORTS_CREATE) || roles.data.me.roles.indexOf(AuthRoles.ADMIN)) {\n            shortcuts.push(<Link key=\"billingreport\" to=\"/billing-reports/add/\" className=\"btn btn-block btn-outline-primary\">Verrechnungsrapport erstellen</Link>)\n        }\n\n        if (me.data.me.bexioContact && (roles.data.me.roles.includes(AuthRoles.CONTACTS_READ) || roles.data.me.roles.indexOf(AuthRoles.ADMIN))) {\n            shortcuts.push(<Link key=\"profile\" to={`/contact/${me.data.me.bexioContact.id}`} className=\"btn btn-block btn-outline-primary\">Mein Profil</Link>)\n        }\n        return shortcuts\n    }\n\n    function renderCompensations() {\n        if (me.data.me.bexioContact) {\n            return (\n                <Column className=\"col-md-6\">\n                    <ContactCompensation contactId={me.data.me.bexioContact.id} {...props} />\n                </Column>\n            )\n        }\n    }\n\n    function renderLogoffs() {\n        if (me.data.me.bexioContact) {\n            return (\n                <Column className=\"col-md-6\">\n                    <ContactLogoff contactId={me.data.me.bexioContact.id} {...props} />\n                </Column>\n            )\n        }\n    }\n\n    return (\n        <Page title=\"Dashboard\">\n            <Row>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Shortcuts\">\n                        {renderShortcuts()}\n                    </Panel>\n                </Column>\n            </Row>\n            <Row>\n                {renderLogoffs()}\n                {renderCompensations()}\n            </Row>\n        </Page>\n    )\n}","import React, { Component, ButtonHTMLAttributes } from \"react\"\nimport * as Bootstrap from 'react-bootstrap'\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport { GET_MY_ROLES } from '../graphql/UserQueries'\nimport { Query } from 'react-apollo'\nimport User from \"../entities/User\"\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n    onClick: (event: React.MouseEvent<HTMLButtonElement>) => any\n    type?: \"button\" | \"reset\" | \"submit\",\n    active?: boolean\n    block?: boolean\n    variant?:\n    | 'primary'\n    | 'secondary'\n    | 'success'\n    | 'danger'\n    | 'warning'\n    | 'info'\n    | 'dark'\n    | 'light'\n    | 'link'\n    | 'outline-primary'\n    | 'outline-secondary'\n    | 'outline-success'\n    | 'outline-danger'\n    | 'outline-warning'\n    | 'outline-info'\n    | 'outline-dark'\n    | 'outline-light'\n    size?: 'sm' | 'lg'\n    href?: string\n    disabled?: boolean\n    loading?: boolean\n    roles?: AuthRoles[]\n};\n\ninterface ButtonState {\n    state: 'normal' | 'inProgress' | 'done'\n}\n\nexport default class Button extends Component<ButtonProps, ButtonState> {\n    constructor(props: ButtonProps) {\n        super(props)\n\n        this.onClick = this.onClick.bind(this)\n\n        this.state = {\n            state: (this.props.loading) ? 'inProgress' : 'normal'\n        }\n    }\n\n    private async onClick(event: React.MouseEvent<HTMLButtonElement>) {\n        if (this.state.state === 'normal') {\n            this.setState({ state: 'inProgress' })\n            await this.props.onClick(event)\n            this.setState({ state: 'done' })\n            setTimeout(() => {\n                this.setState({ state: 'normal' })\n            }, 1000)\n        }\n    }\n\n    public static getDerivedStateFromProps(nextProps: ButtonProps, prevState: ButtonState): ButtonState {\n        return {\n            state: (nextProps.loading) ? 'inProgress' : 'normal'\n        }\n    }\n\n\n    public render() {\n        return (\n            <Query<{ me: User }> query={GET_MY_ROLES}>\n                {(result) => {\n                    if (result.loading) return null\n                    if (result.error) return null\n                    if (!result.data) return null\n\n                    if (this.props.roles) {\n                        if (result.data.me.roles.filter(rec => (this.props.roles?.concat([AuthRoles.ADMIN]) || []).includes(rec as AuthRoles)).length === 0) {\n                            return null\n                        }\n                    }\n\n                    switch (this.state.state) {\n                        case 'normal':\n                            return (<Bootstrap.Button type={this.props.type} active={this.props.active || false} block={this.props.block || false} variant={this.props.variant} size={this.props.size} href={this.props.href} disabled={this.props.disabled} onClick={this.onClick}>{this.props.children}</Bootstrap.Button>)\n                        case 'inProgress':\n                            return (<Bootstrap.Button type={this.props.type} active={this.props.active || false} block={this.props.block || false} variant={this.props.variant} size={this.props.size} href={this.props.href} disabled={this.props.disabled} onClick={this.onClick}>\n                                <svg className=\"button-loading\" viewBox=\"0 0 128 128\">\n                                    <g>\n                                        <path d=\"M64 127.75A63.76 63.76 0 0 1 52.8 1.23v14.23a49.8 49.8 0 1 0 22.4 0V1.23A63.76 63.76 0 0 1 64 127.75z\" fillOpacity=\"1\" />\n                                        <animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 64 64\" to=\"360 64 64\" dur=\"2160ms\" repeatCount=\"indefinite\"></animateTransform>\n                                    </g>\n                                </svg>\n                            </Bootstrap.Button >)\n                        case 'done':\n                            return (<Bootstrap.Button type={this.props.type} active={this.props.active || false} block={this.props.block || false} variant={this.props.variant} size={this.props.size} href={this.props.href} disabled={this.props.disabled} onClick={this.onClick}><FontAwesomeIcon icon=\"check-circle\" /></Bootstrap.Button>)\n                        default:\n                            return (<Bootstrap.Button type={this.props.type} active={this.props.active || false} block={this.props.block || false} variant={this.props.variant} size={this.props.size} href={this.props.href} disabled={this.props.disabled} onClick={this.onClick}>{this.props.children}</Bootstrap.Button>)\n                    }\n                }}\n            </Query>\n        )\n    }\n}","export interface PaginationResponse<T> {\n  cursor: number;\n  hasMore: boolean;\n  total: number;\n  items: T[];\n}\n\nexport interface PaginationArgs {\n\tcursor: number\n\tlimit?: number\n\tsortBy?: string\n\tsortDirection?: PaginationSortDirections\n}\n\nexport enum PaginationSortDirections {\n\tASC = 'ASC',\n\tDESC = 'DESC'\n}\n","import { Component } from \"react\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport React from \"react\"\nimport { IconProp } from \"@fortawesome/fontawesome-svg-core\"\nimport { Link } from \"react-router-dom\"\nimport Button from './Button'\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\n\nexport interface ActionProps {\n    icon: IconProp,\n    to?: string,\n    onClick?: (event: React.MouseEvent<HTMLButtonElement>) => Promise<any>,\n    state?: any\n    disabled?: boolean\n    loading?: boolean\n    roles?: AuthRoles[]\n}\n\nexport default class Action extends Component<ActionProps> {\n    constructor(props: ActionProps) {\n        super(props)\n\n        this.onClick = this.onClick.bind(this)\n    }\n\n    private async onClick(event: React.MouseEvent<HTMLButtonElement>) {\n        event.preventDefault()\n        if (this.props.onClick) await this.props.onClick(event)\n    }\n\n    public render() {\n        if (this.props.to && !this.props.disabled) {\n            return (\n                <Link to={{\n                    pathname: this.props.to,\n                    state: this.props.state || {}\n                }}\n                    className=\"action-button btn btn-outline-dark\"\n                >\n                    <FontAwesomeIcon icon={this.props.icon} />\n                </Link>\n            )\n        }\n\n        return (\n            <Button onClick={this.onClick} variant=\"outline-dark\" className=\"action-button\" disabled={this.props.disabled || false} loading={this.props.loading || false} roles={this.props.roles}>\n                <FontAwesomeIcon icon={this.props.icon} />\n            </Button>\n        )\n    }\n}","import React, { useState, useEffect } from 'react'\nimport { Page } from \"./Page\"\nimport Row from \"./Row\"\nimport Column from \"./Column\"\nimport Panel from \"./Panel\"\nimport { ButtonToolbar, ButtonGroup, Button } from \"react-bootstrap\"\nimport GraphQLTable, { GraphQLTableColumn } from './GraphQLTable'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { DocumentNode } from 'graphql'\nimport { PaginationSortDirections } from '../graphql/Interfaces'\nimport Base from '../entities/Base'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { useQuery } from 'react-apollo'\nimport LoadingDots from './LoadingDots'\n\nexport enum PaginationFilterOperator {\n\t'=' = '=',\n\t'>=' = '>=',\n\t'<=' = '<=',\n\t'<' = '<',\n\t'>' = '>',\n}\n\nexport interface InputPaginationFilter {\n    field: string\n    operator: PaginationFilterOperator\n    value: string | number | boolean | Date | undefined | null\n}\n\nexport interface CustomFilter {\n    components: JSX.Element,\n    displayName: string,\n    getFilter: () => InputPaginationFilter[]\n}\n\nexport interface GraphQLDataListProps<T> extends React.Props<any> {\n    title: string,\n    panelActions?: JSX.Element[]\n    additionalTitleStuff?: JSX.Element[],\n    tableColumns: GraphQLTableColumn[],\n    viewLocation: string,\n    rowActions?: JSX.Element[],\n    query: DocumentNode\n    filterQuery?: DocumentNode\n    defaultSortBy?: string,\n    defaultSortDirection?: PaginationSortDirections\n    pollInterval?: number\n    searchable?: boolean\n    defaultFilter?: number\n    customFilters?: CustomFilter[]\n    selectedCustomFilter?: Array<InputPaginationFilter>\n    forceRerender?: Array<any>\n}\n\nexport default function GraphQLDataList<T extends Base>(props: GraphQLDataListProps<T> & RouteComponentProps) {\n    const [searchString, setSearchString] = useState<string>()\n    if (props.filterQuery || props.customFilters) {\n        var [filter, setFilter] = useState<number | undefined>(props.defaultFilter)\n        var [customFilter, setCustomFilter] = useState<Array<InputPaginationFilter>>([])\n        if (props.filterQuery) {\n            var filters = useQuery<{ [index: string]: [{ id: number, displayName: string }] }>(props.filterQuery, { fetchPolicy: 'cache-and-network' })\n        }\n    }\n\n    useEffect(() => {\n        if (filters && filters.data && props.customFilters) {\n            const fs = filters.data[Object.keys(filters.data)[0]]\n            if (fs && filter && !fs.find(({ id }) => id === filter)) {\n                const f = props?.customFilters[filter - Object.keys(fs).length]\n                if (f) {\n                    setCustomFilter(f.getFilter())\n                }\n            } else {\n                setCustomFilter([])\n            }\n        }\n    }, [props.forceRerender, filter])\n\n    function elementView(event: React.MouseEvent<HTMLButtonElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n\n            // open a new tap when the middle button is pressed (buttonID 1)\n            if (event.button == 1) {\n                window.open((document.location as Location).origin + props.viewLocation + id)\n            } else {\n                props.history.push(props.viewLocation + id)\n            }\n        }\n    }\n\n    function onFilterClick(id: number) {\n        if (id === filter) {\n            setFilter(undefined)\n        } else {\n            setFilter(id)\n        }\n    }\n\n    function renderFilters() {\n        const toRenderFilters: JSX.Element[] = []\n        let filterAdditions: JSX.Element | undefined = undefined\n        if (filters && !filters.loading && filters.data) {\n            const fs = filters.data[Object.keys(filters.data)[0]]\n            fs.forEach((f) => {\n                toRenderFilters.push(\n                    <Button variant='outline-secondary' active={f.id === filter} onClick={() => onFilterClick(f?.id)}>{f.displayName}</Button>\n                )\n            })\n        }\n\n        if (filters && !filters.loading && !filters.data) {\n            filters.refetch()\n            return (\n                <ButtonGroup>\n                    <LoadingDots />\n                </ButtonGroup>\n            )\n        }\n\n        if (filters && filters.loading) {\n            return (\n                <ButtonGroup>\n                    <LoadingDots />\n                </ButtonGroup>\n            )\n        }\n\n        if (props.customFilters) {\n            props.customFilters.forEach(f => {\n                const id = toRenderFilters.length\n                toRenderFilters.push(\n                    <Button variant='outline-secondary' active={id === filter} onClick={() => { onFilterClick(id) }}>{f.displayName}</Button>\n                )\n\n                if (id === filter) {\n                    filterAdditions = f.components\n                }\n            })\n        }\n\n        return (\n            <>\n                <ButtonGroup>\n                    {toRenderFilters}\n                </ButtonGroup>\n                {filterAdditions}\n            </>)\n    }\n\n    return (\n        <Page title={props.title}>\n            <Row>\n                <Column>\n                    <Panel\n                        actions={props.panelActions || []}\n                        title={\n                            <ButtonToolbar className=\"justify-content-between align-items-center\">\n                                {renderFilters()}\n                                {props.additionalTitleStuff || []}\n                                {props.searchable &&\n                                    <input id=\"search\" value={searchString} placeholder=\"Search...\" className=\"form-control form-control-sm\" onChange={(event) => setSearchString(event.target.value)} />\n                                }\n                            </ButtonToolbar>\n                        }>\n                        <GraphQLTable<T>\n                            columns={props.tableColumns.concat([\n                                {\n                                    text: 'Actions', keys: ['id'], content:\n                                        <div className=\"btn-group\">\n                                            <button className=\"btn btn-success view\" onMouseUp={elementView}><FontAwesomeIcon icon=\"eye\" /></button>\n                                            {props.rowActions}\n                                        </div>\n                                }\n                            ])}\n                            query={props.query}\n                            defaultSortBy={props.defaultSortBy}\n                            defaultSortDirection={props.defaultSortDirection}\n                            pollInterval={props.pollInterval}\n                            queryVariables={{ searchString, filter, customFilter }}\n                        />\n                    </Panel>\n                </Column>\n            </Row>\n            {props.children}\n        </Page>\n    )\n}","import React, { MouseEvent, useEffect } from 'react'\nimport { DocumentNode } from \"graphql\"\nimport { useQuery } from \"@apollo/react-hooks\"\nimport { useState } from \"react\"\nimport Loading from \"./Loading\"\nimport { PaginationResponse, PaginationArgs, PaginationSortDirections } from '../graphql/Interfaces'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport Checkbox from './Checkbox'\nimport StringIndexed from '../interfaces/StringIndexed'\nimport Base from '../entities/Base'\nimport { Pagination } from 'react-bootstrap'\nimport Select from 'react-select'\nimport { InputPaginationFilter } from './GraphQLDataList'\n\nexport interface GraphQLTableColumn {\n    text: string\n    keys: Array<string> | { [index: string]: Array<string> }\n    content?: JSX.Element\n    link?: boolean\n    linkPrefix?: string,\n    sortKey?: string,\n    sortable?: boolean,\n    prefix?: string\n    suffix?: string\n    format?: string\n    className?: string\n    type?: string,\n    options?: string[],\n    required?: boolean,\n}\n\nexport interface GraphQLTableProps<T> {\n    query: DocumentNode\n    queryVariables?: any\n    className?: string,\n    checkable?: boolean\n    columns: Array<GraphQLTableColumn>\n    onDataChange?: (data: T[]) => void\n    onCheck?: (event: React.ChangeEvent<HTMLInputElement>) => void\n    defaultSortBy?: string,\n    defaultSortDirection?: PaginationSortDirections\n    pollInterval?: number\n}\n\nexport default function GraphQLTable<T extends Base & { [index: string]: any }>(props: GraphQLTableProps<T>) {\n    const [limit, setLimit] = useState(30)\n    const [cursor, setCursor] = useState(0)\n    const [sortBy, setSortBy] = useState((props.defaultSortBy as string) || undefined)\n    const [sortDirection, setSortDirection] = useState(props.defaultSortDirection || PaginationSortDirections.ASC)\n    const { loading, error, data } = useQuery<{ [index: string]: PaginationResponse<T> }, PaginationArgs>(props.query, { variables: { limit, cursor, sortBy, sortDirection, ...props.queryVariables }, pollInterval: props.pollInterval || 5000, fetchPolicy: 'cache-and-network' })\n    useEffect(() => { setCursor(0) }, [props.queryVariables?.searchString, props.queryVariables?.filter])\n\n    if (loading && !props.queryVariables?.searchString && !data) return <Loading />\n    if (!data) return <Loading />\n\n    const dataSet: PaginationResponse<T> = data[Object.keys(data)[0]]\n\n    function sortClick(event: MouseEvent<HTMLTableHeaderCellElement>) {\n        let dataKey = (event.target as HTMLElement).dataset.key as string\n        if (!dataKey) dataKey = ((event.target as HTMLElement).parentElement as HTMLElement).dataset.key as string\n\n        let sortKey = (event.target as HTMLElement).dataset.sortkey as string\n        if (!sortKey) sortKey = ((event.target as HTMLElement).parentElement as HTMLElement).dataset.sortkey as string\n\n        if (sortKey) dataKey = sortKey\n\n        if (sortBy === dataKey) {\n            if (sortDirection === PaginationSortDirections.ASC) {\n                setSortDirection(PaginationSortDirections.DESC)\n            } else {\n                setSortDirection(PaginationSortDirections.ASC)\n            }\n        } else {\n            setSortBy(dataKey.split('-')[0])\n            setSortDirection(PaginationSortDirections.ASC)\n        }\n    }\n\n    function renderColumnValues(value: any, column: GraphQLTableColumn): string {\n        const dateRegex = new RegExp(/\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+/)\n        if (dateRegex.test(value) && !(value instanceof Array)) {\n            value = new Date(value)\n        }\n\n        if (typeof value === 'boolean') {\n            if (value) {\n                return 'âœ“'\n            }\n            return 'â¨¯'\n        }\n\n        if (value instanceof Array) {\n            return value.map(el => renderColumnValues(el, column)).join(',')\n        }\n\n        if (column.format) {\n            let param\n            let command = column.format\n            if (column.format.indexOf('(') > -1 && column.format.indexOf(')') > -1) {\n                const match = column.format.match(/(\\w+)\\((.*)\\)/)\n                if (match && match.length > 2) {\n                    command = match[1]\n                    param = match[2]\n                }\n            }\n            if (value[command]) {\n                return value[command](param)\n            }\n        }\n        return (value || '').toString()\n    }\n\n    function renderRows(data: T[]) {\n        let rows = []\n        if (props.onDataChange) props.onDataChange(data)\n\n        for (let record of data) {\n            let row = []\n\n            if (props.checkable) {\n                row.push(<td style={{ width: '40px' }}><Checkbox onChange={props.onCheck || (() => { })} /></td>)\n            }\n\n            for (let column of props.columns) {\n                let tdKey = (column.keys instanceof Array) ? column.keys.join('-') : Object.keys(column.keys).map((el: string) => ((column.keys as StringIndexed<Array<string>>)[el].join('-'))).join('-')\n\n                if (column.content) {\n                    row.push(<td key={tdKey}>{column.content || ''}</td>)\n                } else {\n                    let content: Array<string> = []\n                    if (column.keys instanceof Array) {\n                        content = column.keys.map((key) => renderColumnValues(record[key], column))\n                    } else {\n                        for (let k in column.keys) {\n                            tdKey = `${tdKey}${k}`\n                            content = content.concat(column.keys[k].map((key) => {\n                                if (record.hasOwnProperty(k) && record[k]) return renderColumnValues(record[k][key], column)\n                                return ''\n                            }))\n                        }\n                    }\n\n                    if (column.link) {\n                        row.push(<td className={column.className || ''} key={`${record.id}-${tdKey}`}><a key={`${record.id}-${tdKey}-a`} href={((column.linkPrefix) ? column.linkPrefix : '') + content.join(' ')} target={(column.linkPrefix && (column.linkPrefix.match(/w+:/i) || []).length > 0) ? \"\" : \"_blank\"}>{((column.prefix) ? column.prefix : '') + content.join(' ') + ((column.suffix) ? column.suffix : '')}</a></td>)\n                    } else {\n                        row.push(<td className={column.className || ''} key={`${record.id}-${tdKey}`}>{`${column.prefix || ''}${content.join(' ')}${column.suffix || ''}`}</td>)\n                    }\n                }\n            }\n\n            rows.push(<tr key={record.id} data-key={record.id}>{row}</tr>)\n        }\n\n        return rows\n    }\n\n    function renderPaginationItems(total: number, limit: number, cursor: number) {\n        const items = []\n        for (let page = 0; page * limit < total; page++) {\n            if ((page >= cursor / limit + 10 || page <= cursor / limit - 10)) {\n                if (items.length === 0 || items.slice(-1)[0].type !== Pagination.Ellipsis) {\n                    items.push(<Pagination.Ellipsis />)\n                }\n            } else {\n                items.push(<Pagination.Item key={page} active={page * limit === cursor} onClick={(event: React.MouseEvent<HTMLElement>) => { setCursor(page * limit) }}>{page + 1}</Pagination.Item>)\n            }\n        }\n        return items\n    }\n\n    return (\n        <div className=\"table-responsive\">\n            <table className={`table table-striped ${props.className || ''}`}>\n                <thead key=\"table-head\">\n                    <tr key=\"table-head-row\">\n                        {props.checkable ? <th></th> : null}\n                        {props.columns.map((column) => {\n                            let columnKey = ''\n                            if (column.keys instanceof Array) {\n                                columnKey = column.keys.join('-')\n                            } else {\n                                for (let k in column.keys) {\n                                    columnKey += '_' + k + '.' + column.keys[k].join('-')\n                                }\n                            }\n                            let sortIndicator\n                            if (columnKey === sortBy || column.sortKey === sortBy) {\n                                if (sortDirection === PaginationSortDirections.ASC) {\n                                    sortIndicator = <FontAwesomeIcon icon=\"sort-down\" className=\"float-right\" />\n                                } else {\n                                    sortIndicator = <FontAwesomeIcon icon=\"sort-up\" className=\"float-right\" />\n                                }\n                            }\n                            if (column.sortable) {\n                                return <th key={columnKey} data-key={columnKey} data-sortKey={column.sortKey} scope=\"col\" onClick={sortClick} style={{ cursor: 'pointer' }}>{column.text}{sortIndicator}</th>\n                            }\n                            return <th key={columnKey} data-key={columnKey} scope=\"col\">{column.text}</th>\n                        })}\n                    </tr>\n                </thead>\n                <tbody key=\"table-body\">\n                    {renderRows(dataSet.items || [])}\n                </tbody>\n            </table>\n            <div className=\"d-flex justify-content-between\">\n                <div className=\"w-25\">\n                    {Math.max(cursor, 1)} - {Math.min(cursor + limit, dataSet.total)} von {dataSet.total}\n                </div>\n                <Pagination>\n                    <Pagination.Prev key='prev' onClick={(event: React.MouseEvent<HTMLElement>) => { setCursor(cursor - limit) }} disabled={cursor === 0} />\n                    {renderPaginationItems(dataSet.total, limit, cursor)}\n                    <Pagination.Next key='next' onClick={(event: React.MouseEvent<HTMLElement>) => { setCursor(cursor + limit) }} disabled={cursor + limit >= dataSet.total} />\n                </Pagination>\n                <Select\n                    className='w-25'\n                    options={[{ value: 10, label: '10 Items' }, { value: 30, label: '30 Items' }, { value: 90, label: '90 Items' }]}\n                    value={{ value: limit, label: `${limit} Items` }}\n                    onChange={(opt) => {\n                        if (opt) {\n                            setCursor(0)\n                            setLimit((opt as {\n                                value: number\n                                label: string\n                            }).value)\n                        }\n                    }}\n                    isClearable={false}\n                />\n            </div>\n        </div>\n    )\n}","import { gql } from \"apollo-boost\";\n\nexport const GET_ALL_MEMBERS_SELECT = gql`\n  query GET_ALL_MEMBERS_SELECT {\n    getMembersAll {\n      id\n      firstname\n      lastname\n    }\n  }\n`;\n\nexport const GET_ALL_MEMBERS = gql`\n  query GET_ALL_MEMBERS {\n    getMembersAll {\n      id\n      firstname\n      lastname\n      mail\n      mailSecond\n      moreMails\n      contactGroups {\n        id\n        bexioId\n      }\n    }\n  }\n`;\n\nexport const GET_MAILLING = gql`\n  query GET_MAILLING {\n    getMembersAll {\n      mail\n      mailSecond\n      moreMails\n      contactGroups {\n        id\n        bexioId\n      }\n    }\n  }\n`;\n\nexport const GET_MEMBERS = gql`\n  query GET_MEMBERS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n    $filter: Int\n  ) {\n    getMembers(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n      filter: $filter\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        firstname\n        lastname\n        rank\n        functions\n        address\n        postcode\n        city\n        collectionPoint {\n          id\n          address\n          postcode\n          city\n        }\n        phoneFixed\n        phoneFixedSecond\n        phoneMobile\n        mail\n        mailSecond\n      }\n    }\n  }\n`;\n\nexport const GET_CONTACT = gql`\n  query GET_CONTACT($id: Int!) {\n    getContact(id: $id) {\n      id\n      contactGroups {\n        id\n        name\n      }\n      address\n      postcode\n      city\n      firstname\n      lastname\n      rank\n      birthday\n      collectionPoint {\n        id\n        name\n        address\n        postcode\n        city\n      }\n      phoneFixed\n      phoneFixedSecond\n      phoneMobile\n      mail\n      mailSecond\n      moreMails\n      entryDate\n      exitDate\n      remarks\n      bexioId\n      bankName\n      iban\n      accountHolder\n      rank\n    }\n  }\n`;\n\nexport const GET_MEMBERS_FILTERS = gql`\n  query GET_MEMBERS_FILTERS {\n    getContactFilters {\n      id\n      displayName\n    }\n  }\n`;\n\nexport const EDIT_CONTACT = gql`\n  mutation EDIT_CONTACT($data: EditContact!) {\n    editContact(data: $data) {\n      id\n    }\n  }\n`;\n","import Action from \"../components/Action\"\nimport React from \"react\"\nimport Config from \"../Config\"\nimport GraphQLDataList from \"../components/GraphQLDataList\"\nimport { GET_MEMBERS, GET_MEMBERS_FILTERS } from \"../graphql/ContactQueries\"\nimport { RouteComponentProps } from \"react-router-dom\"\nimport Contact from \"../entities/Contact\"\n\nexport default function Members(props: RouteComponentProps) {\n    return <GraphQLDataList<Contact>\n        query={GET_MEMBERS}\n        filterQuery={GET_MEMBERS_FILTERS}\n        title='Mitglieder'\n        viewLocation='/contact/'\n        tableColumns={[\n            { text: 'Nachname', keys: ['lastname'], sortable: true },\n            { text: 'Vorname', keys: ['firstname'], sortable: true },\n            { text: 'Grad', keys: ['rank'], sortable: false },\n            { text: 'Funktionen', keys: ['functions'], sortable: false },\n            { text: 'Addresse', keys: ['address', 'postcode', 'city'], link: true, linkPrefix: 'https://www.google.com/maps/search/', sortKey: 'address', sortable: true },\n            { text: 'Abholpunkt', keys: { collectionPoint: ['address', 'postcode', 'city'] }, link: true, linkPrefix: 'https://www.google.com/maps/search/', sortable: false },\n            { text: 'Festnetz', keys: ['phoneFixed'], link: true, linkPrefix: 'tel:', sortable: true },\n            { text: 'Festnetz 2', keys: ['phoneFixedSecond'], link: true, linkPrefix: 'tel:', sortable: true },\n            { text: 'Mobile', keys: ['phoneMobile'], link: true, linkPrefix: 'tel:', sortable: true },\n            { text: 'E-Mail', keys: ['mail'], link: true, linkPrefix: 'mailto:', sortable: true },\n            { text: 'E-Mail 2', keys: ['mailSecond'], link: true, linkPrefix: 'mailto:', sortable: true },\n        ]}\n        panelActions={[\n            <Action key=\"pdf-export\" onClick={async () => { window.open(`${Config.apiEndpoint}/api/members/pdf`) }} icon='file-pdf' />\n        ]}\n        defaultSortBy='lastname'\n        pollInterval={10000}\n        searchable={true}\n        {...props}\n    ></GraphQLDataList>\n}","import React, { Component } from \"react\"\nimport Row from \"./Row\"\nimport Column from \"./Column\"\nimport Input from \"./Input\"\n\ninterface FormEntryProps {\n    id: string\n    title: string\n    editable?: boolean\n    value?: any\n    type?: string\n    onChange?: (name: string, value: any) => void\n}\n\nexport default class FormEntry extends Component<FormEntryProps> {\n    public renderChildren() {\n        if (typeof this.props.value !== 'undefined') {\n            return <Input name={this.props.id} editable={this.props.editable} onChange={this.props.onChange} type={this.props.type} value={this.props.value} />\n        }\n\n        return this.props.children\n    }\n\n    public render() {\n        return (\n            <Row>\n                <Column className=\"col-6\">\n                    {this.props.title}\n                </Column>\n                <Column className=\"col-6\">\n                    {this.renderChildren()}\n                </Column>\n            </Row>\n        )\n    }\n}","import { gql } from \"apollo-boost\";\n\nexport const GET_COLLECTIONPOINTS = gql`\n  query GET_COLLECTIONPOINTS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n  ) {\n    getAllCollectionPoints(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        name\n        address\n        city\n        postcode\n      }\n    }\n  }\n`;\n\nexport const GET_ALL_COLLECITONPOINTS = gql`\n  query GET_ALL_COLLECITONPOINTS {\n    getCollectionPoints {\n      id\n      name\n      address\n      city\n      postcode\n    }\n  }\n`;\n\nexport const ADD_COLLECTIONPOINT = gql`\n  mutation ADD_COLLECTIONPOINT($data: AddCollectionPoint!) {\n    addCollectionPoint(data: $data) {\n      id\n    }\n  }\n`;\n","import React, { useState, useEffect } from \"react\"\nimport Select from 'react-select'\nimport { ValueType } from \"react-select/lib/types\"\nimport { useQuery } from \"react-apollo\"\nimport CollectionPoint from \"../entities/CollectionPoint\"\nimport { GET_ALL_COLLECITONPOINTS } from \"../graphql/CollectionPointQueries\"\nimport LoadingDots from \"./LoadingDots\"\n\n\ninterface CollectionPointSelectProps {\n    defaultValue?: Array<CollectionPoint>,\n    isMulti?: boolean\n    onChange: Function,\n    ref?: Function,\n    required?: boolean\n}\n\nexport default function CollectionPointSelect(props: CollectionPointSelectProps) {\n    const { loading, error, data } = useQuery<{ getCollectionPoints: CollectionPoint[] }>(GET_ALL_COLLECITONPOINTS)\n\n    if (loading) return <LoadingDots />\n    if (error) return null\n    if (!data) return null\n    const collectionPoints = data.getCollectionPoints\n\n    const valueProps = []\n    if (props.defaultValue instanceof Array) {\n        for (let collectionPoint of props.defaultValue) {\n            valueProps.push({\n                value: collectionPoint.id.toString(),\n                label: `(${collectionPoint.name}) ${collectionPoint.address}, ${collectionPoint.postcode} ${collectionPoint.city}`,\n            })\n        }\n    }\n\n\n    function prepareOptions(data: CollectionPoint[]) {\n        let options = []\n        for (const collectionPoint of data) {\n            options.push({\n                value: collectionPoint.id.toString(),\n                label: `(${collectionPoint.name}) ${collectionPoint.address}, ${collectionPoint.postcode} ${collectionPoint.city}`,\n            })\n        }\n\n        return options\n    }\n\n    function onChange(opt: ValueType<{ label: string, value: string }>) {\n        if (opt) {\n            let ops: Array<{ label: string, value: string }> = [opt as { label: string, value: string }]\n            if (props.isMulti) {\n                ops = opt as Array<{ label: string, value: string }>\n            }\n            if (props.onChange) props.onChange(collectionPoints.find(r => r.id === parseInt((opt as { label: string, value: string }).value)))\n        }\n    }\n\n    return (<Select\n        isClearable={true}\n        options={prepareOptions(collectionPoints || [])}\n        backspaceRemovesValue={true}\n        hideSelectedOptions={true}\n        openMenuOnFocus={true}\n        isMulti={props.isMulti || false}\n        onChange={onChange}\n        value={valueProps}\n        required={!!props.required}        \n    />)\n}","import React, { useState } from \"react\"\nimport { Page } from \"../components/Page\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport FormEntry from \"../components/FormEntry\"\nimport Loading from \"../components/Loading\"\nimport * as ContactEntity from \"../entities/Contact\"\nimport ContactGroup from \"../entities/ContactGroup\"\nimport User from \"../entities/User\"\nimport Action from \"../components/Action\"\nimport CollectionPoint from \"../entities/CollectionPoint\"\nimport CollectionPointSelect from \"../components/CollectionPointSelect\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport { RouteComponentProps } from \"react-router\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { Button } from \"react-bootstrap\"\nimport { ContactCompensation } from \"../components/ContactCompensation\"\nimport ContactLogoff from \"../components/ContactLogoffs\"\nimport { useQuery, useMutation } from \"react-apollo\"\nimport { GET_CONTACT, EDIT_CONTACT } from \"../graphql/ContactQueries\"\nimport { GET_MY_ROLES } from \"../graphql/UserQueries\"\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\nimport { Error403 } from \"../components/Errors/403\"\n\nexport default function Contact(props: RouteComponentProps<{ id: string }>) {\n    const [editable, setEditable] = useState(false)\n    const [editContactMutation] = useMutation(EDIT_CONTACT)\n    const myroles = useQuery<{ me: User }>(GET_MY_ROLES)\n    const { loading, error, data, refetch } = useQuery<{ getContact: ContactEntity.default }>(GET_CONTACT, { variables: { id: parseInt(props.match.params.id) } })\n    const [contact, setContact] = useState<ContactEntity.default>(data?.getContact as ContactEntity.default)\n    const dispatch = useDispatch()\n\n    if (loading) {\n        return (\n            <Page title=\"Kontakt\">\n                <Loading />\n            </Page>\n        )\n    }\n\n    if (!contact && data?.getContact) {\n        setContact(data?.getContact as ContactEntity.default)\n        return (\n            <Page title=\"Kontakt\">\n                <Loading />\n            </Page>\n        )\n    }\n\n    if ((error?.message && error?.message.indexOf('Access denied!') > -1) || !contact) {\n        return <Error403 />\n    }\n\n    function onSelectChange(state: string): (opts: CollectionPoint) => void {\n        return (opts: CollectionPoint) => {\n            onInputChange(state, opts)\n        }\n    }\n\n    function onInputChange(name: string, value: any) {\n        const clone = { ...contact }\n        // @ts-ignore\n        clone[name] = value\n        setContact(clone)\n    }\n\n    function onMoreMailsChange(event: React.ChangeEvent<HTMLInputElement>) {\n        const target = event.target\n        const value = target.value\n        const clone = [...(contact.moreMails || [])]\n        clone[parseInt(target.name)] = value\n        onInputChange('moreMails', clone)\n    }\n\n    async function removeMoreMailEntry(index: number) {\n        onInputChange('moreMails', [...(contact.moreMails || []).slice(0, index), ...(contact.moreMails || []).slice(index + 1)])\n    }\n\n    async function onSave(): Promise<boolean> {\n        const result = await editContactMutation({\n            variables: {\n                data: {\n                    id: contact.id,\n                    collectionPointId: (contact.collectionPoint) ? contact.collectionPoint.id : undefined,\n                    entryDate: contact.entryDate,\n                    exitDate: contact.exitDate,\n                    bankName: contact.bankName,\n                    iban: contact.iban,\n                    accountHolder: contact.accountHolder,\n                    moreMails: contact.moreMails\n                }\n            }\n        })\n        if (result.errors) {\n            return false\n        }\n        dispatch(UI.showSuccess('Gespeichert'))\n        setEditable(false)\n        setContact((await refetch()).data.getContact)\n        return true\n    }\n\n    async function onAbort() {\n        setContact(data?.getContact as ContactEntity.default)\n        setEditable(false)\n        setContact((await refetch()).data.getContact)\n    }\n\n    function renderPanelActions() {\n        if (editable) {\n            return [\n                <Action icon=\"save\" key=\"save\" onClick={onSave} />,\n                <Action icon=\"times\" key=\"cancel\" onClick={onAbort} />\n            ]\n        }\n\n        return [<Action icon=\"pencil-alt\" key=\"edit\" onClick={async () => { setEditable(true) }} roles={[AuthRoles.CONTACTS_EDIT, AuthRoles.MEMBERS_EDIT]} />]\n    }\n\n    function renderCollectionPoint() {\n        if (editable) {\n            return <CollectionPointSelect isMulti={false} onChange={onSelectChange('collectionPoint')} defaultValue={(contact.collectionPoint) ? [contact.collectionPoint] : []} />\n        }\n        if (contact.collectionPoint &&\n            contact.collectionPoint.hasOwnProperty('name') &&\n            contact.collectionPoint.hasOwnProperty('address') &&\n            contact.collectionPoint.hasOwnProperty('postcode') &&\n            contact.collectionPoint.hasOwnProperty('city')) {\n            const address = `${contact.collectionPoint.address}, ${contact.collectionPoint.postcode} ${contact.collectionPoint.city}`\n            return <a\n                href={`https://www.google.com/maps/search/${address}`}\n                target='_blank'>\n                {`(${contact.collectionPoint.name})${address}`}\n            </a>\n        }\n\n        return null\n    }\n\n    function renderActions() {\n        if (myroles.data) {\n            const actions = []\n            const isAdmin = !!myroles.data.me.roles.indexOf(AuthRoles.ADMIN)\n\n            if (myroles.data.me.roles.indexOf(AuthRoles.CONTACTS_READ) > -1 || isAdmin) {\n                actions.push(<a target=\"_blank\" href={\"https://office.bexio.com/index.php/kontakt/show/id/\" + contact.bexioId} className=\"btn btn-block btn-outline-primary\">In Bexio anschauen</a>)\n            }\n\n            if (myroles.data.me.roles.indexOf(AuthRoles.MEMBERS_READ) > -1 || isAdmin) {\n                actions.push(<a target=\"_blank\" href={\"https://vkazu.sharepoint.com/leitung/Personalakten?viewpath=/leitung/Personalakten&id=/leitung/Personalakten/\" + contact.firstname + \" \" + contact.lastname} className=\"btn btn-block btn-outline-primary\">Personalakte Ã¶ffnen</a>)\n            }\n\n            if (actions.length > 0) {\n                return (\n                    <Panel title=\"Actions\">\n                        {actions}\n                    </Panel>\n                )\n            }\n        }\n\n        return null\n    }\n\n    let address = `${contact.address}, ${contact.postcode} ${contact.city}`\n\n    return (\n        <Page title={contact.firstname + ' ' + contact.lastname}>\n            <Row>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"PersÃ¶nliche Informationen\" actions={renderPanelActions()}>\n                        <div className=\"container-fluid\">\n                            <FormEntry id=\"firstname\" title=\"Vorname\" >{contact.firstname}</FormEntry>\n                            <FormEntry id=\"lastname\" title=\"Nachname\" >{contact.lastname}</FormEntry>\n                            <FormEntry id=\"rank\" title=\"Rang\">{contact.rank}</FormEntry>\n                            <FormEntry id=\"birthday\" title=\"Geburtstag\">{new Date(contact.birthday).toLocaleDateString()}</FormEntry>\n                            <FormEntry id=\"address\" title=\"Adresse\"><a href={'https://www.google.com/maps/search/' + address} target='_blank'>{address}</a></FormEntry>\n                            <FormEntry id=\"collectionPoint\" title=\"Abholpunkt\">\n                                {renderCollectionPoint()}\n                            </FormEntry>\n                            <FormEntry id=\"phoneFixed\" title=\"Festnetz\"><a href={'tel:' + contact.phoneFixed}>{contact.phoneFixed}</a></FormEntry>\n                            <FormEntry id=\"phoneFixedSecond\" title=\"Festnetz 2\"><a href={'tel:' + contact.phoneFixedSecond}>{contact.phoneFixedSecond}</a></FormEntry>\n                            <FormEntry id=\"phoneMobile\" title=\"Mobile\"><a href={'tel:' + contact.phoneMobile}>{contact.phoneMobile}</a></FormEntry>\n                            <FormEntry id=\"mail\" title=\"E-Mails\">\n                                <a href={`mailto:${contact.mail}`}>{contact.mail}</a> <br />\n                                <a href={`mailto:${contact.mailSecond}`}>{contact.mailSecond}</a> <br />\n                                {(contact.moreMails || []).map((el, index) => {\n                                    if (editable) {\n                                        return (\n                                            <div className=\"input-group\">\n                                                <input type=\"email\" className=\"form-control\" value={el} key={index.toString()} name={index.toString()} onChange={onMoreMailsChange} />\n                                                <div className=\"input-group-append\">\n                                                    <Button className=\"btn-outline-secondary\" onClick={() => { removeMoreMailEntry(index) }}>\n                                                        <FontAwesomeIcon icon=\"times\" />\n                                                    </Button>\n                                                </div>\n                                            </div>\n                                        )\n                                    }\n                                    return <><a href={`mailto:${el}`}>{el}</a><br /></>\n                                })}\n                                {editable && <Button className=\"btn-outline btn-block\" onClick={() => { setContact({ ...contact, moreMails: [...(contact.moreMails || []), ''] }) }}>HinzufÃ¼gen</Button>}\n                            </FormEntry>\n                            <FormEntry id=\"groups\" title=\"Gruppen\">\n                                {(contact.contactGroups) ? contact.contactGroups.map((group: ContactGroup) => {\n                                    return <span key={group.name} className=\"badge badge-primary\">{group.name}</span>\n                                }) : ''}\n                            </FormEntry>\n                            <FormEntry id=\"entryDate\" title=\"Eintrittsdatum\" type=\"date\" editable={editable} value={(contact.entryDate) ? new Date(contact.entryDate) : ''} onChange={onInputChange} />\n                            <FormEntry id=\"exitDate\" title=\"Austrittsdatum\" type=\"date\" editable={editable} value={(contact.exitDate) ? new Date(contact.exitDate) : ''} onChange={onInputChange} />\n                            <FormEntry id=\"remarks\" title=\"Bemerkungen\" >{contact.remarks}</FormEntry>\n                        </div>\n                    </Panel>\n                </Column>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Finanzen\">\n                        <div className=\"container-fluid\">\n                            <FormEntry id=\"bankName\" title=\"Bank\" value={contact.bankName || ''} editable={editable} onChange={onInputChange} />\n                            <FormEntry id=\"iban\" title=\"IBAN\" value={contact.iban || ''} editable={editable} onChange={onInputChange} />\n                            <FormEntry id=\"accountHolder\" title=\"Kontoinhaber\" value={contact.accountHolder || ''} editable={editable} onChange={onInputChange} />\n                        </div>\n                    </Panel>\n                    {renderActions()}\n                </Column>\n            </Row>\n            <Row>\n                <Column className=\"col-md-6\">\n                    <ContactCompensation contactId={contact.id}  {...props} />\n                </Column>\n                <Column className=\"col-md-6\">\n                    <ContactLogoff contactId={contact.id}  {...props} />\n                </Column>\n            </Row>\n        </Page>\n    )\n}","import { gql } from \"apollo-boost\";\n\nexport const GET_OPEN_ORDERS = gql`\n  query GET_OPEN_ORDERS {\n    getOpenOrders {\n      id\n      documentNr\n      title\n      contact {\n        id\n        lastname\n      }\n    }\n  }\n`;\n\nexport const GET_ORDERS = gql`\n  query GET_ORDERS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n  ) {\n    getAllOrders(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        documentNr\n        title\n        contact {\n          id\n          firstname\n          lastname\n        }\n        total\n        execDates\n      }\n    }\n  }\n`;\n\nexport const GET_ORDER = gql`\n  query GET_ORDER($id: Int!) {\n    getOrder(id: $id) {\n      id,\n      title\n      contact {\n        id\n        firstname\n        lastname\n      }\n      documentNr\n      deliveryAddress\n      execDates\n      bexioId\n      positions {\n        id\n        pos\n        text\n        positionTotal\n      }\n    }\n  }\n`","import { RouteComponentProps } from \"react-router\"\nimport React from \"react\"\nimport GraphQLDataList from \"../components/GraphQLDataList\"\nimport { GET_ORDERS } from \"../graphql/OrderQueries\"\nimport { PaginationSortDirections } from \"../graphql/Interfaces\"\n\n\nexport default function Orders(props: RouteComponentProps) {\n    return (\n        <GraphQLDataList\n            query={GET_ORDERS}\n            title='AuftrÃ¤ge'\n            viewLocation='/order/'\n            tableColumns={[\n                { text: 'Auftragsnummer', keys: ['documentNr'], sortable: true },\n                { text: 'Titel', keys: ['title'], sortable: true },\n                { text: 'Kunde', keys: { 'contact': ['firstname', 'lastname'] }, sortKey: 'contact.firstname', sortable: true },\n                { text: 'Total', keys: ['total'], sortable: true, prefix: 'CHF ' }\n            ]}\n            defaultSortBy='documentNr'\n            defaultSortDirection={PaginationSortDirections.DESC}\n            searchable={true}\n            {...props}\n        />\n    )\n}","import React from \"react\"\nimport { Page } from \"../components/Page\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport FormEntry from \"../components/FormEntry\"\nimport Position from \"../entities/Position\"\nimport Loading from \"../components/Loading\"\nimport { RouteComponentProps } from \"react-router\"\nimport { useQuery } from \"react-apollo\"\nimport { GET_ORDER } from \"../graphql/OrderQueries\"\nimport { default as OrderEntity } from '../entities/Order'\n\nexport default function Order(props: RouteComponentProps<{ id: string }>) {\n    const order = useQuery<{ getOrder: OrderEntity }>(GET_ORDER, { variables: { id: parseInt(props.match.params.id) } })\n\n    if (order.loading) {\n        return (\n            <Page title=\"Loading...\"><Loading /></Page>\n        )\n    }\n\n    function renderPositions() {\n        let positionsRendered = []\n        if (order.data?.getOrder.positions) {\n            for (let position of (order.data?.getOrder.positions as Position[])) {\n                positionsRendered.push(\n                    <Row className=\"position\">\n                        <Column className=\"col-1\">\n                            {position.pos}\n                        </Column>\n                        <Column>\n                            <div dangerouslySetInnerHTML={{ __html: position.text || '' }}></div>\n                        </Column>\n                        {(position.positionTotal) ? <Column className=\"col-2\">CHF {position.positionTotal}</Column> : ''}\n                    </Row>\n                )\n            }\n        }\n\n        return positionsRendered\n    }\n\n    if (order.data?.getOrder.execDates instanceof Date) {\n        order.data.getOrder.execDates = [order.data?.getOrder.execDates]\n    }\n\n    return (\n        <Page title={order.data?.getOrder.title || ''}>\n            <Row>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Informationen\">\n                        <div className=\"container-fluid\">\n                            <FormEntry id=\"title\" title=\"Titel\" >{order.data?.getOrder.title}</FormEntry>\n                            <FormEntry id=\"customer\" title=\"Kunde\">{(order.data?.getOrder.contact) ? `${order.data?.getOrder.contact.firstname} ${order.data?.getOrder.contact.lastname}` : 'Kein Kunde gefunden'}</FormEntry>\n                            <FormEntry id=\"documentNr\" title=\"Auftragsnummer\" >{order.data?.getOrder.documentNr}</FormEntry>\n                            <FormEntry id=\"deliveryAddress\" title=\"Lieferadresse\">{order.data?.getOrder.deliveryAddress}</FormEntry>\n                            <FormEntry id=\"executionDates\" title=\"Auftragsdaten\">\n                                {(order.data?.getOrder.execDates) ? order.data?.getOrder.execDates.map((date: Date) => {\n                                    return <span className=\"badge badge-secondary\">{new Date(date).toLocaleDateString()}</span>\n                                }) : ''}\n                            </FormEntry>\n                        </div>\n                    </Panel>\n                </Column>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Actions\">\n                        <a target=\"_blank\" href={`https://office.bexio.com/index.php/kb_order/show/id/${order.data?.getOrder.bexioId}`} className=\"btn btn-block btn-outline-primary\">In Bexio anschauen</a>\n                    </Panel>\n                </Column>\n            </Row>\n            <Row>\n                <Column className=\"col\">\n                    <Panel title=\"Positionen\">\n                        <div className=\"container-fluid\">\n                            {renderPositions()}\n                            <Row className=\"position\">\n                                <Column className=\"col-1\">\n                                </Column>\n                                <Column>\n                                    <strong>Total</strong>\n                                </Column>\n                                <Column className=\"col-2\">\n                                    CHF {order.data?.getOrder.total}\n                                </Column>\n                            </Row>\n                        </div>\n                    </Panel>\n                </Column>\n            </Row>\n        </Page>\n    )\n}\n","import { gql } from \"apollo-boost\";\n\nexport const GET_BILLINGREPORTS = gql`\n  query GET_BILLINGREPORTS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n    $searchString: String\n    $filter: Int\n  ) {\n    getAllBillingReports(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n      searchString: $searchString\n      filter: $filter\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        date\n        order {\n          id\n          title\n          documentNr\n        }\n        creator {\n          id\n          displayName\n        }\n        state\n      }\n    }\n  }\n`;\n\nexport const GET_BILLINGREPORT = gql`\n  query GET_BILLINGREPORT($id: Int!) {\n    getBillingReport(id: $id) {\n      id\n      order {\n        id\n        title\n      }\n      date\n      creator {\n        id\n        displayName\n      }\n      state\n      els {\n        id\n        firstname\n        lastname\n      }\n      drivers {\n        id\n        firstname\n        lastname\n      }\n      food\n      remarks\n      compensations {\n        id\n        from\n        until\n        charge\n        amount\n        paied\n        date\n        member {\n          id\n          firstname\n          lastname\n        }\n      }\n    }\n  }\n`;\n\nexport const GET_BILLINGREPORT_FILTERS = gql`\n  query GET_BILLINGREPORT_FILTERS {\n    getBillingReportFilters {\n      id\n      displayName\n    }\n  }\n`;\n\nexport const ADD_BILLINGREPORT = gql`\n  mutation ADD_BILLINGREPORT($data: AddBillingReportInput!) {\n    addBillingReport(data: $data) {\n      id\n    }\n  }\n`;\n\nexport const EDIT_BILLINGREPORT = gql`\n  mutation EDIT_BILLINGREPORT($data: EditBillingReportInput!) {\n    editBillingReport(data: $data) {\n      id\n    }\n  }\n`;\n\nexport const CHANGE_BILLINGREPORT_STATE = gql`\n  mutation CHANGE_BILLINGREPORT_STATE($id: Int!, $state: BillingReportState!) {\n    changeBillingReportState(state: $state, id: $id) {\n      id\n    }\n  }\n`;\n","import React from 'react'\nimport GraphQLDataList from \"../components/GraphQLDataList\"\nimport { GET_BILLINGREPORTS, GET_BILLINGREPORT_FILTERS } from \"../graphql/BillingReportQueries\"\nimport { RouteComponentProps } from 'react-router-dom'\nimport { PaginationSortDirections } from '../graphql/Interfaces'\n\nexport default function BillingReports(props: RouteComponentProps) {\n    return (\n        <GraphQLDataList\n            query={GET_BILLINGREPORTS}\n            filterQuery={GET_BILLINGREPORT_FILTERS}\n            defaultFilter={0}\n            title='Verrechnungsrapporte'\n            tableColumns={[\n                { text: 'Datum', keys: ['date'], sortable: true, format: 'toLocaleDateString' },\n                { text: 'Auftrag Nr', keys: { 'order': ['documentNr'] }, sortKey: 'order.documentNr', sortable: true },\n                { text: 'Auftrag Titel', keys: { 'order': ['title'] }, sortKey: 'order.title', sortable: true },\n                { text: 'Ersteller', keys: { 'creator': ['displayName'] }, sortKey: 'creator.displayName', sortable: true },\n                { text: 'Status', keys: ['state'], sortable: true }\n            ]}\n            defaultSortBy='date'\n            defaultSortDirection={PaginationSortDirections.DESC}\n            viewLocation='/billing-report/'\n            searchable={true}\n            {...props}\n        />\n    )\n}","import React, { Component } from 'react'\nimport { Modal as BootstrapModal, Button } from 'react-bootstrap'\n\nexport interface ModalProps {\n    show: boolean,\n    onHide?: () => void\n    header: JSX.Element,\n    body: JSX.Element,\n    footer: JSX.Element\n}\n\nexport default class Modal extends Component<ModalProps> {\n    constructor(props: ModalProps) {\n        super(props)\n\n        this.handleClose = this.handleClose.bind(this)\n    }\n\n    private handleClose() {\n        if (this.props.onHide) {\n            this.props.onHide()\n        }\n    }\n\n    public render() {\n        return (\n            <BootstrapModal show={this.props.show} onHide={this.handleClose} dialogClassName=\"modal-lg\">\n                <BootstrapModal.Header closeButton>\n                    {this.props.header}\n                </BootstrapModal.Header>\n                <BootstrapModal.Body>\n                    {this.props.body}\n                </BootstrapModal.Body>\n                <BootstrapModal.Footer>\n                    {this.props.footer}\n                </BootstrapModal.Footer>\n            </BootstrapModal>\n        )\n    }\n}","import React, { useState } from \"react\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport Compensation from \"../entities/Compensation\"\nimport { RouteComponentProps } from \"react-router-dom\"\nimport Modal from \"../components/Modal\"\nimport { ButtonGroup } from \"react-bootstrap\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport Button from '../components/Button'\nimport Action from \"../components/Action\"\nimport GraphQLDataList from \"../components/GraphQLDataList\"\nimport { GET_COMPENSATIONS, GET_BASE_COMPENSATION, DELETE_COMPENSATION, GET_COMPENSATION_FILTERS } from \"../graphql/CompensationQueries\"\nimport { useLazyQuery, useMutation } from \"react-apollo\"\nimport Loading from \"../components/Loading\"\nimport { PaginationSortDirections } from \"../graphql/Interfaces\"\n\nexport default function Compensations(props: RouteComponentProps) {\n    const [showModal, setShowModal] = useState(false)\n    const [getCompensation, lazyCompensation] = useLazyQuery<{ getCompensation: Compensation }>(GET_BASE_COMPENSATION)\n    const [deleteCompensationMutation] = useMutation(DELETE_COMPENSATION)\n\n    function deleteCompensation(event: React.MouseEvent<HTMLButtonElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n            if (id) {\n                getCompensation({ variables: { id: parseInt(id) } })\n                setShowModal(true)\n            }\n        }\n    }\n\n    async function deleteCompensationConfirmed() {\n        await deleteCompensationMutation({ variables: { id: lazyCompensation.data?.getCompensation.id } })\n        setShowModal(false)\n    }\n\n    function renderModal() {\n        if (lazyCompensation.loading && showModal) {\n            return (\n                <Modal\n                    show={showModal}\n                    // @ts-ignore\n                    onHide={() => setShowModal(false)}\n                    header={<h3>Loading...</h3>}\n                    body={\n                        <Loading />\n                    }\n                    footer={\n                        <ButtonGroup>\n                            <Button variant=\"secondary\" onClick={() => setShowModal(false)}>Abbrechen</Button>\n                        </ButtonGroup>\n                    }\n\n                />\n            )\n        }\n\n        if (lazyCompensation.data) {\n            const toDeleteCompensation = lazyCompensation.data?.getCompensation as Compensation\n            return (\n                <Modal\n                    show={showModal}\n                    // @ts-ignore\n                    onHide={() => setShowModal(false)}\n                    header={<h3>{(toDeleteCompensation as Compensation).member.firstname + ' ' + (toDeleteCompensation as Compensation).member.lastname + ' vom  ' + new Date((toDeleteCompensation as Compensation).date).toLocaleDateString()}</h3>}\n                    body={\n                        <span>\n                            {\n                                'Willst du die EntschÃ¤digung von ' +\n                                (toDeleteCompensation as Compensation).member.firstname + ' ' + (toDeleteCompensation as Compensation).member.lastname +\n                                ' vom  ' + new Date((toDeleteCompensation as Compensation).date).toLocaleDateString() + ' mit einem Betrag von CHF' +\n                                (toDeleteCompensation as Compensation).amount + ' wirklich lÃ¶schen?'\n                            }\n                        </span>\n                    }\n                    footer={\n                        <ButtonGroup>\n                            <Button variant=\"danger\" onClick={deleteCompensationConfirmed}>LÃ¶schen</Button>\n                            <Button variant=\"secondary\" onClick={() => setShowModal(false)}>Abbrechen</Button>\n                        </ButtonGroup>\n                    }\n\n                />\n            )\n        }\n\n        return null\n    }\n\n    return (\n        <>\n            {renderModal()}\n            <GraphQLDataList\n                query={GET_COMPENSATIONS}\n                filterQuery={GET_COMPENSATION_FILTERS}\n                defaultFilter={0}\n                title='EntschÃ¤digungen'\n                viewLocation='/compensation/'\n                tableColumns={[\n                    { text: 'Mitglied', keys: { 'member': ['firstname', 'lastname'] }, sortKey: 'member.firstname', sortable: true },\n                    { text: 'Datum', keys: ['date'], sortable: true, format: 'toLocaleDateString' },\n                    { text: 'Betrag', keys: ['amount'], sortable: true, prefix: 'CHF ', format: 'toFixed(2)' },\n                    { text: 'Beschreibung', keys: ['description'], sortable: false },\n                    { text: 'Ersteller', keys: { 'creator': ['displayName'] }, sortKey: 'creator.displayName', sortable: true },\n                    { text: 'Genehmigt', keys: ['approved'], sortable: true },\n                    { text: 'Ausbezahlt', keys: ['paied'], sortable: true }\n                ]}\n                defaultSortBy='date'\n                defaultSortDirection={PaginationSortDirections.DESC}\n                panelActions={[\n                    <Action icon=\"plus\" to=\"/compensations/add\" roles={[AuthRoles.COMPENSATIONS_CREATE]} />,\n                ]}\n                rowActions={[\n                    <Button className=\"btn delete\" variant=\"danger\" onClick={deleteCompensation} roles={[AuthRoles.COMPENSATIONS_EDIT]}><FontAwesomeIcon icon=\"trash\" /></Button>\n                ]}\n                searchable={true}\n                {...props}\n            />\n        </>\n    )\n}","import React, { Component } from \"react\";\n\nexport interface WizardNavProps {\n    isActive?: boolean,\n    currentStep?: number,\n    totalSteps?: number,\n    fistStep?: () => void,\n    lastStep?: () => void,\n    nextStep?: () => void,\n    previousStep?: () => void,\n    gotoStep?: (step: number) => void\n}\n\nexport default class WizardNav extends Component<WizardNavProps> {\n    private renderSteps() {\n        let steps = []\n        let totalSteps = this.props.totalSteps || 0\n\n        for (let i = 1; i <= totalSteps; i++) {\n            let classes = 'dot'\n            if (i == this.props.currentStep) {\n                classes += ' active'\n            }\n            steps.push(<span key={i} className={classes}>â€¢</span>)\n        }\n\n        return steps\n    }\n\n    public render() {\n        return (\n            <div key=\"WizardNav\" id=\"WizardNav\" className=\"d-flex justify-content-center\">\n                {this.renderSteps()}\n            </div>\n        )\n    }\n}","import React, { Component } from \"react\";\nimport Button from \"./Button\";\n\nexport interface WizardStepProps {\n    title: string,\n    isActive?: boolean,\n    currentStep?: number,\n    totalSteps?: number,\n    fistStep?: () => void,\n    lastStep?: () => void,\n    nextStep?: () => void,\n    previousStep?: () => void,\n    gotoStep?: (step: number) => void,\n    onNextStep?: () => Promise<boolean>,\n    onPreviousStep?: () => Promise<boolean>,\n    validator?: () => Promise<boolean>\n}\n\nexport default class WizardStep extends Component<WizardStepProps> {\n    constructor(props: WizardStepProps) {\n        super(props)\n        this.previousStep = this.previousStep.bind(this)\n        this.nextStep = this.nextStep.bind(this)\n        this.renderBackButton = this.renderBackButton.bind(this)\n    }\n\n    public async nextStep() {\n        let valid = true\n        if (this.props.onNextStep) {\n            valid = await this.props.onNextStep()\n        }\n\n        if (valid) {\n            if (this.props.nextStep) {\n                this.props.nextStep()\n            }\n        }\n    }\n\n    public async previousStep() {\n        if (this.props.onPreviousStep) {\n            await this.props.onPreviousStep()\n        }\n\n        if (this.props.previousStep) {\n            this.props.previousStep()\n        }\n    }\n\n    private renderBackButton() {\n        if ((this.props.currentStep || 0) > 1) return <Button variant=\"secondary\" onClick={this.previousStep}>ZurÃ¼ck</Button>\n        return <div></div>\n    }\n\n    public render() {\n        let nextButtonText = 'Weiter'\n        let nextButtonClasses = 'btn btn-primary'\n        if (this.props.currentStep === this.props.totalSteps) {\n            nextButtonText = 'Speichern'\n            nextButtonClasses = 'btn btn-success'\n        }\n\n        return (\n            <div>\n                <div className=\"wizard-step-header\">\n                    <h4>{this.props.title}</h4>\n                </div>\n                <div className=\"wizard-step-body\">\n                    {this.props.children}\n                </div>\n                <div className=\"d-flex justify-content-between wizard-step-footer\">\n                    {this.renderBackButton()}\n                    <Button className={nextButtonClasses} onClick={this.nextStep}>{nextButtonText}</Button>\n                </div>\n            </div>\n        )\n    }\n}","import React, { useState } from \"react\"\nimport WizardStep from \"../../components/WizardStep\"\nimport StringIndexed from \"../../interfaces/StringIndexed\"\nimport Order from \"../../entities/Order\"\nimport { useQuery } from \"react-apollo\"\nimport { GET_OPEN_ORDERS } from \"../../graphql/OrderQueries\"\nimport LoadingDots from \"../../components/LoadingDots\"\n\nexport interface Step1Props {\n    onNext: (data: StringIndexed<any>) => void,\n}\n\nexport default function AddBillingReportStep1(props: Step1Props) {\n    let formEl: HTMLFormElement\n    const [date, setDate] = useState('')\n    const [order, setOrder] = useState<number>()\n    const { loading, error, data } = useQuery<{ getOpenOrders: Order[] }>(GET_OPEN_ORDERS)\n\n    if (error) return null\n\n    function validate(openOrders: Order[]) {\n        return async (): Promise<boolean> => {\n            if (formEl) {\n                let valid = formEl.checkValidity()\n                formEl.className = 'was-validated'\n\n                if (valid) {\n                    props.onNext({\n                        order: openOrders.filter(rec => rec.id === order),\n                        date: new Date(date)\n                    })\n                }\n                return valid\n            }\n            return false\n        }\n    }\n\n    function renderOptions(openOrders: Order[]) {\n        let options = [<option key=\"none\" value=\"\">Bitte WÃ¤hlen</option>]\n        for (let order of openOrders) {\n            // only show the contact if the contact is not a privat person (identified that companies doesn't have any firstname)\n            if (!order.contact.firstname) {\n                options.push(<option key={order.documentNr} value={order.id}>{`${order.title} (${order.contact.lastname})`}</option>)\n            } else {\n                options.push(<option key={order.documentNr} value={order.id}>{`${order.title}`}</option>)\n            }\n        }\n\n        return options\n    }\n\n    function onInputChange(event: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        switch (name) {\n            case 'order':\n                setOrder(parseInt(value))\n                break\n            case 'date':\n                setDate(value)\n                break\n        }\n    }\n\n    function renderOrderSelect() {\n        if (loading) return <LoadingDots />\n\n        return (\n            <select className='form-control' name=\"order\" id=\"order\" onChange={onInputChange} value={order} required={true}>\n                {renderOptions(data?.getOpenOrders || [])}\n            </select>\n        )\n    }\n\n    return (\n        <WizardStep title=\"Details\" onNextStep={validate(data?.getOpenOrders || [])} {...props}>\n            <form ref={(form: HTMLFormElement) => formEl = form}>\n                <h5>Einsatz</h5>\n                {renderOrderSelect()}\n                <br></br>\n                <h5>Datum</h5>\n                <input type=\"Date\" name=\"date\" id=\"date\" className='form-control' value={date} onChange={onInputChange} required={true}></input>\n            </form>\n        </WizardStep>\n    )\n}","import React, { useState } from \"react\"\nimport Select from 'react-select'\nimport { ValueType } from \"react-select/lib/types\"\nimport Contact from \"../entities/Contact\"\nimport { useQuery } from \"react-apollo\"\nimport { GET_ALL_MEMBERS_SELECT } from '../graphql/ContactQueries'\nimport LoadingDots from \"./LoadingDots\"\n\ninterface MemberSelectProps {\n    defaultValue?: Array<string>,\n    isMulti?: boolean\n    onChange: Function,\n    ref?: Function,\n    required?: boolean\n}\n\nexport default function MemberSelect(props: MemberSelectProps) {\n    const { loading, error, data } = useQuery<{ getMembersAll: Contact[] }>(GET_ALL_MEMBERS_SELECT)\n\n    let valueProps = []\n    if (props.defaultValue instanceof Array) {\n        for (let id of props.defaultValue) {\n            const member = (data?.getMembersAll || []).find(rec => rec.id.toString() === id)\n            if (member) {\n                valueProps.push({\n                    value: member.id.toString(),\n                    label: member.firstname + ' ' + member.lastname\n                })\n            }\n        }\n    }\n\n    if (loading) return <LoadingDots />\n    if (error) return null\n    if (!data) return null\n\n    function prepareOptions(data: Contact[]) {\n        let options = []\n        for (const rec of data) {\n            options.push({\n                label: `${rec.firstname} ${rec.lastname}`,\n                value: rec.id.toString()\n            })\n        }\n\n        return options\n    }\n\n    function onChange(opt: ValueType<{ label: string, value: string }>) {\n        let ops: Array<{ label: string, value: string }> = [opt as { label: string, value: string }]\n        if (props.isMulti) {\n            ops = opt as Array<{ label: string, value: string }>\n        }\n\n        props.onChange(ops.map(r => data?.getMembersAll.find(m => m.id === parseInt(r.value))))\n    }\n\n\n    return (<Select\n        isClearable={true}\n        options={prepareOptions(data.getMembersAll)}\n        backspaceRemovesValue={true}\n        hideSelectedOptions={true}\n        openMenuOnFocus={true}\n        isMulti={props.isMulti || false}\n        onChange={onChange}\n        value={valueProps}\n        required={!!props.required}\n    />)\n\n}","import React, { Component } from \"react\";\nimport Table from \"../../components/Table\";\nimport StringIndexed from \"../../interfaces/StringIndexed\";\nimport WizardStep from \"../../components/WizardStep\";\nimport { BillingReportCompensationEntry } from \"../../interfaces/BillingReport\";\nimport Contact from \"../../entities/Contact\";\nimport MemberSelect from \"../../components/MemberSelect\";\n\nexport interface Step2Props {\n    onNext: (data: StringIndexed<any>) => void,\n    onPrevious?: () => Promise<boolean>\n}\n\nexport default class AddBillingReportStep2 extends Component<Step2Props, { tableEntries: StringIndexed<BillingReportCompensationEntry>, vks: Array<Contact>, from: string, until: string, charge: boolean }> {\n    private formEl?: HTMLFormElement\n\n    constructor(props: Step2Props) {\n        super(props)\n        this.onAdd = this.onAdd.bind(this)\n        this.onInputChange = this.onInputChange.bind(this)\n        this.onSelectChange = this.onSelectChange.bind(this)\n        this.removeTableItem = this.removeTableItem.bind(this)\n        this.validate = this.validate.bind(this)\n\n        this.state = {\n            tableEntries: {},\n            vks: [],\n            from: '',\n            until: '',\n            charge: true\n        }\n    }\n\n    private onAdd(event: React.MouseEvent<HTMLButtonElement>) {\n        event.preventDefault()\n        if (this.formEl) {\n            let selection = this.state.tableEntries\n            let valid = this.formEl.checkValidity()\n            this.formEl.className = 'was-validated'\n\n            if (valid) {\n                valid = this.state.vks.length > 0\n            }\n\n            if (valid) {\n                let from = new Date(\"01/01/1970 \" + this.state.from)\n                let until = new Date(\"01/01/1970 \" + this.state.until)\n                let totalHours = (until.getTime() - from.getTime()) / 1000 / 60 / 60\n\n                if (totalHours < 0) totalHours = totalHours + 24\n\n                for (let i of this.state.vks) {\n                    let id = Math.round(Math.random() * 100000)\n                    selection[id] = {\n                        id: i.id,\n                        member: i,\n                        from: from,\n                        until: until,\n                        charge: this.state.charge,\n                        totalHours: totalHours\n                    }\n                }\n\n                this.setState({\n                    tableEntries: selection,\n                    vks: [],\n                    from: '',\n                    until: '',\n                    charge: true\n                })\n            }\n        }\n    }\n\n    private onInputChange(event: React.ChangeEvent<HTMLInputElement>) {\n        const target = event.target;\n        const value = target.type === 'checkbox' ? target.checked : target.value;\n        const name = target.name;\n\n        //@ts-ignore\n        this.setState({\n            [name]: value\n        });\n    }\n\n    private onSelectChange(opt: Contact) {\n        if (opt) {\n            let optlet: Array<Contact> = (opt as any) as Array<Contact>\n            this.setState({\n                vks: optlet\n            })\n        }\n    }\n\n    private removeTableItem(event: React.MouseEvent<HTMLButtonElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentElement.getAttribute('data-key')\n\n            if (id) {\n                let entries = this.state.tableEntries\n                delete entries[id.replace('_', '')]\n                this.setState({\n                    tableEntries: entries\n                })\n            }\n        }\n    }\n\n    private async validate(): Promise<boolean> {\n        if (Object.keys(this.state.tableEntries).length > 0) {\n            this.props.onNext({\n                vks: this.state.tableEntries\n            })\n\n            return true\n        }\n\n        return false\n    }\n\n    public render() {\n        return (\n            <WizardStep title=\"Einsatzzeiten\" onNextStep={this.validate} onPreviousStep={this.props.onPrevious || async function () { return true }} {...this.props}>\n                <form ref={(form: HTMLFormElement) => this.formEl = form}>\n                    <div className=\"row\">\n                        <div className=\"col\">\n                            <h5>VKs</h5>\n                            <MemberSelect\n                                onChange={this.onSelectChange}\n                                isMulti={true}\n                                defaultValue={this.state.vks.map(r => r.id.toString())}\n                            />\n                        </div>\n                        <div className=\"col-2\">\n                            <h5>Verrechnen</h5>\n                            <span className=\"switch switch-sm\">\n                                <input type=\"checkbox\" className=\"switch\" id=\"charge\" name=\"charge\" checked={this.state.charge} onChange={this.onInputChange} />\n                                <label htmlFor=\"charge\"></label>\n                            </span>\n                        </div>\n                    </div>\n                    <br></br>\n                    <div className=\"row\">\n                        <div className=\"col\">\n                            <h5>Von</h5>\n                            <input type=\"time\" name=\"from\" value={this.state.from} onChange={this.onInputChange} className='form-control' required={true} />\n                        </div>\n                        <div className=\"col\">\n                            <h5>Bis</h5>\n                            <input type=\"time\" name=\"until\" value={this.state.until} onChange={this.onInputChange} className='form-control' required={true} />\n                        </div>\n                    </div>\n                    <br></br>\n                    <div className=\"row\">\n                        <div className=\"col\">\n                            <button className=\"btn btn-primary btn-block\" onClick={this.onAdd}>HinzufÃ¼gen</button>\n                        </div>\n                    </div>\n                </form>\n                <br></br>\n                <div className=\"row\">\n                    <Table<BillingReportCompensationEntry>\n                        columns={[\n                            { text: 'VK', keys: { 'member': ['firstname', 'lastname'] }, sortable: true },\n                            { text: 'Von', keys: ['from'], format: 'toLocaleTimeString', sortable: true },\n                            { text: 'Bis', keys: ['until'], format: 'toLocaleTimeString', sortable: true },\n                            { text: 'Anzahl Stunden', keys: ['totalHours'], sortable: true },\n                            { text: 'Verrechnet', keys: ['charge'], sortable: true },\n                            { text: 'Actions', keys: ['id'], content: <button className=\"btn btn-danger\" onClick={this.removeTableItem}>â¨¯</button> }\n                        ]}\n                        defaultSort={{ keys: ['from'], direction: 'asc' }}\n                        data={this.state.tableEntries}\n                    />\n                </div>\n            </WizardStep >\n        )\n    }\n}","import React, { Component } from \"react\"\nimport WizardStep from \"../../components/WizardStep\"\nimport StringIndexed from \"../../interfaces/StringIndexed\"\nimport Contact from \"../../entities/Contact\"\nimport Select from 'react-select'\nimport Checkbox from \"../../components/Checkbox\"\nimport MemberSelect from \"../../components/MemberSelect\"\n\nexport interface AddBillingReportStep3Props {\n    onNext: (data: StringIndexed<any>) => void\n}\n\nexport default class AddBillingReportStep3 extends Component<AddBillingReportStep3Props, { els: Array<Contact>, drivers: Array<Contact>, food: boolean, remarks: string }> {\n    private onELChange: (opt: Array<Contact>) => void\n    private onDriversChange: (opt: Array<Contact>) => void\n    private formEl?: HTMLFormElement\n    private elSelect?: Select<{}>\n    private driversSelect?: Select<{}>\n\n    constructor(props: AddBillingReportStep3Props) {\n        super(props)\n\n        this.onInputChange = this.onInputChange.bind(this)\n        this.onNext = this.onNext.bind(this)\n        this.onELChange = this.onSelectChange('els')\n        this.onDriversChange = this.onSelectChange('drivers')\n\n        this.state = {\n            els: [],\n            drivers: [],\n            food: false,\n            remarks: ''\n        }\n    }\n\n    private onInputChange(event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) {\n        const target = event.target\n        const value = target.type === 'checkbox' ? (target as HTMLInputElement).checked : target.value\n        const id = target.id\n        //@ts-ignore\n        this.setState({\n            [id]: value\n        })\n    }\n\n    private onSelectChange(stateName: string) {\n        return (opt: Array<Contact>) => {\n            if (opt) {\n                //@ts-ignore\n                this.setState({\n                    [stateName]: opt\n                })\n            } else {\n                //@ts-ignore\n                this.setState({\n                    [stateName]: []\n                })\n            }\n        }\n    }\n\n    private async onNext(): Promise<boolean> {\n        let valid = true\n        if (this.state.els.length <= 0) valid = false\n\n        if (valid) {\n            this.props.onNext(this.state)\n        }\n        return valid\n    }\n\n    public render() {\n        return (\n            <WizardStep title=\"Weiteres\" onNextStep={this.onNext} {...this.props}>\n                <form ref={(form: HTMLFormElement) => this.formEl = form} className=\"was-validated\">\n                    <h5>ELs</h5>\n                    <MemberSelect\n                        ref={(select: any) => this.elSelect = select}\n                        onChange={this.onELChange}\n                        isMulti={true}\n                        required={true}\n                        defaultValue={this.state.els.map(c => c.id.toString())}\n                    />\n                    <br></br>\n                    <h5>Fahrer</h5>\n                    <MemberSelect\n                        ref={(select: any) => this.driversSelect = select}\n                        onChange={this.onDriversChange}\n                        isMulti={true}\n                        required={false}\n                        defaultValue={this.state.drivers.map(c => c.id.toString())}\n                    />\n                    <br></br>\n                    <h5>Diverses</h5>\n                    <Checkbox id='food' checked={this.state.food} onChange={this.onInputChange} label=\"Verpflegung\" />\n                    <br></br>\n                    <h5>Bemerkungen</h5>\n                    <small className=\"text-muted\">Bei mehreren EL bitte die Schichtzeiten hier eingeben</small>\n                    <textarea id=\"remarks\" value={this.state.remarks} onChange={this.onInputChange} className='form-control'></textarea>\n                </form>\n            </WizardStep>\n        )\n    }\n}","import React, { Component } from \"react\";\nimport WizardStep from \"../../components/WizardStep\";\nimport Table from \"../../components/Table\";\nimport StringIndexed from \"../../interfaces/StringIndexed\";\nimport { BillingReportCompensationEntry } from \"../../interfaces/BillingReport\";\nimport Order from \"../../entities/Order\";\n\nexport default class AddBillingReportStep4 extends Component<{ onNext: () => Promise<boolean>, order: Order, date: Date, vks: StringIndexed<BillingReportCompensationEntry>, els: Array<string>, drivers: Array<string>, food: boolean, remarks: string }> {\n    public render() {\n        return (\n            <WizardStep title=\"Zusammenfassung\" onNextStep={this.props.onNext} {...this.props}>\n                <h5>Einsatz</h5>\n                <p>{(this.props.order) ? this.props.order.title : ''}</p>\n\n                <h5>Datum</h5>\n                <p>{(this.props.date) ? this.props.date.toLocaleDateString() : ''}</p>\n\n                <h5>VKs</h5>\n                <Table<BillingReportCompensationEntry>\n                    columns={[\n                        { text: 'VK', keys: { 'member': ['firstname', 'lastname'] } },\n                        { text: 'Von', keys: ['from'], format: 'toLocaleTimeString' },\n                        { text: 'Bis', keys: ['until'], format: 'toLocaleTimeString' },\n                        { text: 'Verrechnet', keys: ['charge'] },\n                        { text: 'Anzahl Stunden', keys: ['totalHours'] }\n                    ]}\n                    defaultSort={{ keys: ['from'], direction: 'asc' }}\n                    data={(this.props.vks) ? this.props.vks : {}}\n                />\n\n                <h5>ELs</h5>\n                <p>{this.props.els.join(',')}</p>\n\n                <h5>Fahrer</h5>\n                <p>{this.props.drivers.join(',')}</p>\n\n                <h5>Diverses</h5>\n                <p className=\"switch switch-sm\">\n                    <input type=\"checkbox\" className=\"switch\" id=\"food\" name=\"food\" checked={this.props.food} />\n                    <label htmlFor=\"food\">Verpflegung</label>\n                </p>\n\n                <h5>Bemerkungen</h5>\n                <p>{(this.props.remarks) ? this.props.remarks : ''}</p>\n            </WizardStep>\n        )\n    }\n}","//@ts-ignore\nimport StepWizard from 'react-step-wizard'\nimport React, { useState } from 'react'\nimport { Page } from '../components/Page'\nimport Row from '../components/Row'\nimport Column from '../components/Column'\nimport Panel from '../components/Panel'\nimport WizardNav from '../components/WizardNav'\nimport AddBillingReportStep1 from './AddBillingReportSteps/AddBillingReportStep1'\nimport AddBillingReportStep2 from './AddBillingReportSteps/AddBillingReportStep2'\nimport AddBillingReportStep3 from './AddBillingReportSteps/AddBillingReportStep3'\nimport AddBillingReportStep4 from './AddBillingReportSteps/AddBillingReportStep4'\nimport StringIndexed from '../interfaces/StringIndexed'\nimport { BillingReportCompensationEntry } from '../interfaces/BillingReport'\nimport { History } from \"history\"\nimport Order from '../entities/Order'\nimport Contact from '../entities/Contact'\nimport { useMutation } from 'react-apollo'\nimport { ADD_BILLINGREPORT } from '../graphql/BillingReportQueries'\nimport { ADD_ORDERCOMPENSATIONS } from '../graphql/CompensationQueries'\nimport BillingReport from '../entities/BillingReport'\nimport { useDispatch } from 'react-redux'\nimport { UI } from '../actions/UIActions'\n\nexport interface AddBillingReportProps {\n    history: History\n}\n\nexport default function AddBillingReport(props: AddBillingReportProps) {\n    const [els, setEls] = useState<Contact[]>([])\n    const [drivers, setDrivers] = useState<Contact[]>([])\n    const [order, setOrder] = useState<Order>()\n    const [date, setDate] = useState<Date>()\n    const [vks, setVks] = useState<StringIndexed<BillingReportCompensationEntry<Contact>>>()\n    const [food, setFood] = useState<boolean>()\n    const [remarks, setRemarks] = useState<string>()\n    const [addBillingReport, { }] = useMutation<{ addBillingReport: BillingReport }>(ADD_BILLINGREPORT)\n    const [addOrderCompensations, { }] = useMutation(ADD_ORDERCOMPENSATIONS)\n    const dispatch = useDispatch()\n\n\n    function onNext(data: StringIndexed<any>) {\n        for (const key in data) {\n            switch (key) {\n                case 'order':\n                    setOrder(data[key][0])\n                    break\n                case 'date':\n                    setDate(data[key])\n                    break\n                case 'vks':\n                    setVks(data[key])\n                    break\n                case 'els':\n                    setEls(data[key])\n                    break\n                case 'drivers':\n                    setDrivers(data[key])\n                    break\n                case 'food':\n                    setFood(data[key])\n                    break\n                case 'remarks':\n                    setRemarks(data[key])\n                    break\n            }\n        }\n    }\n\n    async function save(): Promise<boolean> {\n        const result = await addBillingReport({\n            variables: {\n                data: {\n                    orderId: order?.id,\n                    date,\n                    elIds: els.map(r => r.id),\n                    driverIds: drivers.map(r => r.id),\n                    food,\n                    remarks\n                }\n            }\n        })\n\n        if (result.errors) {\n            return false\n        }\n\n        const data = []\n        for (const id in vks) {\n            const vk = vks[id]\n            data.push({\n                from: vk.from,\n                until: vk.until,\n                billingReportId: result.data?.addBillingReport.id,\n                memberId: vk.id,\n                date\n            })\n        }\n\n        const compResult = await addOrderCompensations({\n            variables: {\n                data\n            }\n        })\n        if (compResult.errors) {\n            return false\n        }\n        dispatch(UI.showSuccess('Gespeichert'))\n        props.history.push('/billing-reports')\n\n        return true\n    }\n\n    return (\n        <Page title=\"Verrechnungsrapport erfassen\">\n            <Row>\n                <Column className=\"col\">\n                    <Panel title=\"\">\n                        <StepWizard nav={<WizardNav />}>\n                            <AddBillingReportStep1 onNext={onNext} />\n                            <AddBillingReportStep2 onNext={onNext} />\n                            <AddBillingReportStep3 onNext={onNext} />\n                            <AddBillingReportStep4\n                                onNext={save}\n                                order={order as Order}\n                                date={date as Date}\n                                vks={vks as StringIndexed<BillingReportCompensationEntry<Contact>>}\n                                els={els.map(el => el.firstname + ' ' + el.lastname)}\n                                drivers={drivers.map(driver => driver.firstname + ' ' + driver.lastname)}\n                                food={food || false}\n                                remarks={remarks || ''}\n                            />\n                        </StepWizard>\n                    </Panel>\n                </Column>\n            </Row>\n        </Page>\n    )\n}\n","import React from \"react\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport Loading from \"../components/Loading\"\nimport Config from \"../Config\"\nimport { useQuery } from \"react-apollo\"\nimport { GET_ME } from \"../graphql/UserQueries\"\nimport { RouteComponentProps } from \"react-router-dom\"\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\n\nexport default function Login(props: RouteComponentProps<{}, {}, { prevLocation: string, unAuthenticated: boolean }>) {\n    const me = useQuery(GET_ME)\n    const dispatch = useDispatch()\n\n    if (me.loading) {\n        return <Loading />\n    }\n\n    if (me.data) {\n        if (props.location.state && props.location.state.prevLocation) {\n            props.history.replace(props.location.state.prevLocation)\n        } else {\n            props.history.replace('/dashboard')\n        }\n        return null\n    }\n\n    if (props.location.state && !props.location.state.unAuthenticated) {\n        props.history.replace(props.location.pathname, Object.assign({}, props.location.state, { errorShown: true }))\n    }\n\n    if (props.location.state?.unAuthenticated) {\n        dispatch(UI.showError('Bitte logge dich ein'))\n    }\n\n    return (\n        <div className=\"d-flex vw-100 vh-100\" id=\"login-container\">\n            <div id=\"login\">\n                <h2>Login</h2>\n                <div className=\"form-group\" >\n                    <a className=\"btn btn-secondary btn-block d-flex justify-content-between\" href={Config.apiEndpoint + \"/api/auth/azure\"}>\n                        <span className=\"icon\">\n                            <FontAwesomeIcon icon={['fab', 'microsoft']} ></FontAwesomeIcon>\n                        </span>\n                        <span>\n                            VK-Login\n                        </span>\n                        <span></span>\n                    </a>\n                </div >\n            </div >\n        </div>\n    )\n}","import { RouteComponentProps } from \"react-router\"\nimport React from \"react\"\nimport GraphQLDataList from \"../components/GraphQLDataList\"\nimport { GET_USERS } from \"../graphql/UserQueries\"\n\nexport default function Users(props: RouteComponentProps) {\n    return (\n        <GraphQLDataList\n            query={GET_USERS}\n            title='Benutzer'\n            viewLocation='/user/'\n            tableColumns={[\n                { text: 'Name', keys: ['displayName'], sortable: true },\n                { text: 'Rechte', keys: ['roles'], sortable: true }\n            ]}\n            defaultSortBy='displayName'\n            searchable={true}\n            {...props}\n        />\n    )\n}","import React, { Component } from \"react\";\nimport { Page } from \"../Page\";\n\nexport default class Error404 extends Component {\n    public render() {\n        return (\n            <Page title=\"\">\n                <div id=\"page-404\">\n                    <img src=\"/webapp/404.png\" />\n                </div>\n            </Page>\n        )\n    }\n}","import React from 'react'\nimport { Page } from '../components/Page'\nimport Loading from '../components/Loading'\nimport Row from '../components/Row'\nimport Column from '../components/Column'\nimport Panel from '../components/Panel'\nimport FormEntry from '../components/FormEntry'\nimport { Link, RouteComponentProps } from 'react-router-dom'\nimport Table from '../components/Table'\nimport * as UserEntity from '../entities/User'\nimport Contact from '../entities/Contact'\nimport { useQuery } from 'react-apollo'\nimport { GET_USER } from '../graphql/UserQueries'\nimport Error404 from '../components/Errors/404'\n\nexport default function User(props: RouteComponentProps<{ id: string }>) {\n    const user = useQuery<{getUser: UserEntity.default}>(GET_USER, { variables: { id: parseInt(props.match.params.id) } })\n\n    if (user.loading) {\n        return <Loading />\n    }\n\n    if (!user.data) {\n        return <Error404 />\n    }\n\n    function renderBexioPart() {\n        if (!user.data || !user.data.getUser.bexioContact) {\n            return (<span>Kein Link gefunden....</span>)\n        }\n\n        let contact = user.data.getUser.bexioContact as Contact\n        return (\n            <div>\n                <FormEntry id=\"bexioId\" title=\"ID\">{contact.bexioId}</FormEntry>\n                <FormEntry id=\"firstname\" title=\"Vorname\">{contact.firstname}</FormEntry>\n                <FormEntry id=\"lastname\" title=\"Nachname\">{contact.lastname}</FormEntry>\n                <Link to={\"/contact/\" + contact.id} className=\"btn btn-block btn-outline-primary\">Kontakt Ã¶ffnen</Link>\n                <a target=\"_blank\" href={\"https://office.bexio.com/index.php/kontakt/show/id/\" + contact.bexioId} className=\"btn btn-block btn-outline-primary\">In Bexio anschauen</a>\n            </div>\n        )\n    }\n\n    function renderRolePart() {\n        let roles: Array<{ role: string, id: string }> = []\n\n        if (!user.data) return null\n\n        for (let i in user.data.getUser.roles) {\n            roles.push({ role: user.data.getUser.roles[i], id: i })\n        }\n\n        return (\n            <Table<{ role: string, id: string }>\n                columns={[\n                    { text: 'Role', keys: ['role'] }\n                ]}\n                data={roles}\n            />\n        )\n    }\n\n    return (\n        <Page title={user.data.getUser.displayName}>\n            <Row>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Allgemeine Informationen\">\n                        <FormEntry id=\"displayName\" title=\"Name\">{user.data.getUser.displayName}</FormEntry>\n                    </Panel>\n                    <Panel title=\"Rechte\">\n                        {renderRolePart()}\n                    </Panel>\n                </Column>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Bexio Informationen\">\n                        {renderBexioPart()}\n                    </Panel>\n                </Column>\n            </Row>\n        </Page>\n    )\n}","import React, { useState } from \"react\"\nimport Select from 'react-select'\nimport { ValueType } from \"react-select/lib/types\"\nimport Order from \"../entities/Order\"\nimport { GET_OPEN_ORDERS } from \"../graphql/OrderQueries\"\nimport { useQuery } from \"react-apollo\"\nimport LoadingDots from \"./LoadingDots\"\n\ninterface OrderSelectProps {\n    defaultValue?: Array<string>,\n    isMulti?: boolean\n    onChange: Function,\n    ref?: Function,\n    required?: boolean\n}\n\nexport default function OrderSelect(props: OrderSelectProps) {\n    const { loading, error, data } = useQuery<{ getOpenOrders: Order[] }>(GET_OPEN_ORDERS)\n\n    if (loading) return <LoadingDots />\n    if (error) return null\n    if (!data?.getOpenOrders) return null\n\n    let valueProps = []\n    if (props.defaultValue instanceof Array) {\n        for (let id of props.defaultValue) {\n            const order = (data.getOpenOrders || []).find(rec => rec.id.toString() === id)\n            if (order) {\n                valueProps.push({\n                    value: order.id.toString(),\n                    label: order.title\n                })\n            }\n        }\n    }\n\n    function prepareOptions(data: Order[]) {\n        let options = []\n        for (const rec of data) {\n            options.push({\n                label: rec.title,\n                value: rec.id.toString()\n            })\n        }\n\n        return options\n    }\n\n    function onChange(opt: ValueType<{ label: string, value: string }>) {\n        let ops: Array<{ label: string, value: string }> = [opt as { label: string, value: string }]\n        if (props.isMulti) {\n            ops = opt as Array<{ label: string, value: string }>\n        }\n        props.onChange(ops.map(r => data?.getOpenOrders.find(o => o.id === parseInt(r.value))))\n    }\n\n    return (<Select\n        isClearable={true}\n        options={prepareOptions(data?.getOpenOrders || [])}\n        backspaceRemovesValue={true}\n        hideSelectedOptions={true}\n        openMenuOnFocus={true}\n        isMulti={props.isMulti || false}\n        onChange={onChange}\n        value={valueProps}\n        required={!!props.required}\n    />)\n\n}","import React, { useState } from 'react'\nimport { Page } from '../components/Page'\nimport Panel from '../components/Panel'\nimport Row from '../components/Row'\nimport Column from '../components/Column'\nimport FormEntry from '../components/FormEntry'\nimport Loading from '../components/Loading'\nimport StringIndexed from '../interfaces/StringIndexed'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { RouteComponentProps, Link } from 'react-router-dom'\nimport * as BillingReportEntity from '../entities/BillingReport'\nimport OrderCompensation from '../entities/OrderCompensation'\nimport Order from '../entities/Order'\nimport User from '../entities/User'\nimport { AuthRoles } from '../interfaces/AuthRoles'\nimport Action from '../components/Action'\nimport Contact from '../entities/Contact'\nimport OrderSelect from '../components/OrderSelect'\nimport MemberSelect from '../components/MemberSelect'\nimport Modal from '../components/Modal'\nimport { ButtonGroup } from 'react-bootstrap'\nimport AddBillingReportStep2 from './AddBillingReportSteps/AddBillingReportStep2'\nimport Button from '../components/Button'\nimport { GET_BILLINGREPORT, EDIT_BILLINGREPORT, CHANGE_BILLINGREPORT_STATE } from '../graphql/BillingReportQueries'\nimport { useQuery, useMutation } from 'react-apollo'\nimport { DELETE_COMPENSATION, ADD_ORDERCOMPENSATIONS } from '../graphql/CompensationQueries'\nimport GraphQLTable from '../components/GraphQLTable'\nimport { PaginationSortDirections } from '../graphql/Interfaces'\nimport { GET_MY_ROLES, GET_MY_ID } from '../graphql/UserQueries'\nimport Table from '../components/Table'\nimport { UI } from '../actions/UIActions'\nimport { useDispatch } from 'react-redux'\n\n\nexport default function BillingReport(props: RouteComponentProps<{ id: string }>) {\n    const { loading, error, data, refetch } = useQuery<{ getBillingReport: BillingReportEntity.default }>(GET_BILLINGREPORT, { variables: { id: parseInt(props.match.params.id), fetchPolicy: 'cache-and-network' } })\n    const [billingReport, setBillingReport] = useState<BillingReportEntity.default>()\n    const [showModal, setShowModal] = useState(false)\n    const [editable, setEditable] = useState(false)\n    const [toDeleteCompensation, setToDeleteCompensation] = useState<OrderCompensation>()\n\n    const Å•oles = useQuery<{ me: { roles: AuthRoles[] } }>(GET_MY_ROLES)\n    const myId = useQuery<{ me: { id: number } }>(GET_MY_ID)\n\n    const [editBillingReportMutation] = useMutation(EDIT_BILLINGREPORT)\n    const [changeBillingReportStateMutation] = useMutation(CHANGE_BILLINGREPORT_STATE)\n    const [addOrderCompensationsMutation] = useMutation(ADD_ORDERCOMPENSATIONS)\n    const [deleteCompensationMutation] = useMutation(DELETE_COMPENSATION)\n    const dispatch = useDispatch()\n\n    if (loading) return <Loading />\n    if (error) return null\n\n    if (!billingReport && data?.getBillingReport) {\n        setBillingReport(data.getBillingReport)\n    }\n\n    async function refetchAndSet() {\n        const result = await refetch()\n        setBillingReport(result.data.getBillingReport)\n    }\n\n    function elementView(event: React.MouseEvent<HTMLButtonElement>) {\n        event.preventDefault()\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n\n            // open a new tap when the middle button is pressed (buttonID 1)\n            if (event.button == 1) {\n                window.open((document.location as Location).origin + '/compensation/' + id)\n            } else {\n                props.history.push('/compensation/' + id)\n            }\n        }\n    }\n\n    async function approve(): Promise<void> {\n        const result = await changeBillingReportStateMutation({\n            variables: {\n                id: data?.getBillingReport.id,\n                state: 'APPROVED'\n            }\n        })\n        if (result.errors) {\n            return\n        }\n        dispatch(UI.showSuccess('Bewilligt'))\n        refetchAndSet()\n    }\n\n    async function decline(): Promise<void> {\n        const result = await changeBillingReportStateMutation({\n            variables: {\n                id: data?.getBillingReport.id,\n                state: 'DECLINED'\n            }\n        })\n        if (result.errors) {\n            return\n        }\n        dispatch(UI.showError('Abgelehnt'))\n        refetchAndSet()\n    }\n\n    async function deleteCompensation(event: React.MouseEvent<HTMLButtonElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n            if (id) {\n                setToDeleteCompensation(billingReport?.compensations.find(c => c.id === parseInt(id || '')))\n                setShowModal(true)\n            }\n        }\n    }\n\n    async function deleteCompensationConfirmed() {\n        if (toDeleteCompensation) {\n            const result = await deleteCompensationMutation({\n                variables: {\n                    id: toDeleteCompensation.id\n                }\n            })\n            if (result.errors) {\n                return\n            }\n            dispatch(UI.showSuccess('Gespeichert'))\n            setShowModal(false)\n            setToDeleteCompensation(undefined)\n            refetchAndSet()\n        }\n    }\n\n\n    async function addCompensations(input: StringIndexed<any>) {\n        let compensationEntries: Array<{\n            from: Date,\n            until: Date,\n            billingReportId: number,\n            memberId: number,\n            date: Date\n        }> = []\n        if (billingReport) {\n            for (let i in input.vks) {\n                const entry = input.vks[i]\n                compensationEntries.push({\n                    from: entry.from,\n                    until: entry.until,\n                    billingReportId: billingReport.id,\n                    date: billingReport.date,\n                    memberId: entry.member.id\n                })\n            }\n        }\n\n        const result = await addOrderCompensationsMutation({\n            variables: {\n                data: compensationEntries\n            }\n        })\n\n        if (result.errors) {\n            return\n        }\n        dispatch(UI.showSuccess('Gespeichert'))\n        refetchAndSet()\n        setShowModal(false)\n    }\n\n    function onInputChange(name: string, value: any) {\n        const clone = { ...billingReport } as BillingReportEntity.default\n        // @ts-ignore\n        clone[name] = value\n        setBillingReport(clone)\n    }\n\n    function onSelectChange(state: string): (opts: Array<Contact> | Order) => void {\n        return (value: Array<Contact> | Order) => {\n            const clone = { ...billingReport } as BillingReportEntity.default\n            // @ts-ignore\n            clone[state] = value\n            if (state === 'order') {\n                // @ts-ignore\n                clone[state] = value[0]\n            }\n            setBillingReport(clone)\n        }\n    }\n\n    async function onAbort() {\n        setBillingReport(data?.getBillingReport)\n        setEditable(false)\n    }\n\n    async function onSave() {\n        if (billingReport) {\n            const result = await editBillingReportMutation({\n                variables: {\n                    data: {\n                        id: billingReport.id,\n                        orderId: parseInt(billingReport.order.id.toString()),\n                        date: billingReport.date,\n                        elIds: billingReport.els.map(e => parseInt(e.id.toString())),\n                        driverIds: billingReport.drivers.map(e => parseInt(e.id.toString())),\n                        food: billingReport.food,\n                        remarks: billingReport.remarks\n                    }\n                }\n            })\n            if (result.errors) {\n                return\n            }\n            dispatch(UI.showSuccess('Gespeichert'))\n            refetchAndSet()\n            setEditable(false)\n        }\n    }\n\n    function renderCompensationDeletionModal() {\n        if (toDeleteCompensation) {\n            return (\n                <Modal\n                    show={showModal}\n                    onHide={() => { setShowModal(false) }}\n                    header={<h3>{toDeleteCompensation.member.firstname + ' ' + toDeleteCompensation.member.lastname + ' vom  ' + new Date(toDeleteCompensation.date).toLocaleDateString()}</h3>}\n                    body={\n                        <span>\n                            {\n                                'Willst du die EntschÃ¤digung von ' +\n                                toDeleteCompensation.member.firstname + ' ' + toDeleteCompensation.member.lastname +\n                                ' vom  ' + new Date(toDeleteCompensation.date).toLocaleDateString() + ' mit einem Betrag von CHF' +\n                                toDeleteCompensation.amount + ' wirklich lÃ¶schen?'\n                            }\n                        </span>\n                    }\n                    footer={\n                        <ButtonGroup>\n                            <Button variant=\"danger\" onClick={deleteCompensationConfirmed}>LÃ¶schen</Button>\n                            <Button variant=\"secondary\" onClick={() => { setShowModal(false) }}>Abbrechen</Button>\n                        </ButtonGroup>\n                    }\n\n                />\n            )\n        }\n\n        return null\n    }\n\n    function renderCompensationsAddModal() {\n        if (!toDeleteCompensation) {\n            return (\n                <Modal\n                    show={showModal}\n                    onHide={() => setShowModal(false)}\n                    header={<h3>EntschÃ¤digungen hinzufÃ¼gen</h3>}\n                    body={\n                        <AddBillingReportStep2 onNext={addCompensations} onPrevious={() => { setShowModal(false); return Promise.resolve(true) }} />\n                    }\n                    footer={<div></div>}\n\n                />\n            )\n        }\n        return null\n    }\n\n    function renderInformations() {\n        if (billingReport) {\n            let statusBadgeClass = 'badge-success'\n            if (billingReport?.state === 'pending') statusBadgeClass = 'badge-warning'\n            if (billingReport?.state === 'declined') statusBadgeClass = 'badge-danger'\n\n            let panelActions = []\n            if (Å•oles.data?.me.roles.includes(AuthRoles.ADMIN) ||\n                Å•oles.data?.me.roles.includes(AuthRoles.BILLINGREPORTS_EDIT) ||\n                (billingReport?.state === 'pending' && billingReport.creator.id === myId.data?.me.id)) {\n                if (!editable) {\n                    panelActions.push(<Action icon=\"pencil-alt\" key=\"edit\" onClick={async () => setEditable(true)} roles={[AuthRoles.BILLINGREPORTS_EDIT]} />)\n                } else {\n                    panelActions.push(<Action icon=\"save\" key=\"save\" onClick={onSave} />)\n                    panelActions.push(<Action icon=\"times\" key=\"edit\" onClick={onAbort} />)\n                }\n            }\n\n            return (\n                <Panel title=\"Informationen\" actions={panelActions} className={(editable) ? 'editable' : ''}>\n                    <FormEntry id=\"orderTitle\" title=\"Auftrag\">\n                        {renderOrder()}\n                    </FormEntry>\n                    <FormEntry id=\"date\" title=\"Datum\" value={(billingReport.date) ? new Date(billingReport?.date).toISOString().split('T')[0] : ''} type='date' editable={editable} onChange={onInputChange}></FormEntry>\n                    <FormEntry id=\"creator\" title=\"Ersteller\">{(billingReport?.creator as User).displayName}</FormEntry>\n                    <FormEntry id=\"state\" title=\"Status\"><div className={\"badge \" + statusBadgeClass}>{billingReport?.state}</div></FormEntry>\n                    <FormEntry id=\"els\" title=\"ELs\">\n                        {renderEls()}\n                    </FormEntry>\n                    <FormEntry id=\"drivers\" title=\"Fahrer\">\n                        {renderDrivers()}\n                    </FormEntry>\n                    <FormEntry id=\"food\" title=\"Verpflegung\" value={billingReport?.food} type='checkbox' editable={editable} onChange={onInputChange}></FormEntry>\n                    <FormEntry id=\"remarks\" title=\"Bemerkungen\" value={billingReport?.remarks} type='textarea' editable={editable} onChange={onInputChange}></FormEntry>\n                </Panel>\n            )\n        }\n    }\n\n    function renderActions() {\n        const actions = [<Link to={`/order/${billingReport?.order.id}`} className=\"btn btn-block btn-outline-primary\">Auftrag Ã¶ffnen</Link>]\n        if (billingReport?.state === 'pending') {\n            actions.push(<Button id=\"approve\" block={true} variant=\"outline-success\" onClick={approve} roles={[AuthRoles.BILLINGREPORTS_APPROVE]}>Genehmigen</Button>)\n        }\n\n        return actions\n    }\n\n    function renderOrder() {\n        if (billingReport) {\n            if (editable) {\n                return <OrderSelect defaultValue={[billingReport?.order.id.toString()]} onChange={onSelectChange('order')} />\n            }\n\n            return (billingReport?.order).title\n        }\n    }\n\n\n    function renderEls() {\n        if (editable) {\n            return <MemberSelect defaultValue={billingReport?.els.map(el => el.id.toString())} isMulti={true} onChange={onSelectChange('els')} />\n        }\n\n        return billingReport?.els.map(el => el.firstname + ' ' + el.lastname).join(',')\n    }\n\n    function renderDrivers() {\n        if (editable) {\n            return <MemberSelect defaultValue={billingReport?.drivers.map(d => d.id.toString())} isMulti={true} onChange={onSelectChange('drivers')} />\n        }\n\n        return billingReport?.drivers.map(driver => driver.firstname + ' ' + driver.lastname).join(',')\n    }\n\n    return (\n        <Page title=\"Verrechnungsrapport\">\n            {renderCompensationDeletionModal()}\n            {renderCompensationsAddModal()}\n            <Row>\n                <Column className=\"col-md-6\">\n                    {renderInformations()}\n                </Column>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Actions\">\n                        {renderActions()}\n                    </Panel>\n                </Column>\n            </Row>\n            <Row>\n                <Column>\n                    <Panel title=\"VKs\" actions={[<Action icon=\"plus\" onClick={async () => setShowModal(true)} />]}>\n                        <Table<OrderCompensation>\n                            columns={[\n                                { text: 'Name', keys: { 'member': ['firstname', 'lastname'] }, sortable: true },\n                                { text: 'Von', keys: ['from'], format: 'toLocaleTimeString', sortable: true },\n                                { text: 'Bis', keys: ['until'], format: 'toLocaleTimeString', sortable: true },\n                                { text: 'Verrechnen', keys: ['charge'], sortable: true },\n                                { text: 'Betrag', keys: ['amount'], prefix: 'CHF ', sortable: true, format: 'toFixed(2)' },\n                                { text: 'Ausbezahlt', keys: ['paied'], sortable: true },\n                                {\n                                    text: 'Actions', keys: ['_id'], content: <ButtonGroup>{[\n                                        <Button variant=\"success\" className=\"view\" onClick={elementView}><FontAwesomeIcon icon=\"eye\" /></Button>,\n                                        <Button variant=\"danger\" className=\"delete\" onClick={deleteCompensation} roles={[AuthRoles.BILLINGREPORTS_EDIT]}><FontAwesomeIcon icon=\"trash\" /></Button>\n                                    ]}</ButtonGroup>\n                                }\n                            ]}\n                            defaultSort={{\n                                keys: ['from'],\n                                direction: 'desc'\n                            }}\n                            data={billingReport?.compensations.map(c => { return { ...c, from: new Date(c.from), until: new Date(c.until) } }) || []}\n                        ></Table>\n                    </Panel>\n                </Column>\n            </Row>\n        </Page >\n    )\n}","import React, { useState } from \"react\"\nimport { Page } from \"../components/Page\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport { RouteComponentProps } from \"react-router\"\nimport { useMutation } from \"react-apollo\"\nimport MemberSelect from '../components/MemberSelect'\nimport { ADD_CUSTOMCOMPENSATION } from '../graphql/CompensationQueries'\nimport { Button } from \"react-bootstrap\"\nimport Contact from \"../entities/Contact\"\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\n\nexport default function AddCollectionPoint(props: RouteComponentProps) {\n    let formEl: HTMLFormElement\n    const [member, setMember] = useState<number>()\n    const [date, setDate] = useState<Date>()\n    const [description, setDescription] = useState<string>()\n    const [amount, setAmount] = useState<number>()\n    const [addCustomCompensation, { data }] = useMutation(ADD_CUSTOMCOMPENSATION)\n    const dispatch = useDispatch()\n\n    function onInputChange(event: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        switch (name) {\n            case 'date':\n                setDate(new Date(value))\n                break\n            case 'description':\n                setDescription(value)\n                break\n            case 'amount':\n                setAmount(parseFloat(value))\n                break\n        }\n    }\n\n    function onSelectChange(opt: Contact[]) {\n        if (opt) {\n            setMember(opt[0].id)\n        } else {\n            setMember(undefined)\n        }\n    }\n\n    async function save(event: React.MouseEvent<HTMLButtonElement>): Promise<boolean> {\n        event.preventDefault()\n        if (formEl) {\n            let valid = formEl.checkValidity()\n            formEl.className = 'was-validated'\n\n            if (valid) {\n                const result = await addCustomCompensation({\n                    variables: {\n                        data: {\n                            memberId: member,\n                            date,\n                            description,\n                            amount\n                        }\n                    }\n                })\n                if (result.errors) {\n                    return false\n                }\n                dispatch(UI.showSuccess('Gespeichert'))\n                props.history.push('/compensations')\n            } else {\n                dispatch(UI.showError('Korrigiere zuerst die Fehler'))\n            }\n            return valid\n        }\n        dispatch(UI.showError('Korrigiere zuerst die Fehler'))\n        return false\n    }\n\n    return (\n        <Page title=\"EntschÃ¤digung hinzufÃ¼gen\">\n            <Row>\n                <Column>\n                    <Panel>\n                        <form id=\"addCompensation\" ref={(ref: HTMLFormElement) => { formEl = ref }}>\n                            <h5>Mitglied</h5>\n                            <MemberSelect onChange={onSelectChange} isMulti={false} defaultValue={(member) ? [member.toString()] : undefined} />\n                            <br></br>\n\n                            <h5>Datum</h5>\n                            <input name=\"date\" type=\"date\" className=\"form-control\" value={(date) ? date.toISOString().split('T')[0] : undefined} onChange={onInputChange} required={true} />\n                            <br></br>\n\n                            <h5>Beschreibung</h5>\n                            <input name=\"description\" type=\"text\" className=\"form-control\" value={description} onChange={onInputChange} required={true} />\n                            <br></br>\n\n                            <h5>Betrag</h5>\n                            <div className=\"input-group mb-2\">\n                                <div className=\"input-group-prepend\">\n                                    <div className=\"input-group-text\">CHF</div>\n                                </div>\n                                <input type=\"number\" step=\"0.05\" className=\"form-control\" name=\"amount\" value={amount} onChange={onInputChange} placeholder=\"0.00\" required={true} />\n                            </div>\n                            <br></br>\n\n                            <Button variant=\"primary\" block={true} onClick={save}>Speichern</Button>\n                        </form>\n                    </Panel>\n                </Column>\n            </Row>\n        </Page >\n    )\n}","import React from 'react'\nimport { Page } from \"../components/Page\"\nimport Loading from \"../components/Loading\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport FormEntry from \"../components/FormEntry\"\nimport { Link, RouteComponentProps } from \"react-router-dom\"\nimport Error404 from \"../components/Errors/404\"\nimport Payout from \"../entities/Payout\"\nimport Button from \"../components/Button\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport { useQuery, useMutation } from \"react-apollo\"\nimport { GET_COMPENSATION, APPROVE_COMPENSATION } from \"../graphql/CompensationQueries\"\nimport CustomCompensation from \"../entities/CustomCompensation\"\nimport OrderCompensation from \"../entities/OrderCompensation\"\nimport { UI } from '../actions/UIActions'\nimport { useDispatch } from 'react-redux'\nimport { Error403 } from '../components/Errors/403'\n\nexport default function Compensation(props: RouteComponentProps<{ id: string }>) {\n    const { loading, data, error, refetch } = useQuery(GET_COMPENSATION, { variables: { id: parseInt(props.match.params.id) }, fetchPolicy: 'cache-and-network' })\n    const [approveMutation] = useMutation<{ getOrderCompensation: OrderCompensation, getCustomCompensation: CustomCompensation }>(APPROVE_COMPENSATION)\n    const dispatch = useDispatch()\n\n    if (error?.message && error?.message.indexOf('Access denied!') > -1) {\n        return <Error403 />\n    }\n\n    if (loading || !data) return <Loading />\n\n    let compensation: CustomCompensation | OrderCompensation\n    if (data.getOrderCompensation) {\n        compensation = data.getOrderCompensation as OrderCompensation\n    } else {\n        compensation = data.getCustomCompensation as CustomCompensation\n    }\n\n    if (!compensation) return <Error404 />\n\n    async function approve() {\n        const result = await approveMutation({ variables: { id: compensation.id } })\n        if (result.errors) {\n            return false\n        }\n        dispatch(UI.showSuccess('Bewilligt'))\n\n        const response = await refetch({ id: parseInt(props.match.params.id) })\n        compensation = response.data.getOrderCompensation || response.data.getCustomCompensation\n    }\n\n    function renderActions() {\n        const actions = [<Link to={\"/contact/\" + compensation.member.id} className=\"btn btn-block btn-outline-primary\">Kontakt Ã¶ffnen</Link>]\n\n        if (!compensation.approved) {\n            actions.push(<Button id=\"approve\" block={true} variant=\"outline-success\" onClick={approve} roles={[AuthRoles.COMPENSATIONS_APPROVE]}>Genehmigen</Button>)\n        }\n\n        return actions\n    }\n\n    function renderBillingReport() {\n        if ((compensation as OrderCompensation).billingReport) {\n            compensation = compensation as OrderCompensation\n            let statusBadgeClass = 'badge-success'\n            if (compensation.billingReport.state === 'pending') {\n                statusBadgeClass = 'badge-warning'\n            }\n\n            return (\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Verrechnungsrapport\">\n                        <FormEntry id=\"orderNr\" title=\"Auftragsnummer\">{compensation.billingReport.order.documentNr}</FormEntry>\n                        <FormEntry id=\"orderNr\" title=\"Auftrag\">{compensation.billingReport.order.title}</FormEntry>\n                        <FormEntry id=\"state\" title=\"Verrechnungsrapportstatus\"><div className={\"badge \" + statusBadgeClass}>{compensation.billingReport.state}</div></FormEntry>\n                        <FormEntry id=\"from\" title=\"Von\">{new Date(compensation.from).toLocaleTimeString()}</FormEntry>\n                        <FormEntry id=\"until\" title=\"Bis\">{new Date(compensation.until).toLocaleTimeString()}</FormEntry>\n                        <FormEntry id=\"charge\" title=\"Verrechnen\">{(compensation.charge) ? 'âœ“' : 'â¨¯'}</FormEntry>\n                        <Link to={\"/order/\" + compensation.billingReport.order.id} className=\"btn btn-outline-primary btn-block\">Auftrag</Link>\n                        <Link to={\"/billing-report/\" + compensation.billingReport.id} className=\"btn btn-outline-primary btn-block\">Verrechnungsrapport</Link>\n                    </Panel>\n                </Column>\n            )\n        }\n    }\n\n    let statusBadgeClass = 'badge-success'\n    if (!compensation.approved) {\n        statusBadgeClass = 'badge-warning'\n    }\n\n    return (\n        <Page title=\"EntschÃ¤digung\">\n            <Row>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Informationen\">\n                        <FormEntry id=\"member\" title=\"Mitglied\">{compensation.member.firstname} {compensation.member.lastname}</FormEntry>\n                        <FormEntry id=\"date\" title=\"Datum\">{new Date(compensation.date).toLocaleDateString()}</FormEntry>\n                        <FormEntry id=\"amount\" title=\"Betrag\">CHF {compensation.amount.toFixed(2)}</FormEntry>\n                        {\n                            (compensation as CustomCompensation).description &&\n                            <FormEntry id=\"description\" title=\"Beschreibung\">{(compensation as CustomCompensation).description}</FormEntry>\n                        }\n                        <FormEntry id=\"state\" title=\"Status\"><div className={\"badge \" + statusBadgeClass}>{(compensation.approved) ? 'Bewilligt' : 'Ausstehend'}</div></FormEntry>\n                        <FormEntry id=\"creator\" title=\"Ersteller\">{compensation.creator.displayName}</FormEntry>\n                    </Panel>\n                </Column>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Actions\">\n                        {renderActions()}\n                    </Panel>\n                </Column>\n            </Row>\n            <Row>\n                {renderBillingReport()}\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Auszahlung\">\n                        <FormEntry id=\"paied\" title=\"Ausbezahlt\">{(compensation.paied) ? 'âœ“' : 'â¨¯'}</FormEntry>\n                        {(compensation.payout) ? (<Link to={\"/payout/\" + (compensation.payout as Payout).id + '/' + compensation.member.id} className=\"btn btn-outline-primary btn-block\">Auszahlung</Link>) : (<p></p>)}\n                        {(compensation.bexioBill) ? (<a href={`https://office.bexio.com/index.php/kb_bill/show/id/${compensation.bexioBill}`} target=\"_blank\" className=\"btn btn-outline-primary btn-block\">Bexio Lieferantenrechnung</a>) : (<p></p>)}\n                        {(compensation.transferCompensation) ? (<Link to={`/compensation/${compensation.transferCompensation.id}`} className=\"btn btn-outline-primary btn-block\">Ãœbertrag</Link>) : (<p></p>)}\n                    </Panel>\n                </Column>\n            </Row>\n        </Page >\n    )\n}","import React from \"react\"\nimport { Page } from \"../components/Page\"\nimport Column from \"../components/Column\"\nimport Row from \"../components/Row\"\nimport Panel from \"../components/Panel\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { useQuery } from \"react-apollo\"\nimport { GET_ALL_MEMBERS } from \"../graphql/ContactQueries\"\nimport Loading from \"../components/Loading\"\nimport Contact from \"../entities/Contact\"\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\n\nexport default function MailingLists() {\n    const { loading, error, data } = useQuery<{ getMembersAll: Contact[] }>(GET_ALL_MEMBERS)\n    const dispatch = useDispatch()\n\n    if (loading || !data) {\n        return (<Page title=\"Verteiler\"><Loading /></Page>)\n    }\n\n    let mailingLists = { all: ([] as Array<string>), drivers: ([] as Array<string>), vks: ([] as Array<string>), squad: ([] as Array<string>), vst: ([] as Array<string>), con: ([] as Array<string>) }\n\n    for (let member of data.getMembersAll) {\n        mailingLists.all.push(member.mail)\n        if (member.mailSecond) mailingLists.all.push(member.mailSecond)\n        mailingLists.all = mailingLists.all.concat(member.moreMails || [])\n\n        if (member.contactGroups) {\n            // Drivers\n            if (member.contactGroups.find(group => group.bexioId === 9)) {\n                mailingLists.drivers.push(member.mail)\n                if (member.mailSecond) mailingLists.drivers.push(member.mailSecond)\n                mailingLists.drivers = mailingLists.drivers.concat(member.moreMails || [])\n            }\n\n            // VKs\n            if (member.contactGroups.find(group =>\n                group.bexioId === 17 ||\n                group.bexioId === 13 ||\n                group.bexioId === 11 ||\n                group.bexioId === 12 ||\n                group.bexioId === 28 ||\n                group.bexioId === 29 ||\n                group.bexioId === 15 ||\n                group.bexioId === 27 ||\n                group.bexioId === 26 ||\n                group.bexioId === 10 ||\n                group.bexioId === 14\n            )) {\n                mailingLists.vks.push(member.mail)\n                if (member.mailSecond) mailingLists.vks.push(member.mailSecond)\n                mailingLists.vks = mailingLists.vks.concat(member.moreMails || [])\n            }\n\n            // Squad\n            if (member.contactGroups.find(group =>\n                group.bexioId === 13 ||\n                group.bexioId === 12 ||\n                group.bexioId === 28 ||\n                group.bexioId === 29 ||\n                group.bexioId === 15 ||\n                group.bexioId === 14\n            )) {\n                mailingLists.squad.push(member.mail)\n                if (member.mailSecond) mailingLists.squad.push(member.mailSecond)\n                mailingLists.squad = mailingLists.squad.concat(member.moreMails || [])\n            }\n\n            // VST\n            if (member.contactGroups.find(group => group.bexioId === 16)) {\n                mailingLists.vst.push(member.mail)\n                if (member.mailSecond) mailingLists.vst.push(member.mailSecond)\n                mailingLists.vst = mailingLists.vst.concat(member.moreMails || [])\n            }\n\n            // Condor\n            if (member.contactGroups.find(group => group.bexioId === 22)) {\n                mailingLists.con.push(member.mail)\n                if (member.mailSecond) mailingLists.con.push(member.mailSecond)\n                mailingLists.con = mailingLists.con.concat(member.moreMails || [])\n            }\n        }\n    }\n\n    function copy(data: string) {\n        (navigator as any).permissions.query({ name: \"clipboard-write\" }).then((result: { state: string }) => {\n            if (result.state == \"granted\" || result.state == \"prompt\") {\n                (navigator as any).clipboard.writeText(data)\n                dispatch(UI.showSuccess('Kopiert'))\n            }\n        })\n    }\n\n    function addCopy(data: string) {\n        return (\n            <div className=\"input-group-prepend\">\n                <button className=\"btn btn-outline-secondary\" id=\"btnGroupAddon\" onClick={async () => copy(data)}>\n                    <FontAwesomeIcon icon=\"clipboard\" />\n                </button>\n            </div>\n        )\n    }\n\n    return (\n        <Page title=\"Verteiler\">\n            <Row>\n                <Column className=\"col-md-4\">\n                    <Panel title=\"Mitglieder\">\n                        <div className=\"input-group\">\n                            <input className=\"form-control\" readOnly value={mailingLists.all.join(';')}></input>\n                            {addCopy(mailingLists.all.join(';'))}\n                        </div>\n                    </Panel>\n                </Column>\n\n                <Column className=\"col-md-4\">\n                    <Panel title=\"VKs (ohne Fahrer und Condor)\">\n                        <div className=\"input-group\">\n                            <input className=\"form-control\" readOnly value={mailingLists.vks.join(';')}></input>\n                            {addCopy(mailingLists.vks.join(';'))}\n                        </div>\n                    </Panel>\n                </Column>\n\n                <Column className=\"col-md-4\">\n                    <Panel title=\"Kader\">\n                        <div className=\"input-group\">\n                            <input className=\"form-control\" readOnly value={mailingLists.squad.join(';')}></input>\n                            {addCopy(mailingLists.squad.join(';'))}\n                        </div>\n                    </Panel>\n                </Column>\n            </Row>\n            <Row>\n                <Column className=\"col-md-4\">\n                    <Panel title=\"Fahrer\">\n                        <div className=\"input-group\">\n                            <input className=\"form-control\" readOnly value={mailingLists.drivers.join(';')}></input>\n                            {addCopy(mailingLists.drivers.join(';'))}\n                        </div>\n                    </Panel>\n                </Column>\n\n                <Column className=\"col-md-4\">\n                    <Panel title=\"Vorstand\">\n                        <div className=\"input-group\">\n                            <input className=\"form-control\" readOnly value={mailingLists.vst.join(';')}></input>\n                            {addCopy(mailingLists.vst.join(';'))}\n                        </div>\n                    </Panel>\n                </Column>\n\n                <Column className=\"col-md-4\">\n                    <Panel title=\"Condor\">\n                        <div className=\"input-group\">\n                            <input className=\"form-control\" readOnly value={mailingLists.con.join(';')}></input>\n                            {addCopy(mailingLists.con.join(';'))}\n                        </div>\n                    </Panel>\n                </Column>\n            </Row>\n        </Page >\n    )\n}","import Action from \"../components/Action\"\nimport React from \"react\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport GraphQLDataList from \"../components/GraphQLDataList\"\nimport { GET_COLLECTIONPOINTS } from \"../graphql/CollectionPointQueries\"\nimport { RouteComponentProps } from \"react-router\"\nimport CollectionPoint from \"../entities/CollectionPoint\"\n\n\nexport default function CollectionPoints(props: RouteComponentProps) {\n    return (\n        <GraphQLDataList<CollectionPoint>\n            query={GET_COLLECTIONPOINTS}\n            title='Abholpunkte'\n            panelActions={[<Action icon=\"plus\" to=\"/draft/collection-point/add\" roles={[AuthRoles.DRAFT_CREATE, AuthRoles.DRAFT_EDIT]} />]}\n            viewLocation='/collection-point/'\n            tableColumns={[\n                { text: 'Name', keys: ['name'], sortable: true },\n                { text: 'Abholpunkt', keys: ['address', 'postcode', 'city'], link: true, linkPrefix: 'https://www.google.com/maps/search/', sortKey: 'address', sortable: true },\n            ]}\n            defaultSortBy='name'\n            searchable={true}\n            {...props}\n        />\n    )\n}","import React, { useState } from \"react\"\nimport { Page } from \"../components/Page\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport { RouteComponentProps } from \"react-router\"\nimport { useMutation } from \"react-apollo\"\nimport { ADD_COLLECTIONPOINT } from \"../graphql/CollectionPointQueries\"\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\n\nexport default function AddCollectionPoint(props: RouteComponentProps) {\n    let formEl: HTMLFormElement\n    const [name, setName] = useState('')\n    const [address, setAddress] = useState('')\n    const [postcode, setPostcode] = useState('')\n    const [city, setCity] = useState('')\n    const [addCollectionPoint, { data }] = useMutation(ADD_COLLECTIONPOINT)\n    const dispatch = useDispatch()\n\n    function onInputChange(event: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) {\n        const target = event.target\n        const value = target.value\n        const name = target.name\n\n        switch (name) {\n            case 'name':\n                setName(value)\n                break\n            case 'address':\n                setAddress(value)\n                break\n            case 'postcode':\n                setPostcode(value)\n                break\n            case 'city':\n                setCity(value)\n                break\n        }\n    }\n\n    async function save(event: React.MouseEvent<HTMLButtonElement>): Promise<boolean> {\n        event.preventDefault()\n        if (formEl) {\n            let valid = formEl.checkValidity()\n            formEl.className = 'was-validated'\n\n            if (valid) {\n                const result = await addCollectionPoint({\n                    variables: {\n                        data: {\n                            name,\n                            address,\n                            postcode,\n                            city\n                        }\n                    }\n                })\n                if (result.errors) {\n                    return false\n                }\n                dispatch(UI.showSuccess('Gespeichert'))\n                props.history.push('/draft/collection-points')\n            } else {\n                dispatch(UI.showError('Korrigiere zuerst die Fehler'))\n            }\n            return valid\n        }\n        dispatch(UI.showError('Korrigiere zuerst die Fehler'))\n        return false\n    }\n\n    return (\n        <Page title=\"Abholpunkt HinzufÃ¼gen\">\n            <Row>\n                <Column>\n                    <Panel>\n                        <form ref={(ref: HTMLFormElement) => formEl = ref}>\n                            <h5>Name</h5>\n                            <input type=\"text\" name=\"name\" id=\"name\" className='form-control' value={name} onChange={onInputChange} required={true} />\n                            <br></br>\n                            <h5>Addresse</h5>\n                            <input type=\"text\" name=\"address\" id=\"address\" className='form-control' value={address} onChange={onInputChange} required={true} />\n                            <br></br>\n                            <h5>PLZ</h5>\n                            <input type=\"text\" minLength={4} maxLength={4} name=\"postcode\" id=\"postcode\" className='form-control' value={postcode} onChange={onInputChange} required={true} />\n                            <br></br>\n                            <h5>Ort</h5>\n                            <input type=\"text\" name=\"city\" id=\"city\" className='form-control' value={city} onChange={onInputChange} required={true} />\n                            <br></br>\n                            <button className=\"btn btn-primary btn-block\" onClick={save}>Speichern</button>\n                        </form>\n                    </Panel>\n                </Column>\n            </Row>\n        </Page >\n    )\n}","import { gql } from \"apollo-boost\";\n\n\nexport const GET_PAYOUTS = gql`\n  query GET_PAYOUTS(\n    $cursor: Int\n    $limit: Int\n    $sortBy: String\n    $sortDirection: String\n  ) {\n    getAllPayouts(\n      cursor: $cursor\n      limit: $limit\n      sortBy: $sortBy\n      sortDirection: $sortDirection\n    ) {\n      cursor\n      hasMore\n      total\n      items {\n        id\n        from\n        until\n        total\n      }\n    }\n  }\n`;\n\nexport const GET_PAYOUT = gql`\n  query GET_PAYOUT($id: Int!) {\n    getPayout(id: $id) {\n      id,\n      from,\n      until,\n      compensations {\n        id,\n        member {\n          id\n          firstname\n          lastname\n        }\n        amount\n      }\n      total\n    }\n  }\n`\n\n\nexport const ADD_PAYOUT = gql`\n  mutation ADD_PAYOUT($until: DateTime!, $from: DateTime) {\n    addPayout(until: $until, from: $from) {\n      id\n    }\n  }\n`;\n\nexport const SEND_PAYOUT_MAIL = gql`\n  mutation SEND_PAYOUT_MAIL($id: Int!, $memberIds: [Int!]) {\n    sendPayoutMails(id: $id, memberIds: $memberIds)\n  }\n`\n\nexport const SEND_PAYOUT_BEXIO = gql`\n  mutation SEND_PAYOUT_BEXIO($id: Int!, $memberIds: [Int!]) {\n    send2Bexio(id: $id, memberIds: $memberIds)\n  }\n`\n\nexport const RECLAIM_PAYOUT = gql`\n  mutation RECLAIM_PAYOUT($id: Int!) {\n    reclaimPayout(id: $id) {\n      id\n    }\n  }\n`\n\nexport const TRANSFER_PAYOUT = gql`\n  mutation TRANSFER_PAYOUT($id: Int!, $memberIds: [Int!]!) {\n    transferPayout(id: $id, memberIds: $memberIds)\n  }\n`","import React from 'react'\nimport { RouteComponentProps } from \"react-router\"\nimport GraphQLDataList from \"../components/GraphQLDataList\"\nimport { GET_PAYOUTS } from '../graphql/PayoutQueries'\nimport { PaginationSortDirections } from '../graphql/Interfaces'\n\n\nexport default function Payouts(props: RouteComponentProps) {\n    return (\n        <GraphQLDataList\n            query={GET_PAYOUTS}\n            title='Auszahlungen'\n            viewLocation='/payout/'\n            tableColumns={[\n                { text: 'Von', keys: ['from'], sortable: true, format: 'toLocaleDateString' },\n                { text: 'Bis', keys: ['until'], sortable: true, format: 'toLocaleDateString' },\n                { text: 'Total', keys: ['total'], sortable: true, prefix: 'CHF ', format: 'toFixed(2)' }\n            ]}\n            defaultSortBy='until'\n            defaultSortDirection={PaginationSortDirections.DESC}\n            {...props}\n        />\n    )\n}","import React, { useState } from \"react\"\nimport { Page } from \"../components/Page\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport Loading from \"../components/Loading\"\nimport Table from \"../components/Table\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport FormEntry from \"../components/FormEntry\"\nimport Button from \"../components/Button\"\nimport Config from \"../Config\"\nimport Modal from '../components/Modal'\nimport { ButtonGroup } from \"react-bootstrap\"\nimport Contact from \"../entities/Contact\"\nimport StringIndexed from \"../interfaces/StringIndexed\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport { RouteComponentProps } from \"react-router-dom\"\nimport { useQuery, useMutation } from \"react-apollo\"\nimport { GET_PAYOUT, SEND_PAYOUT_MAIL, SEND_PAYOUT_BEXIO, RECLAIM_PAYOUT, TRANSFER_PAYOUT } from \"../graphql/PayoutQueries\"\nimport Compensation from \"../entities/Compensation\"\nimport axios from 'axios'\nimport { default as PayoutEntity } from '../entities/Payout'\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\n\nexport default function Payout(props: RouteComponentProps<{ id: string }>) {\n    const payout = useQuery<{ getPayout: PayoutEntity }>(GET_PAYOUT, { variables: { id: parseInt(props.match.params.id) } })\n\n    const [showModal, setShowModal] = useState(false)\n    const [modalType, setModalType] = useState<'bexio' | 'mail'>()\n    const [selected, setSelected] = useState<number[]>([])\n\n    const [sendMailMutation] = useMutation(SEND_PAYOUT_MAIL)\n    const [sendBexioMutation] = useMutation(SEND_PAYOUT_BEXIO)\n    const [reclaimMutation] = useMutation(RECLAIM_PAYOUT)\n    const [transferMutation] = useMutation(TRANSFER_PAYOUT)\n\n    const dispatch = useDispatch()\n\n    function onCheck(event: React.ChangeEvent<HTMLInputElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n\n            if (id) {\n                const newId = parseInt(id)\n                if (selected.indexOf(newId) > -1) {\n                    setSelected([...selected.filter(el => el !== newId)])\n                } else {\n                    setSelected([...selected, parseInt(id)])\n                }\n            }\n        }\n    }\n\n    async function elementView(event: React.MouseEvent<HTMLButtonElement>): Promise<void> {\n        event.preventDefault()\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n\n            // open a new tap when the middle button is pressed (buttonID 1)\n            if (event.button == 1) {\n                window.open((document.location as Location).origin + props.history.location.pathname + `/${id}`)\n            } else {\n                props.history.push(props.history.location.pathname + `/${id}`)\n            }\n        }\n    }\n\n    async function sendMails(): Promise<void> {\n        const result = sendMailMutation({ variables: { id: payout.data?.getPayout.id, memberIds: selected } })\n        dispatch(UI.showSuccess('Mailversand gestarted'))\n        setShowModal(false)\n    }\n\n    async function sendToBexio(): Promise<void> {\n        sendBexioMutation({ variables: { id: payout.data?.getPayout.id, memberIds: selected } })\n        dispatch(UI.showSuccess('BexioÃ¼bertrag gestarted'))\n        setShowModal(false)\n    }\n\n    async function reclaim(): Promise<void> {\n        const result = await reclaimMutation({ variables: { id: payout.data?.getPayout.id } })\n        if (result.errors) {\n            return\n        }\n        dispatch(UI.showSuccess('Abgeschlossen'))\n    }\n\n    async function transfer(): Promise<void> {\n        if (selected.length > 0) {\n            const result = await transferMutation({ variables: { id: payout.data?.getPayout.id, memberIds: selected } })\n            if (result.errors) {\n                return\n            }\n            dispatch(UI.showSuccess('Ãœbertragen'))\n            return\n        }\n        dispatch(UI.showError('Zuerst eine Auswahl tÃ¤tigen'))\n    }\n\n    async function downloader(blob: Blob, filename: string) {\n        const url = window.URL.createObjectURL(blob)\n        const link = document.createElement('a')\n        link.href = url\n        link.download = filename\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n    }\n\n    async function getBankingXml() {\n        if (payout.data) {\n            const response = await axios({\n                method: 'POST',\n                url: `${Config.apiEndpoint}/api/payouts/xml`,\n                data: { payoutId: payout.data?.getPayout.id, memberIds: selected },\n                withCredentials: true,\n                timeout: 600000\n            })\n            downloader(new Blob([response.data]), `Soldperiode_${(new Date(payout.data?.getPayout.from) > new Date('1970-01-01')) ? new Date(payout.data?.getPayout.from).toLocaleDateString() : ''}_-_${new Date(payout.data?.getPayout.until).toLocaleDateString()}.xml`)\n        }\n    }\n\n    function renderMailModal() {\n        if (selected.length === 0) {\n            return (\n                <Modal\n                    show={showModal}\n                    header={<h3>E-Mails versenden</h3>}\n                    body={\n                        <span>\n                            Willst du wirklich eine E-Mail <b>an alle</b> mit der EntschÃ¤digungsauszahlung senden?\n                    </span>\n                    }\n                    footer={<ButtonGroup>\n                        <Button variant=\"success\" onClick={sendMails}>Senden</Button>\n                        <Button variant=\"danger\" onClick={async () => { setShowModal(false) }}>Abbrechen</Button>\n                    </ButtonGroup>}\n\n                />\n            )\n        } else {\n            return (\n                <Modal\n                    show={showModal}\n                    header={<h3>E-Mails versenden</h3>}\n                    body={\n                        <span>\n                            Willst du wirklich eine E-Mail <b>an folgende Personen</b> mit der EntschÃ¤digungsauszahlung senden?\n                        <ul>\n                                {selected.map(el => {\n                                    const member: Contact | undefined = payout.data?.getPayout.compensations.find(c => c.member.id === el)?.member\n                                    return (<li>{member?.lastname} {member?.firstname}</li>)\n                                })}\n                            </ul>\n                        </span>\n                    }\n                    footer={<ButtonGroup>\n                        <Button variant=\"success\" onClick={sendMails}>Senden</Button>\n                        <Button variant=\"danger\" onClick={async () => { setShowModal(false) }}>Abbrechen</Button>\n                    </ButtonGroup>}\n\n                />\n            )\n        }\n    }\n\n    function renderBexioModal() {\n        if (selected.length === 0) {\n            return (\n                <Modal\n                    show={showModal}\n                    header={<h3>Bexio Ãœbertrag</h3>}\n                    body={\n                        <span>\n                            Willst du wirklich <b>alle</b> EntschÃ¤digungen an Bexio Ã¼bertragen?\n                    </span>\n                    }\n                    footer={<ButtonGroup>\n                        <Button variant=\"success\" onClick={sendToBexio}>Ja</Button>\n                        <Button variant=\"danger\" onClick={async () => { setShowModal(false) }}>Nein</Button>\n                    </ButtonGroup>}\n\n                />\n            )\n        } else {\n            return (\n                <Modal\n                    show={showModal}\n                    header={<h3>Bexio Ãœbertrag</h3>}\n                    body={\n                        <span>\n                            Willst du wirklich <b>folgende EntschÃ¤digungen</b> an Bexio Ã¼bertragen?\n                        <ul>\n                                {selected.map(el => {\n                                    const member: Contact | undefined = payout.data?.getPayout.compensations.find(c => c.member.id === el)?.member\n                                    return (<li>{member?.lastname} {member?.firstname}</li>)\n                                })}\n                            </ul>\n                        </span>\n                    }\n                    footer={<ButtonGroup>\n                        <Button variant=\"success\" onClick={sendToBexio}>Ja</Button>\n                        <Button variant=\"danger\" onClick={async () => { setShowModal(false) }}>Abbrechen</Button>\n                    </ButtonGroup>}\n\n                />\n            )\n        }\n    }\n\n\n    function renderModal() {\n        if (modalType === 'mail') {\n            return renderMailModal()\n        } else if (modalType === 'bexio') {\n            return renderBexioModal()\n        } else {\n            return null\n        }\n    }\n\n\n    if (!payout.data || payout.loading) {\n        return (<Page title=\"Loading...\"><Loading /></Page>)\n    }\n\n    const data: StringIndexed<{ id: number, member: Contact, total: number }> = {}\n    for (let compensation of payout.data?.getPayout.compensations as Compensation[]) {\n        if (!data.hasOwnProperty(compensation.member.id)) {\n            data[compensation.member.id] = {\n                id: compensation.member.id,\n                member: compensation.member,\n                total: 0\n            }\n        }\n\n        const rec = data[compensation.member.id]\n        rec.total = rec.total + compensation.amount\n        data[compensation.member.id] = rec\n    }\n\n    return (\n        <Page title={`Auszahlung ${new Date(payout.data?.getPayout.from).toLocaleDateString()} - ${new Date(payout.data?.getPayout.until).toLocaleDateString()}`}>\n            <Row>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Informationen\">\n                        <FormEntry id=\"from\" title=\"Von\" value={new Date(payout.data?.getPayout.from).toLocaleDateString()} type=\"date\"></FormEntry>\n                        <FormEntry id=\"until\" title=\"Bis\" value={new Date(payout.data?.getPayout.until).toLocaleDateString()} type=\"date\"></FormEntry>\n                        <FormEntry id=\"countCompensations\" title=\"Anzahl EntschÃ¤diungen\" value={payout.data?.getPayout.compensations.length} editable={false}></FormEntry>\n                        <FormEntry id=\"total\" title=\"Total\" value={`CHF ${payout.data?.getPayout.total.toFixed(2)}`} ></FormEntry>\n                    </Panel>\n                </Column>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Actions\">\n                        <a className=\"btn btn-block btn-outline-primary\" target=\"_blank\" href={`${Config.apiEndpoint}/api/payouts/${payout.data?.getPayout.id}/pdf`} >PDF</a>\n                        <Button block={true} variant=\"outline-primary\" roles={[AuthRoles.PAYOUTS_SEND]} onClick={async () => { setShowModal(true); setModalType('mail') }}>BestÃ¤tigung E-Mails verschicken</Button>\n                        <Button block={true} variant=\"outline-primary\" roles={[AuthRoles.PAYOUTS_SEND]} onClick={async () => { setShowModal(true); setModalType('bexio') }}>An Bexio Ã¼bertragen</Button>\n                        <Button block={true} variant=\"outline-primary\" onClick={() => getBankingXml()}>Banking XML herunterladen</Button>\n                        <Button block={true} variant=\"outline-primary\" onClick={reclaim}>Neu Berechnen</Button>\n                        <Button block={true} variant=\"outline-primary\" roles={[AuthRoles.PAYOUTS_SEND]} onClick={() => transfer()}>Ãœbertragen</Button>\n                    </Panel>\n                </Column>\n            </Row>\n            <Row>\n                <Column>\n                    <Panel title=\"EntschÃ¤diungen\">\n                        <Table<{ id: number, member: Contact, total: number }>\n                            columns={[\n                                { text: 'Mitglied', keys: { member: ['lastname', 'firstname'] }, sortable: true },\n                                { text: 'Betrag', keys: ['total'], prefix: 'CHF ', sortable: true, format: 'toFixed(2)' },\n                                {\n                                    text: 'Actions', keys: ['id'], content:\n                                        <div className=\"btn-group\">\n                                            <Button variant=\"success\" className=\"view\" onClick={elementView}><FontAwesomeIcon icon=\"eye\" /></Button>\n                                        </div>\n                                }\n                            ]}\n                            checkable={true}\n                            onCheck={onCheck}\n                            defaultSort={{ keys: ['_member.lastname', 'firstname'], direction: 'asc' }}\n                            data={data}\n                        ></Table>\n                    </Panel>\n                </Column>\n            </Row>\n            {renderModal()}\n        </Page >\n    )\n}","import React from 'react'\nimport Payout from '../entities/Payout'\nimport { Page } from '../components/Page'\nimport Loading from '../components/Loading'\nimport Compensation from '../entities/Compensation'\nimport Contact from '../entities/Contact'\nimport Row from '../components/Row'\nimport Column from '../components/Column'\nimport Panel from '../components/Panel'\nimport FormEntry from '../components/FormEntry'\nimport Table from '../components/Table'\nimport Button from '../components/Button'\nimport ReactButton from 'react-bootstrap/Button'\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport Config from '../Config'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { useQuery } from 'react-apollo'\nimport { GET_COMPENSATIONS_BY_CONTACT_AND_PAYOUT } from '../graphql/CompensationQueries'\nimport { GET_CONTACT } from '../graphql/ContactQueries'\nimport { GET_PAYOUT } from '../graphql/PayoutQueries'\nimport axios from 'axios'\n\nexport default function PayoutMember(props: RouteComponentProps<{ id: string, memberId: string }>) {\n    const memberCompensations = useQuery<{ getContactCompensations: Compensation[] }>(GET_COMPENSATIONS_BY_CONTACT_AND_PAYOUT, { variables: { payoutId: parseInt(props.match.params.id), memberId: parseInt(props.match.params.memberId) } })\n    const member = useQuery<{ getContact: Contact }>(GET_CONTACT, { variables: { id: parseInt(props.match.params.memberId) } })\n    const payout = useQuery<{ getPayout: Payout }>(GET_PAYOUT, { variables: { id: parseInt(props.match.params.id) } })\n\n    if (memberCompensations.loading || member.loading || payout.loading) {\n        return (\n            <Page title=\"Loading...\"><Loading /></Page>\n        )\n    }\n\n    if (!memberCompensations.data?.getContactCompensations || !member.data?.getContact || !payout.data?.getPayout) {\n        return null\n    }\n\n    function compensationView(event: React.MouseEvent<HTMLButtonElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentElement.getAttribute('data-key')\n\n            // open a new tap when the middle button is pressed (buttonID 1)\n            if (event.button == 1) {\n                window.open((document.location as Location).origin + '/compensation/' + id)\n            } else {\n                props.history.push('/compensation/' + id)\n            }\n        }\n    }\n\n    async function downloader(blob: Blob, filename: string) {\n        const url = window.URL.createObjectURL(blob)\n        const link = document.createElement('a')\n        link.href = url\n        link.download = filename\n        document.body.appendChild(link)\n        link.click()\n        document.body.removeChild(link)\n        setTimeout(function () {\n            // For Firefox it is necessary to delay revoking the ObjectURL\n            window.URL.revokeObjectURL(url);\n        }, 100);\n    }\n\n    async function memberPdf(payoutId: number, member: Contact) {\n        const response = await axios({\n            method: 'POST',\n            url: `${Config.apiEndpoint}/api/payouts/member/pdf`,\n            data: { payoutId, memberId: member.id },\n            withCredentials: true,\n            timeout: 600000,\n            responseType: 'arraybuffer'\n        })\n        await downloader(new Blob([response.data], { type: 'application/pdf' }), `Auszahlung VerkehrskadettenentschÃ¤digung ${member.lastname} ${member.firstname}.pdf`)\n    }\n\n    let total = 0\n    memberCompensations.data?.getContactCompensations.map(el => total = total + parseFloat(el.amount.toFixed(2)))\n\n    return (\n        <Page title={`Auszahlung ${new Date(payout.data?.getPayout.from).toLocaleDateString()} - ${new Date(payout.data?.getPayout.until).toLocaleDateString()} / ${member.data?.getContact.firstname} ${member.data?.getContact.lastname}`}>\n            <Row>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Informationen\">\n                        <FormEntry id=\"member\" title=\"Mitglied\">{member.data?.getContact.firstname} {member.data?.getContact.lastname}</FormEntry>\n                        <FormEntry id=\"amountCompensations\" title=\"Anzahl EntschÃ¤digungen\">{memberCompensations.data?.getContactCompensations.length}</FormEntry>\n                        <FormEntry id=\"total\" title=\"Total\">CHF {total.toFixed(2)}</FormEntry>\n                        <FormEntry id=\"payout\" title=\"Auszahlung\">{new Date(payout.data?.getPayout.until).toLocaleDateString()}</FormEntry>\n                    </Panel>\n                </Column>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Actions\">\n                        <Button block={true} variant=\"outline-primary\" onClick={async () => { await memberPdf((payout.data?.getPayout as Payout).id, (member.data?.getContact as Contact)) }}>PDF</Button>\n                    </Panel>\n                </Column>\n            </Row>\n            <Row>\n                <Column>\n                    <Panel title=\"EntschÃ¤digungen\">\n                        <Table<Compensation>\n                            columns={[\n                                { text: 'Datum', keys: ['date'], sortable: true, format: 'toLocaleDateString' },\n                                { text: 'Beschreibung', keys: ['description'], sortable: true },\n                                { text: 'Betrag', keys: ['amount'], prefix: 'CHF ', sortable: true, format: 'toFixed(2)' },\n                                { text: 'Genehmigt', keys: ['approved'], sortable: true },\n                                { text: 'Ausbezahlt', keys: ['paied'], sortable: true },\n                                {\n                                    text: 'Actions', keys: ['_id'], content: <ReactButton variant=\"success\" className=\"view\" onMouseUp={compensationView}><FontAwesomeIcon icon=\"eye\" /></ReactButton>\n                                }\n                            ]}\n                            defaultSort={{\n                                keys: ['date'],\n                                direction: 'desc'\n                            }}\n                            data={memberCompensations.data?.getContactCompensations}\n                        />\n                    </Panel>\n                </Column>\n            </Row>\n        </Page>\n    )\n}","import React, { useState } from \"react\"\nimport { Page } from \"../components/Page\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport Button from '../components/Button'\nimport Input from \"../components/Input\"\nimport { useMutation } from \"react-apollo\"\nimport { ADD_PAYOUT } from \"../graphql/PayoutQueries\"\nimport { RouteComponentProps } from \"react-router\"\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\n\nexport default function AddPayout(props: RouteComponentProps) {\n    let formEl: HTMLFormElement\n    const [from, setFrom] = useState<Date>()\n    const [until, setUntil] = useState<Date>()\n    const [addPayout, { data }] = useMutation(ADD_PAYOUT)\n    const dispatch = useDispatch()\n\n    function onInputChange(name: string, value: any) {\n        switch (name) {\n            case 'from':\n                setFrom(value as Date)\n                break\n            case 'until':\n                setUntil(value as Date)\n                break\n        }\n    }\n\n    async function onSave(event: React.MouseEvent<HTMLButtonElement>): Promise<boolean> {\n        event.preventDefault()\n        if (formEl) {\n            let valid = formEl.checkValidity()\n            formEl.className = 'was-validated'\n\n            if (valid) {\n                const result = await addPayout({\n                    variables: {\n                        until,\n                        from\n                    }\n                })\n                if (result.errors) {\n                    return false\n                }\n                dispatch(UI.showSuccess('Gespeichert'))\n                props.history.push('/payouts')\n            } else {\n                dispatch(UI.showError('Korrigiere zuerst die Fehler'))\n            }\n            return valid\n        }\n        dispatch(UI.showError('Korrigiere zuerst die Fehler'))\n        return false\n    }\n\n    return (\n        <Page title=\"Auszahlung hinzufÃ¼gen\">\n            <Row>\n                <Column>\n                    <Panel>\n                        <form id=\"addPayout\" ref={(ref: HTMLFormElement) => { formEl = ref }}>\n                            <h5>Von (optional)</h5>\n                            <Input type=\"date\" name=\"from\" key=\"from\" value={from} onChange={onInputChange} editable={true} />\n                            <br></br>\n\n                            <h5>Bis</h5>\n                            <Input type=\"date\" name=\"until\" key=\"until\" value={until} onChange={onInputChange} editable={true} required={true} />\n                            <br></br>\n\n                            <Button variant=\"primary\" block={true} onClick={onSave}>Speichern</Button>\n                        </form>\n                    </Panel>\n                </Column>\n            </Row>\n        </Page >\n    )\n}","import Contact from \"./Contact\"\nimport Base from \"./Base\"\nimport User from \"./User\"\n\nexport enum LogoffState {\n    APPROVED = 'APPROVED',\n    PENDING = 'PENDING',\n    DECLINED = 'DECLINED'\n}\n\nexport default class Logoff extends Base {\n    public contact: Contact\n\n    public from: Date\n\n    public until: Date\n\n    public state: LogoffState\n\n    public remarks?: string\n\n    public createdBy: User\n\n    public changedStateBy: User\n\n    public deletedAt?: Date\n\n    public deletedBy: User\n\n    constructor(contact: Contact, from: Date, until: Date, state: LogoffState, remarks: string, createdBy: User) {\n        super()\n        this.contact = contact\n        this.from = from\n        this.until = until\n        this.state = state\n        this.remarks = remarks || undefined\n        this.createdBy = createdBy\n    }\n}","import React, { useState, useCallback } from \"react\"\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\"\nimport { RouteComponentProps } from \"react-router-dom\"\nimport Modal from \"../components/Modal\"\nimport { Button, ButtonGroup } from \"react-bootstrap\"\nimport Action from \"../components/Action\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport GraphQLDataList, { PaginationFilterOperator, InputPaginationFilter, CustomFilter } from \"../components/GraphQLDataList\"\nimport { GET_LOGOFFS, GET_LOGOFF, DELETE_LOGOFF, GET_LOGOFF_FILTERS } from \"../graphql/LogoffQueries\"\nimport { useLazyQuery, useMutation } from \"react-apollo\"\nimport Loading from \"../components/Loading\"\nimport { PaginationSortDirections } from \"../graphql/Interfaces\"\nimport Logoff, { LogoffState } from \"../entities/Logoff\"\nimport ReactDatePicker from \"react-datepicker\"\nimport Input from \"../components/Input\"\nimport Config from \"../Config\"\n\nexport default function Logoffs(props: RouteComponentProps) {\n    const [showModal, setShowModal] = useState(false)\n    const [toDeleteLogoff, setToDeleteLogoff] = useState(0)\n    const [fromFilter, setFromFilter] = useState<Date | null>(new Date())\n    const [untilFilter, setUntilFilter] = useState<Date | null>(new Date())\n    const [stateFilter, setStateFilter] = useState<LogoffState | undefined>(LogoffState.APPROVED)\n    const [customFilter, setCustomFilter] = useState<Array<InputPaginationFilter>>([])\n\n    const [deleteLogoffMutation] = useMutation(DELETE_LOGOFF)\n    const [lazyGetLogoff, logoff] = useLazyQuery<{ getLogoff: Logoff }>(GET_LOGOFF, { variables: { id: toDeleteLogoff } })\n\n    function getFilterValue(fromFilter: Date | null, untilFilter: Date | null, stateFilter?: string) {\n        const filters: {\n            field: string\n            operator: PaginationFilterOperator\n            value: Date | string | null\n        }[] = [\n                {\n                    field: 'Logoff.from',\n                    operator: PaginationFilterOperator['<='],\n                    value: untilFilter\n                }, {\n                    field: 'Logoff.until',\n                    operator: PaginationFilterOperator['>='],\n                    value: fromFilter\n                }\n            ]\n\n        if (stateFilter) {\n            filters.push({\n                field: 'Logoff.state',\n                operator: PaginationFilterOperator['='],\n                value: stateFilter.toLowerCase()\n            })\n        }\n\n        return filters\n    }\n\n    function deleteLogoff(event: React.MouseEvent<HTMLButtonElement>) {\n        if (event.currentTarget.parentNode && event.currentTarget.parentNode.parentNode && event.currentTarget.parentNode.parentNode.parentElement) {\n            let id = event.currentTarget.parentNode.parentNode.parentElement.getAttribute('data-key')\n            if (id) {\n                setToDeleteLogoff(parseInt(id))\n                setShowModal(true)\n                lazyGetLogoff()\n            }\n        }\n    }\n\n    function deleteLogoffConfirmed() {\n        deleteLogoffMutation({ variables: { id: toDeleteLogoff } })\n        setShowModal(false)\n    }\n\n    function renderModal() {\n        if (toDeleteLogoff) {\n            if (logoff.loading || !logoff.called) {\n                return (<Modal\n                    show={showModal}\n                    onHide={() => { setShowModal(false) }}\n                    header={<h3>Loading...</h3>}\n                    body={\n                        <Loading />\n                    }\n                    footer={\n                        <ButtonGroup>\n                            <Button variant=\"secondary\" onClick={() => { setShowModal(false) }}>Abbrechen</Button>\n                        </ButtonGroup>\n                    }\n\n                />)\n            }\n\n            return (\n                <Modal\n                    show={showModal}\n                    onHide={() => { setShowModal(false) }}\n                    header={<h3>{`${logoff.data?.getLogoff.contact.firstname} ${logoff.data?.getLogoff.contact.lastname} (${(logoff.data?.getLogoff.from) ? new Date(logoff.data?.getLogoff.from).toLocaleDateString() : ''} - ${(logoff.data?.getLogoff.until) ? new Date(logoff.data?.getLogoff.until).toLocaleDateString() : ''}`}</h3>}\n                    body={\n                        <span>\n                            {\n                                `Willst du die Abmeldung von \n                                ${logoff.data?.getLogoff.contact.firstname} ${logoff.data?.getLogoff.contact.lastname}\n                                vom ${(logoff.data?.getLogoff.from) ? new Date(logoff.data?.getLogoff.from).toLocaleDateString() : ''} bis ${(logoff.data?.getLogoff.until) ? new Date(logoff.data?.getLogoff.until).toLocaleDateString() : ''}\n                                wirklich lÃ¶schen?`\n                            }\n                        </span>\n                    }\n                    footer={\n                        <ButtonGroup>\n                            <Button variant=\"danger\" onClick={deleteLogoffConfirmed}>LÃ¶schen</Button>\n                            <Button variant=\"secondary\" onClick={() => { setShowModal(false) }}>Abbrechen</Button>\n                        </ButtonGroup>\n                    }\n\n                />\n            )\n        }\n\n        return null\n    }\n\n    return (\n        <>\n            {renderModal()}\n            <GraphQLDataList<Logoff>\n                query={GET_LOGOFFS}\n                filterQuery={GET_LOGOFF_FILTERS}\n                defaultFilter={0}\n                title='Abmeldungen'\n                viewLocation='/draft/logoff/'\n                panelActions={[\n                    <Action icon=\"plus\" to=\"/draft/logoff/add\" roles={[AuthRoles.LOGOFFS_CREATE]} />,\n                ]}\n                rowActions={[\n                    <button className=\"btn btn-danger delete\" onMouseUp={deleteLogoff}><FontAwesomeIcon icon=\"trash\" /></button>\n                ]}\n                tableColumns={[\n                    { text: 'Mitglied', keys: { 'contact': ['firstname', 'lastname'] }, sortKey: \"contact.firstname\", sortable: true },\n                    { text: 'Von', keys: ['from'], sortable: true, format: 'toLocaleString' },\n                    { text: 'Bis', keys: ['until'], sortable: true, format: 'toLocaleString' },\n                    { text: 'Status', keys: ['state'], sortable: true },\n                ]}\n                defaultSortBy='from'\n                defaultSortDirection={PaginationSortDirections.DESC}\n                pollInterval={1000}\n                searchable={true}\n                customFilters={[\n                    {\n                        components: (<div className=\"d-flex justify-content-center w-100\">\n                            <div className=\"text-center\">\n                                Von\n                                <ReactDatePicker\n                                    onChange={date => setFromFilter(date)}\n                                    selected={fromFilter}\n                                    className=\"form-entry form-control\"\n                                />\n                            </div>\n                            <div className=\"text-center\">\n                                Bis\n                                <ReactDatePicker\n                                    onChange={date => setUntilFilter(date)}\n                                    selected={untilFilter}\n                                    minDate={fromFilter}\n                                    className=\"form-entry form-control\"\n                                />\n                            </div>\n                            <div className=\"text-center\">\n                                Status\n                                <Input\n                                    type=\"select\"\n                                    name=\"state\"\n                                    editable={true}\n                                    options={[...Object.values(LogoffState), 'Alle']}\n                                    value={stateFilter}\n                                    onChange={(name, value) => { (value !== 'Alle') ? setStateFilter(value) : setStateFilter(undefined) }}\n                                />\n                            </div>\n                            <div className=\"text-center\">\n                                Export\n                                <div>\n                                    <Action key=\"excel-export\" onClick={async () => { window.open(`${Config.apiEndpoint}/api/logoffs/excel?from=${fromFilter?.toISOString()}&until=${untilFilter?.toISOString()}&state=${stateFilter?.toLowerCase()}`) }} icon='file-excel'></Action>\n                                </div>\n                            </div>\n                        </div>),\n                        displayName: 'Benutzerdefiniert',\n                        getFilter: useCallback(() => getFilterValue(fromFilter, untilFilter, stateFilter), [fromFilter, untilFilter, stateFilter])\n                    }\n                ]}\n                selectedCustomFilter={customFilter}\n                forceRerender={[fromFilter, untilFilter, stateFilter]}\n                {...props}\n            ></GraphQLDataList>\n        </>\n    )\n}","import React from \"react\"\nimport { RouteComponentProps } from \"react-router\"\nimport { default as LogoffEntity, LogoffState } from '../entities/Logoff'\nimport Button from \"../components/Button\"\nimport Error404 from \"../components/Errors/404\"\nimport { Page } from \"../components/Page\"\nimport Loading from \"../components/Loading\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport FormEntry from \"../components/FormEntry\"\nimport { Link } from \"react-router-dom\"\nimport { AuthRoles } from \"../interfaces/AuthRoles\"\nimport { useQuery, useMutation } from \"react-apollo\"\nimport { GET_LOGOFF, CHANGE_LOGOFF_STATE } from \"../graphql/LogoffQueries\"\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\n\nexport default function Logoff(props: RouteComponentProps<{ id: string }>) {\n    const logoff = useQuery<{ getLogoff: LogoffEntity }>(GET_LOGOFF, { variables: { id: parseInt(props.match.params.id) }, fetchPolicy: 'cache-and-network' })\n    const [changeStateMutation] = useMutation(CHANGE_LOGOFF_STATE)\n    const dispatch = useDispatch()\n\n    async function changeState(state: LogoffState) {\n        const result = await changeStateMutation({ variables: { id: logoff.data?.getLogoff.id, state, notify: true } })\n        if (result.errors) {\n            return false\n        }\n        if (state === LogoffState.APPROVED) {\n            dispatch(UI.showSuccess('Bewilligt'))\n        } else {\n            dispatch(UI.showError('Abgelehnt'))\n        }\n        logoff.refetch()\n    }\n\n    function renderActions() {\n        let actions = [<Link to={\"/contact/\" + logoff.data?.getLogoff.contact.id} className=\"btn btn-block btn-outline-primary\">Kontakt Ã¶ffnen</Link>]\n\n        if (logoff.data?.getLogoff.state === LogoffState.PENDING) {\n            actions = [...actions,\n            <Button id=\"approve\" block={true} variant=\"outline-success\" onClick={() => { changeState(LogoffState.APPROVED) }} roles={[AuthRoles.LOGOFFS_APPROVE]}>Genehmigen</Button>,\n            <Button id=\"decline\" block={true} variant=\"outline-danger\" onClick={() => { changeState(LogoffState.DECLINED) }} roles={[AuthRoles.LOGOFFS_APPROVE]}>Ablehnen</Button>\n            ]\n        }\n        return actions\n    }\n\n    if (logoff.loading) {\n        return (<Page title=\"Abmeldung\"><Loading /></Page>)\n    }\n\n    if (!logoff.data) {\n        return <Error404 />\n    }\n\n    let statusBadgeClass = ''\n    switch (logoff.data?.getLogoff.state) {\n        case LogoffState.PENDING:\n            statusBadgeClass = 'badge-warning'\n            break\n        case LogoffState.APPROVED:\n            statusBadgeClass = 'badge-success'\n            break\n        case LogoffState.DECLINED:\n            statusBadgeClass = 'badge-danger'\n            break\n    }\n\n    return (\n        <Page title=\"Abmeldung\">\n            <Row>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Informationen\">\n                        <FormEntry id=\"contact\" title=\"Mitglied\">{logoff.data?.getLogoff.contact.firstname} {logoff.data?.getLogoff.contact.lastname}</FormEntry>\n                        <FormEntry id=\"from\" title=\"Von\">{new Date(logoff.data?.getLogoff.from).toLocaleString()}</FormEntry>\n                        <FormEntry id=\"until\" title=\"Bis\">{new Date(logoff.data?.getLogoff.until).toLocaleString()}</FormEntry>\n                        <FormEntry id=\"state\" title=\"Status\"><div className={\"badge \" + statusBadgeClass}>{logoff.data?.getLogoff.state}</div></FormEntry>\n                        <FormEntry id=\"creator\" title=\"Ersteller\">{logoff.data?.getLogoff.createdBy.displayName}</FormEntry>\n                        <FormEntry id=\"changedStateBy\" title=\"Status geÃ¤ndert von\">{logoff.data?.getLogoff?.changedStateBy?.displayName}</FormEntry>\n                        <FormEntry id=\"remarks\" title=\"Bemerkungen\">{logoff.data?.getLogoff.remarks}</FormEntry>\n                    </Panel>\n                </Column>\n                <Column className=\"col-md-6\">\n                    <Panel title=\"Actions\">\n                        {renderActions()}\n                    </Panel>\n                </Column>\n            </Row>\n        </Page >\n    )\n}","import React, { useState } from \"react\"\nimport Contact from \"../entities/Contact\"\nimport { Page } from \"../components/Page\"\nimport Row from \"../components/Row\"\nimport Column from \"../components/Column\"\nimport Panel from \"../components/Panel\"\nimport { Button, Col } from \"react-bootstrap\"\nimport { LogoffBase } from \"../interfaces/Logoffs\"\nimport MemberSelect from \"../components/MemberSelect\"\nimport Table from \"../components/Table\"\nimport { LogoffState } from \"../entities/Logoff\"\nimport Input from \"../components/Input\"\nimport { ADD_LOGOFFS } from \"../graphql/LogoffQueries\"\nimport { RouteComponentProps } from \"react-router\"\nimport { ValueType } from \"react-select/lib/types\"\nimport { useMutation } from \"react-apollo\"\nimport { useDispatch } from \"react-redux\"\nimport { UI } from \"../actions/UIActions\"\n\nexport interface AddLogoffState { contact?: Contact, logoffs: Array<ExtendedLogoffBase>, notify: boolean }\n\ninterface ExtendedLogoffBase extends LogoffBase {\n    id: string,\n    [index: string]: any\n}\n\nexport default function AddLogoff(props: RouteComponentProps) {\n    let formEl: HTMLFormElement\n    const [member, setMember] = useState<number>()\n    const [notify, setNotify] = useState(true)\n    const [logoffs, setLogoffs] = useState<Partial<ExtendedLogoffBase>[]>([])\n    const [addLogoffs, { data }] = useMutation(ADD_LOGOFFS)\n    const dispatch = useDispatch()\n\n    function onSelectChange(contacts: Contact[]) {\n        if (contacts) {\n            setMember(contacts[0].id)\n        } else {\n            setMember(undefined)\n        }\n    }\n\n    function onInputChange(name: string, value: any) {\n        switch (name) {\n            case 'notify':\n                setNotify(value as boolean)\n                break\n        }\n    }\n\n    function onLogoffChange(id: string | number | null, name: string, value: any, newly: boolean): void {\n        if (newly) {\n            const logoff: Partial<ExtendedLogoffBase> = {\n                id: logoffs.length.toString()\n            }\n            // @ts-ignore\n            logoff[name] = value\n            logoff.state = LogoffState.APPROVED\n            setLogoffs([...logoffs, logoff])\n        } else {\n            if (id) {\n                setLogoffs(logoffs.map((item, index) => {\n                    if (index === parseInt(id.toString())) {\n                        item[name] = value\n                    }\n                    return item\n                }))\n            }\n\n        }\n    }\n\n    async function onSave(event: React.MouseEvent<HTMLButtonElement>): Promise<boolean> {\n        event.preventDefault()\n        if (formEl) {\n            let valid = formEl.checkValidity()\n            formEl.className = 'was-validated'\n\n            if (valid) {\n                const result = await addLogoffs({\n                    variables: {\n                        data: logoffs.map(item => {\n                            return {\n                                contactId: member,\n                                from: item.from,\n                                until: item.until,\n                                state: item.state,\n                                remarks: item.remarks\n                            }\n                        }),\n                        notify\n                    }\n                })\n                if (result.errors) {\n                    return false\n                }\n                dispatch(UI.showSuccess('Gespeichert'))\n                props.history.push('/draft/logoffs')\n            } else {\n                dispatch(UI.showError('Korrigiere zuerst die Fehler'))\n            }\n            return valid\n        }\n        dispatch(UI.showError('Korrigiere zuerst die Fehler'))\n        return false\n    }\n\n    return (\n        <Page title=\"Abmeldungen hinzufÃ¼gen\">\n            <Row>\n                <Column>\n                    <Panel>\n                        <form id=\"addLogoffs\" ref={(ref: HTMLFormElement) => { formEl = ref }}>\n                            <Row>\n                                <Col>\n                                    <h5>Mitglied</h5>\n                                    <MemberSelect onChange={onSelectChange} defaultValue={(member) ? [member.toString()] : undefined} required={true} />\n                                </Col>\n                                <Col lg={2} md={3} sm={4}>\n                                    <h5>Benachrichtigen</h5>\n                                    <Input type=\"checkbox\" className=\"d-flex justify-content-center\" name=\"notify\" key=\"notify\" value={notify} onChange={onInputChange} editable={true} />\n                                </Col>\n                            </Row>\n                            <br></br>\n                            <Table<ExtendedLogoffBase>\n                                columns={[\n                                    { keys: ['from'], text: 'Von', editable: true, type: 'datetime', onChange: onLogoffChange, required: true },\n                                    { keys: ['until'], text: 'Bis', editable: true, type: 'datetime', onChange: onLogoffChange, required: true },\n                                    { keys: ['state'], text: 'Status', editable: true, type: 'select', options: ['approved', 'pending', 'declined'], onChange: onLogoffChange, required: true },\n                                    { keys: ['remarks'], text: 'Bemerkungen', editable: true, type: 'text', onChange: onLogoffChange, required: false },\n                                ]}\n                                addNew={true}\n                                data={logoffs as ExtendedLogoffBase[]}\n                            />\n                            <Button variant=\"primary\" block={true} onClick={onSave}>Speichern</Button>\n                        </form>\n                    </Panel>\n                </Column>\n            </Row>\n        </Page >\n    )\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and contacts)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            installingWorker.postMessage({ type: 'SKIP_WAITING' });\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else if(installingWorker.state === 'activated') {\n                window.location.reload()\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import './fontawesome_init'\n\nimport React from 'react';\nimport ReactDOM, { render } from 'react-dom';\nimport Root from './Root';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <Root />\n    , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();","import React from \"react\"\nimport { Provider } from \"react-redux\"\nimport configureStore from \"./Store\"\nimport { Route, Switch, Redirect } from \"react-router-dom\"\nimport { ToastContainer } from 'react-toastify'\nimport { AuthRoles } from \"./interfaces/AuthRoles\"\nimport SecureRoute from \"./components/SecureRoute\"\nimport Config from './Config'\nimport { ConnectedRouter } from \"connected-react-router\"\nimport { createBrowserHistory } from \"history\"\nimport { ApolloLink, ApolloClient, InMemoryCache } from 'apollo-boost'\nimport { ApolloProvider } from '@apollo/react-hooks'\nimport { BatchHttpLink } from 'apollo-link-batch-http'\n\n// styles\nimport './styles/index.scss'\nimport 'react-toastify/dist/ReactToastify.css'\n\n// views\nimport Dashboard from \"./views/Dashboard\"\nimport Members from \"./views/Members\"\nimport Contact from \"./views/Contact\"\nimport Orders from \"./views/Orders\"\nimport Order from \"./views/Order\"\nimport BillingReports from \"./views/BillingReports\"\nimport Compensations from \"./views/Compensations\"\nimport AddBillingReport from \"./views/AddBillingReport\"\nimport Login from \"./views/Login\"\nimport Users from \"./views/Users\"\nimport User from \"./views/User\"\nimport BillingReport from \"./views/BillingReport\"\nimport AddCompensation from \"./views/AddCompensation\"\nimport Compensation from \"./views/Compensation\"\nimport Error404 from \"./components/Errors/404\"\nimport MailingLists from \"./views/MailingLists\"\nimport CollectionPoints from \"./views/CollectionPoints\"\nimport AddCollectionPoint from \"./views/AddCollectionPoint\"\nimport Payouts from \"./views/Payouts\"\nimport Payout from \"./views/Payout\"\nimport PayoutMember from \"./views/PayoutMember\"\nimport AddPayout from \"./views/AddPayout\"\nimport Logoffs from \"./views/Logoffs\"\nimport Logoff from \"./views/Logoff\"\nimport AddLogoff from \"./views/AddLogoff\"\nimport { onError } from \"apollo-link-error\"\nimport { UI } from \"./actions/UIActions\"\n\nexport default function Root() {\n    Config.loadConfig()\n    const history = createBrowserHistory({ basename: '/webapp/' })\n    const { store } = configureStore(history)\n    store.getState()\n\n    const httpLink = new BatchHttpLink({ credentials: 'include', uri: `${Config.apiEndpoint}/graphql` })\n    const errorLink = onError(({ graphQLErrors, networkError, operation }) => {\n        if (graphQLErrors)\n            graphQLErrors.map(({ message, path }) => {\n                if (path && path[0] === 'me' && message.indexOf('Access denied!') > -1 && history.location.pathname !== '/login') {\n                    history.push('/login', { unAuthenticated: true, prevLocation: history.location.pathname })\n                    return\n                }\n\n                console.error(`[GraphQL error]: Message: ${message}, Operation: ${operation.operationName}, Path: ${path}`)\n            })\n        if (networkError) {\n            store.dispatch(UI.showError('Etwas ist schief gelaufen'))\n            console.error(`[Network error]: ${networkError}`)\n        }\n    })\n\n    const apolloClient = new ApolloClient({\n        link: ApolloLink.from([errorLink, httpLink]),\n        cache: new InMemoryCache()\n    })\n\n    return (\n        <Provider store={store}>\n            <div className=\"body\">\n                <ToastContainer\n                    position=\"top-center\"\n                    autoClose={5000}\n                    hideProgressBar={false}\n                    newestOnTop={true}\n                    closeOnClick\n                    rtl={false}\n                    draggable={true}\n                    pauseOnHover={true}\n                />\n                <ConnectedRouter history={history} >\n                    <ApolloProvider client={apolloClient}>\n                        <Switch>\n                            <Route exact path=\"/\" component={() => { return (<Redirect to=\"/login\" />) }} />\n                            <Route exact path=\"/login\" component={Login} />\n                            <Route exact path=\"/login?source=:source\" component={Login} />\n                            <SecureRoute exact path=\"/dashboard\" roles={[AuthRoles.AUTHENTICATED]} component={Dashboard} />\n                            <SecureRoute exact path=\"/members\" roles={[AuthRoles.MEMBERS_READ]} component={Members} />\n                            <SecureRoute exact path=\"/mailing-lists\" roles={[AuthRoles.MAILING_LISTS]} component={MailingLists} />\n                            <SecureRoute exact path=\"/draft/collection-points\" roles={[AuthRoles.DRAFT_READ]} component={CollectionPoints} />\n                            <SecureRoute exact path=\"/draft/collection-point/add\" roles={[AuthRoles.DRAFT_EDIT, AuthRoles.DRAFT_CREATE]} component={AddCollectionPoint} />\n                            <SecureRoute exact path=\"/draft/logoffs\" roles={[AuthRoles.LOGOFFS_READ]} component={Logoffs} />\n                            <SecureRoute exact path=\"/draft/logoff/add\" roles={[AuthRoles.LOGOFFS_CREATE]} component={AddLogoff} />\n                            <SecureRoute exact path=\"/draft/logoff/:id\" roles={[AuthRoles.LOGOFFS_READ, AuthRoles.AUTHENTICATED]} component={Logoff} />\n                            <SecureRoute exact path=\"/contact/:id\" roles={[AuthRoles.CONTACTS_READ, AuthRoles.MEMBERS_READ, AuthRoles.AUTHENTICATED]} component={Contact} />\n                            <SecureRoute exact path=\"/orders\" roles={[AuthRoles.ORDERS_READ]} component={Orders} />\n                            <SecureRoute exact path=\"/order/:id\" roles={[AuthRoles.ORDERS_READ]} component={Order} />\n                            <SecureRoute exact path=\"/billing-reports\" roles={[AuthRoles.BILLINGREPORTS_READ, AuthRoles.BILLINGREPORTS_CREATE]} component={BillingReports} />\n                            <SecureRoute exact path=\"/billing-reports/add\" roles={[AuthRoles.BILLINGREPORTS_CREATE]} component={AddBillingReport} />\n                            <SecureRoute exact path=\"/billing-report/:id\" roles={[AuthRoles.BILLINGREPORTS_CREATE, AuthRoles.BILLINGREPORTS_READ]} component={BillingReport} />\n                            <SecureRoute exact path=\"/compensations\" roles={[AuthRoles.COMPENSATIONS_READ]} component={Compensations} />\n                            <SecureRoute exact path=\"/compensations/add\" roles={[AuthRoles.COMPENSATIONS_CREATE]} component={AddCompensation} />\n                            <SecureRoute exact path=\"/compensation/:id\" roles={[AuthRoles.COMPENSATIONS_READ, AuthRoles.AUTHENTICATED]} component={Compensation} />\n                            <SecureRoute exact path=\"/payouts\" roles={[AuthRoles.PAYOUTS_READ]} component={Payouts} />\n                            <SecureRoute exact path=\"/payouts/add\" roles={[AuthRoles.PAYOUTS_CREATE]} component={AddPayout} />\n                            <SecureRoute exact path=\"/payout/:id\" roles={[AuthRoles.PAYOUTS_READ]} component={Payout} />\n                            <SecureRoute exact path=\"/payout/:id/:memberId\" roles={[AuthRoles.PAYOUTS_READ]} component={PayoutMember} />\n                            <SecureRoute exact path=\"/users\" roles={[AuthRoles.ADMIN]} component={Users} />\n                            <SecureRoute exact path=\"/user/:id\" roles={[AuthRoles.ADMIN]} component={User} />\n                            <Route path=\"/*\" component={Error404} />\n                        </Switch>\n                    </ApolloProvider>\n                </ConnectedRouter>\n            </div>\n        </Provider>\n    )\n}","import { createStore, applyMiddleware, combineReducers, Store, AnyAction } from \"redux\"\nimport IndexReducer from \"./reducers/IndexReducer\"\nimport thunkMiddleware from 'redux-thunk'\nimport { connectRouter, routerMiddleware } from 'connected-react-router'\nimport { History } from \"history\"\nimport { composeWithDevTools } from \"redux-devtools-extension\"\nexport default function configureStore(history: History<any>) {\n    const store = createStore(\n        combineReducers({ ...IndexReducer, router: connectRouter(history) }),\n        composeWithDevTools(\n            applyMiddleware(thunkMiddleware, routerMiddleware(history))\n        )\n    )\n\n    return { store }\n}\n"],"sourceRoot":""}