(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(0),l=a.n(c),u=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).className="col",a.props.className&&a.props.className.indexOf("col")>-1?a.className=a.props.className:a.props.className&&(a.className+=" "+a.props.className),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:this.className},this.props.children)}}]),t}(c.Component)},13:function(e,t,a){"use strict";var n;a.d(t,"a",function(){return n}),function(e){e.AUTHENTICATED="authenticated",e.CONTACTS_READ="contacts_read",e.CONTACTS_EDIT="contacts_edit",e.MEMBERS_READ="members_read",e.MEMBERS_EDIT="members_edit",e.MAILING_LISTS="mailing_lists",e.RANKS_READ="ranks_read",e.RANKS_EDIT="ranks_edit",e.ORDERS_READ="orders_read",e.ORDERS_EDIT="orders_edit",e.COMPENSATIONS_READ="compensation_read",e.COMPENSATIONS_CREATE="compensation_create",e.COMPENSATIONS_EDIT="compensation_edit",e.COMPENSATIONS_APPROVE="compensation_approve",e.BILLINGREPORTS_READ="billingreports_read",e.BILLINGREPORTS_CREATE="billingreports_create",e.BILLINGREPORTS_EDIT="billingreports_edit",e.BILLINGREPORTS_APPROVE="billingrepors_approve",e.DRAFT_READ="draft_read",e.DRAFT_CREATE="draft_create",e.DRAFT_EDIT="draft_edit",e.PAYOUTS_READ="payouts_read",e.PAYOUTS_CREATE="payouts_create",e.PAYOUTS_SEND="payouts_send",e.ADMIN="admin"}(n||(n={}))},14:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(0),l=a.n(c),u=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e,t=this.props.actions||[];return this.props.title?e=l.a.createElement("div",{className:"panel-header"},l.a.createElement("span",{className:"panel-title"},this.props.title),l.a.createElement("div",{className:"panel-actions"},t.map(function(e){return e}))):this.props.actions&&this.props.actions.length>0&&(e=l.a.createElement("div",{className:"panel-header"},l.a.createElement("div",{className:"panel-actions"},t.map(function(e){return e})))),l.a.createElement("div",{className:"panel "+(this.props.className||"")},e,l.a.createElement("div",{className:"panel-body ".concat(this.props.scrollable?"panel-body-scrollable":"")},this.props.children))}}]),t}(c.Component)},15:function(e,t,a){"use strict";a.d(t,"b",function(){return l}),a.d(t,"a",function(){return u});var n=a(3),r=a.n(n),i=a(10),o=a(4),s=a(5),c=a(31),l={NAVIBAR_TOGGLE:"navibar_toggle",NAVIBAR_OPEN:"navibar_open",NAVIBAR_CLOSE:"navibar_close",NAVIBAR_LEVEL_OPEN:"navibar_level_open",NAVIBAR_LEVEL_COLLAPSE:"navibar_level_collapse",NOTIFICATION_SUCCESS:"notification_success",NOTIFICATION_ERROR:"notification_error",LOGOUT:"logout"},u=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,null,[{key:"toggleNavibar",value:function(){return{type:l.NAVIBAR_TOGGLE}}},{key:"openNavibar",value:function(){return{type:l.NAVIBAR_OPEN}}},{key:"closeNavibar",value:function(){return{type:l.NAVIBAR_CLOSE}}},{key:"openNavibarLevel",value:function(e){return{type:l.NAVIBAR_LEVEL_OPEN,payload:e}}},{key:"collapseNavibarLevel",value:function(){return{type:l.NAVIBAR_LEVEL_COLLAPSE}}},{key:"showError",value:function(e){return{type:l.NOTIFICATION_ERROR,payload:e}}},{key:"showSuccess",value:function(e){return{type:l.NOTIFICATION_SUCCESS,payload:e}}},{key:"logout",value:function(){return function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(Object(c.d)("/login")),e.abrupt("return",{type:l.LOGOUT});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}}]),e}()},159:function(e,t){},16:function(e,t,a){"use strict";var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(2),l=a(0),u=a.n(l),p=a(11),d=a(15),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).scrolling=!1,a.minThreshold=e.minThreshold||10,a.maxThreshold=e.maxThreshold||100,a.minDurationThreshold=e.minDurationThreshold||0,a.maxDurationThreshold=e.maxDurationThreshold||100,a.onStart=a.onStart.bind(Object(c.a)(Object(c.a)(a))),a.onMove=a.onMove.bind(Object(c.a)(Object(c.a)(a))),a.onEnd=a.onEnd.bind(Object(c.a)(Object(c.a)(a))),a.onScroll=a.onScroll.bind(Object(c.a)(Object(c.a)(a))),a.state={capturing:!1,start:{x:-1,y:-1}},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"onStart",value:function(e){if(!this.scrolling&&(e.clientX&&this.props.mouseMove||e.touches)){var t=0,a=0;e.clientX?(t=e.clientX,a=e.clientY):e.touches&&(t=e.touches[0].clientX,a=e.touches[0].clientY),this.setState({capturing:!0,start:{x:t,y:a},startTime:new Date,current:void 0,end:void 0})}}},{key:"onMove",value:function(e){if(this.state.capturing){var t=0,a=0;e.clientX?(t=e.clientX,a=e.clientY):e.touches&&(t=e.touches[0].clientX,a=e.touches[0].clientY),this.setState({current:{x:t,y:a}}),this.fireRunningEvents(this.calculateDirection(this.state.start,{x:t,y:a}),e)}}},{key:"onEnd",value:function(e){if(this.state.capturing&&this.state.start&&this.state.startTime){var t=0,a=0;e.clientX?(t=e.clientX,a=e.clientY):e.touches&&(t=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY),this.setState({capturing:!1,end:{x:t,y:a},endTime:new Date}),this.fireFinishEvents(this.calculateDirection(this.state.start,{x:t,y:a}),(new Date).getTime()-this.state.startTime.getTime(),e)}}},{key:"onScroll",value:function(e){var t=this;this.scrolling=!0,this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){t.scrolling=!1},150)}},{key:"calculateDirection",value:function(e,t){var a=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);if(a>n){if(a>this.minThreshold&&a<this.maxThreshold)return e.x>t.x?"left":"right"}else if(n>this.minThreshold&&n<this.maxThreshold)return e.y>t.y?"up":"down";return""}},{key:"fireFinishEvents",value:function(e,t,a){if(t>this.minDurationThreshold&&t<this.maxDurationThreshold)switch(e){case"up":this.props.swipedUp&&this.props.swipedUp(a);break;case"right":this.props.swipedRight&&this.props.swipedRight(a);break;case"down":this.props.swipedDown&&this.props.swipedDown(a);break;case"left":this.props.swipedLeft&&this.props.swipedLeft(a)}}},{key:"fireRunningEvents",value:function(e,t){switch(e){case"up":this.props.swipingUp&&this.props.swipingUp(t);break;case"right":this.props.swipingRight&&this.props.swipingRight(t);break;case"down":this.props.swipingDown&&this.props.swipingDown(t);break;case"left":this.props.swipingLeft&&this.props.swipingLeft(t)}}},{key:"render",value:function(){return u.a.createElement("div",{onScroll:this.onScroll,onTouchStart:this.onStart,onTouchMove:this.onMove,onTouchEnd:this.onEnd,onMouseDown:this.onStart,onMouseMove:this.onMove,onMouseUp:this.onEnd,className:this.props.className},this.props.children)}}]),t}(l.Component),m=a(21),f=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e="navibar-open";return this.props.open||(e="navibar-collapsed"),this.props.user?u.a.createElement("div",{id:"header"},u.a.createElement("div",{id:"header-title",className:e},u.a.createElement("div",{id:"user"},this.props.user.displayName)),u.a.createElement("div",{id:"header-bars",onClick:this.props.onClick},u.a.createElement("span",null,u.a.createElement(m.a,{icon:"bars"})))):u.a.createElement("div",null)}}]),t}(l.Component),b=Object(p.c)(function(e){return{open:e.ui.navibar_open,user:e.data.user.data}},function(e){return{onClick:function(){e(d.a.toggleNavibar())}}})(f),v=a(402),E=a(61),y=a(407),g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).onMouseUp=a.onMouseUp.bind(Object(c.a)(Object(c.a)(a))),a.level=a.props.level||0,a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"onMouseUp",value:function(e){0===this.level&&this.props.onClose&&this.props.onClose(),this.props.onMouseUp&&this.props.onMouseUp(e),E.a.mobile()&&this.props.toggleNavibar&&this.props.to&&this.props.toggleNavibar()}},{key:"renderLinkElement",value:function(e,t,a){return e.match(/^(http|https):\/\//)?u.a.createElement("a",{href:e,className:"navibar-element",onMouseUp:a,target:"_blank"},t):u.a.createElement(v.a,{exact:!0,to:e,className:"navibar-element",activeClassName:"navibar-element-active",onMouseUp:a},t)}},{key:"render",value:function(){var e,t=u.a.createElement("p",null);return this.props.leftIcon&&(e=u.a.createElement(m.a,{icon:this.props.leftIcon,className:"navibar-element-icon"})),this.props.rightIcon&&(t=u.a.createElement(m.a,{icon:this.props.rightIcon,className:"navibar-element-icon navibar-element-icon-right float-right"})),this.props.to?this.renderLinkElement(this.props.to,[u.a.createElement("li",{key:this.props.to},e,u.a.createElement("p",{className:"navibar-element-text"},this.props.text),t)],this.onMouseUp):u.a.createElement("li",{className:"navibar-element",onMouseUp:this.onMouseUp,key:this.props.text},e,u.a.createElement("p",{className:"navibar-element-text"},this.props.text),t)}}]),t}(l.Component),O=Object(y.a)(Object(p.c)(function(e){return{navibar_open:e.ui.navibar_open}},function(e){return{onClose:function(){e(d.a.collapseNavibarLevel())},toggleNavibar:function(){e(d.a.toggleNavibar())}}})(g)),k=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).onClick=a.onClick.bind(Object(c.a)(Object(c.a)(a))),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"onClick",value:function(e){this.props.open_level===this.props.id?this.props.onClose():this.props.onOpen(this.props.id)}},{key:"render",value:function(){var e=this,t="",a="angle-up";return this.props.id!==this.props.open_level&&(t=" level-collapsed",a="angle-down"),u.a.createElement("div",null,u.a.createElement(O,{leftIcon:this.props.leftIcon,rightIcon:a,text:this.props.text,onMouseUp:this.onClick}),u.a.createElement("div",{key:"levelContainer-"+this.props.id,className:"level-container level-"+this.props.level.toString()+t},l.Children.map(this.props.children,function(t){return Object(l.cloneElement)(t,{level:e.props.level})})))}}]),t}(l.Component),j=Object(p.c)(function(e){return{open_level:e.ui.navibar_level}},function(e){return{onOpen:function(t){e(d.a.openNavibarLevel(t))},onClose:function(){e(d.a.collapseNavibarLevel())}}})(k),C=a(13),N=a(17),S=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"renderElement",value:function(e,t){if(!t)return e;var a=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;if(this.props.user&&(this.props.user.roles.includes(s)||this.props.user.roles.includes(C.a.ADMIN)))return e}}catch(c){n=!0,r=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e="navibar-open";return this.props.open||(e="navibar-collapsed"),this.props.user?u.a.createElement("div",{id:"navibar",className:e},u.a.createElement("ol",null,this.renderElement(u.a.createElement(O,{to:"/dashboard",text:"Dashboard",leftIcon:"tachometer-alt"}),[C.a.AUTHENTICATED]),this.renderElement(u.a.createElement(O,{to:"/members",text:"Mitglieder",leftIcon:"users"}),[C.a.MEMBERS_READ]),this.renderElement(u.a.createElement(O,{to:"/mailing-lists",text:"Verteiler",leftIcon:"mail-bulk"}),[C.a.MEMBERS_READ]),this.renderElement(u.a.createElement(j,{text:"Aufgebot",leftIcon:"address-book",id:"draft",level:1},u.a.createElement(O,{to:"/draft/collection-points",leftIcon:"map-marker-alt",text:"Abholpunkte"})),[C.a.DRAFT_READ,C.a.DRAFT_CREATE]),this.renderElement(u.a.createElement(O,{to:"/orders",text:"Auftr\xe4ge",leftIcon:"file-alt"}),[C.a.ORDERS_READ]),this.renderElement(u.a.createElement(j,{text:"Verrechnungsrapporte",leftIcon:"file-signature",id:"billingreports",level:1},this.renderElement(u.a.createElement(O,{to:"/billing-reports/add",leftIcon:"plus",text:"Erstellen"}),[C.a.BILLINGREPORTS_CREATE]),u.a.createElement(O,{to:"/billing-reports",leftIcon:"list",text:"Alle"}),u.a.createElement(O,{to:"https://vkazu.sharepoint.com/:w:/r/Vorlagen/Verrechungsrapport.docx?d=w66977fb79dfd4ab3832ca05fd6d9b8d2&csf=1&e=Spme13",text:"Word Vorlage",leftIcon:"file-word"})),[C.a.BILLINGREPORTS_READ,C.a.BILLINGREPORTS_CREATE]),this.renderElement(u.a.createElement(j,{text:"Entsch\xe4digungen",leftIcon:"dollar-sign",id:"compensations",level:1},this.renderElement(u.a.createElement(O,{to:"/compensations/add",leftIcon:"plus",text:"Erstellen"}),[C.a.COMPENSATIONS_CREATE]),u.a.createElement(O,{to:"/compensations",leftIcon:"list",text:"Alle"})),[C.a.COMPENSATIONS_READ]),this.renderElement(u.a.createElement(O,{to:"/payouts",text:"Auszahlungen",leftIcon:"file-invoice-dollar"}),[C.a.PAYOUTS_READ]),this.renderElement(u.a.createElement(O,{to:"/users",text:"Benutzer",leftIcon:"user"}),[C.a.ADMIN]),u.a.createElement(O,{to:"https://vkazu.sharepoint.com/Dokumente",text:"Dokumente",leftIcon:"external-link-alt"}),u.a.createElement(O,{to:"".concat(N.a.apiEndpoint,"/api/logout"),text:"Abmelden",leftIcon:"power-off"}))):u.a.createElement("div",null)}}]),t}(l.Component),x=Object(p.c)(function(e){return{open:e.ui.navibar_open,user:e.data.user.data}},{},null,{pure:!1})(S);a.d(t,"a",function(){return T});var w=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).swipedRight=a.swipedRight.bind(Object(c.a)(Object(c.a)(a))),a.swipedLeft=a.swipedLeft.bind(Object(c.a)(Object(c.a)(a))),a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"swipedRight",value:function(){this.props.openNavibar&&this.props.openNavibar()}},{key:"swipedLeft",value:function(){this.props.closeNavibar&&this.props.closeNavibar()}},{key:"render",value:function(){var e="navibar-open";return this.props.open||(e="navibar-collapsed"),u.a.createElement("div",{className:"body"},u.a.createElement(b,null),u.a.createElement(x,null),u.a.createElement(h,{className:e+" content",mouseMove:!0,swipedRight:this.swipedRight,swipedLeft:this.swipedLeft},u.a.createElement("div",{className:"content-top"},u.a.createElement("h1",{className:"page-title"},this.props.title)),u.a.createElement("div",{className:"content-body container-fluid"},this.props.children)))}}]),t}(l.Component),T=Object(p.c)(function(e){return{open:e.ui.navibar_open}},function(e){return{closeNavibar:function(){e(d.a.closeNavibar())},openNavibar:function(){e(d.a.openNavibar())}}})(w)},17:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(4),r=a(5),i=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,null,[{key:"loadConfig",value:function(){e.apiEndpoint="".concat(window.location.protocol,"//").concat(window.location.host)}},{key:"isModeProduction",value:function(){return e.isMode("production")}},{key:"isModeDev",value:function(){return e.isMode("development")}},{key:"isMode",value:function(e){return"production".toLowerCase()===e.toLowerCase()}}]),e}()},18:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(0),l=a.n(c),u=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"row "+this.props.className},this.props.children)}}]),t}(c.Component)},180:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return T});var n=a(3),r=a.n(n),i=a(10),o=a(4),s=a(5),c=a(7),l=a(6),u=a(8),p=a(2),d=a(181),h=a.n(d),m=a(0),f=a.n(m),b=a(16),v=a(18),E=a(12),y=a(14),g=a(9),O=a(11),k=a(182),j=a(183),C=a(84),N=a(184),S=a(185),x=a(22),w=function(t){function a(t){var n;return Object(o.a)(this,a),(n=Object(c.a)(this,Object(l.a)(a).call(this,t))).onNext=n.onNext.bind(Object(p.a)(Object(p.a)(n))),n.save=n.save.bind(Object(p.a)(Object(p.a)(n))),e(function(){n.props.fetchOpenOrders(),n.props.fetchMembers()}),n.state={els:[],drivers:[]},n}return Object(u.a)(a,t),Object(s.a)(a,[{key:"onNext",value:function(e){var t=this.state;for(var a in e)t[a]=e[a];this.setState(t)}},{key:"save",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t={},this.state.vks)t[a]=this.state.vks[a],t[a].member=this.state.vks[a].member.id;return e.next=4,this.props.save({orderId:this.state.order.id,date:this.state.date,compensationEntries:this.state.vks,els:this.state.els,drivers:this.state.drivers,food:this.state.food,remarks:this.state.remarks,creatorId:this.props.user.id});case 4:return this.props.history.push("/billing-reports"),e.abrupt("return",!0);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.loading?f.a.createElement(b.a,{title:"Verrechnungsrapport erfassen"},f.a.createElement(x.a,null)):f.a.createElement(b.a,{title:"Verrechnungsrapport erfassen"},f.a.createElement(v.a,null,f.a.createElement(E.a,{className:"col"},f.a.createElement(y.a,{title:""},f.a.createElement(h.a,{nav:f.a.createElement(k.a,null)},f.a.createElement(j.a,{openOrders:this.props.openOrders,onNext:this.onNext}),f.a.createElement(C.a,{onNext:this.onNext}),f.a.createElement(N.a,{onNext:this.onNext}),f.a.createElement(S.a,{onNext:this.save,order:this.state.order,date:this.state.date,vks:this.state.vks,els:this.state.els.map(function(e){return e.firstname+" "+e.lastname}),drivers:this.state.drivers.map(function(e){return e.firstname+" "+e.lastname}),food:this.state.food,remarks:this.state.remarks}))))))}}]),a}(m.Component),T=Object(O.c)(function(e){return{user:e.data.user.data,openOrders:e.data.openOrders,members:e.data.members,loading:e.data.openOrders.loading||e.data.members.loading||e.data.user.loading||!e.data.openOrders.ids||!e.data.members.ids||Object.keys(e.data.user.data).length<0}},function(e){return{fetchOpenOrders:function(){e(g.a.fetchOpenOrders())},fetchMembers:function(){e(g.a.fetchMembers())},save:function(t){return e(g.a.addBillingReport(t))}}})(w)}).call(this,a(157).setImmediate)},182:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(0),l=a.n(c),u=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"renderSteps",value:function(){for(var e=[],t=this.props.totalSteps||0,a=1;a<=t;a++){var n="dot";a==this.props.currentStep&&(n+=" active"),e.push(l.a.createElement("span",{key:a,className:n},"\u2022"))}return e}},{key:"render",value:function(){return l.a.createElement("div",{key:"WizardNav",id:"WizardNav",className:"d-flex justify-content-center"},this.renderSteps())}}]),t}(c.Component)},183:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var n=a(3),r=a.n(n),i=a(10),o=a(26),s=a(4),c=a(5),l=a(7),u=a(6),p=a(8),d=a(2),h=a(0),m=a.n(h),f=a(47),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onInputChange=a.onInputChange.bind(Object(d.a)(Object(d.a)(a))),a.validate=a.validate.bind(Object(d.a)(Object(d.a)(a))),a.state={order:"",date:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"renderOptions",value:function(){var e=[m.a.createElement("option",{key:"none",value:""},"Bitte W\xe4hlen")],t=!0,a=!1,n=void 0;try{for(var r,i=this.props.openOrders.ids[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value,s=this.props.openOrders.byId[o];s.contact.firstname?e.push(m.a.createElement("option",{key:s.documentNr,value:s.id},"".concat(s.title))):e.push(m.a.createElement("option",{key:s.documentNr,value:s.id},"".concat(s.title," (").concat(s.contact.lastname,")")))}}catch(c){a=!0,n=c}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return e}},{key:"onInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(o.a)({},n,a))}},{key:"validate",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.formEl){e.next=5;break}return t=this.formEl.checkValidity(),this.formEl.className="was-validated",t&&this.props.onNext({order:this.props.openOrders.byId[parseInt(this.state.order)],date:new Date(this.state.date)}),e.abrupt("return",t);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return m.a.createElement(f.a,Object.assign({title:"Details",onNextStep:this.validate},this.props),m.a.createElement("form",{ref:function(t){return e.formEl=t}},m.a.createElement("h5",null,"Einsatz"),m.a.createElement("select",{className:"form-control",name:"order",id:"order",onChange:this.onInputChange,value:this.state.order,required:!0},this.renderOptions()),m.a.createElement("br",null),m.a.createElement("h5",null,"Datum"),m.a.createElement("input",{type:"Date",name:"date",id:"date",className:"form-control",value:this.state.date,onChange:this.onInputChange,required:!0})))}}]),t}(h.Component)},184:function(e,t,a){"use strict";a.d(t,"a",function(){return E});var n=a(3),r=a.n(n),i=a(10),o=a(26),s=a(4),c=a(5),l=a(7),u=a(6),p=a(8),d=a(2),h=a(0),m=a.n(h),f=a(47),b=a(58),v=a(49),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onInputChange=a.onInputChange.bind(Object(d.a)(Object(d.a)(a))),a.onNext=a.onNext.bind(Object(d.a)(Object(d.a)(a))),a.onELChange=a.onSelectChange("els"),a.onDriversChange=a.onSelectChange("drivers"),a.state={els:[],drivers:[],food:!1,remarks:""},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.id;this.setState(Object(o.a)({},n,a))}},{key:"onSelectChange",value:function(e){var t=this;return function(a){a?t.setState(Object(o.a)({},e,a)):t.setState(Object(o.a)({},e,[]))}}},{key:"onNext",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.elSelect){e.next=6;break}if(t=!0,this.state.els.length<=0&&(t=!1),!t){e.next=6;break}return this.props.onNext(this.state),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return m.a.createElement(f.a,Object.assign({title:"Weiteres",onNextStep:this.onNext},this.props),m.a.createElement("form",{ref:function(t){return e.formEl=t},className:"was-validated"},m.a.createElement("h5",null,"ELs"),m.a.createElement(v.a,{ref:function(t){return e.elSelect=t},onChange:this.onELChange,isMulti:!0,required:!0}),m.a.createElement("br",null),m.a.createElement("h5",null,"Fahrer"),m.a.createElement(v.a,{ref:function(t){return e.driversSelect=t},onChange:this.onDriversChange,isMulti:!0,required:!1}),m.a.createElement("br",null),m.a.createElement("h5",null,"Diverses"),m.a.createElement(b.a,{id:"food",checked:this.state.food,onChange:this.onInputChange,label:"Verpflegung"}),m.a.createElement("br",null),m.a.createElement("h5",null,"Bemerkungen"),m.a.createElement("small",{className:"text-muted"},"Bei mehreren EL bitte die Schichtzeiten hier eingeben"),m.a.createElement("textarea",{id:"remarks",value:this.state.remarks,onChange:this.onInputChange,className:"form-control"})))}}]),t}(h.Component)},185:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(0),l=a.n(c),u=a(47),p=a(29),d=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(u.a,Object.assign({title:"Zusammenfassung",onNextStep:this.props.onNext},this.props),l.a.createElement("h5",null,"Einsatz"),l.a.createElement("p",null,this.props.order?this.props.order.title:""),l.a.createElement("h5",null,"Datum"),l.a.createElement("p",null,this.props.date?this.props.date.toLocaleDateString():""),l.a.createElement("h5",null,"VKs"),l.a.createElement(p.a,{columns:[{text:"VK",keys:{member:["firstname","lastname"]}},{text:"Von",keys:["from"],format:"toLocaleTimeString"},{text:"Bis",keys:["until"],format:"toLocaleTimeString"},{text:"Verrechnet",keys:["charge"]},{text:"Anzahl Stunden",keys:["totalHours"]}],defaultSort:{keys:["from"],direction:"asc"},data:this.props.vks?this.props.vks:{}}),l.a.createElement("h5",null,"ELs"),l.a.createElement("p",null,this.props.els.join(",")),l.a.createElement("h5",null,"Fahrer"),l.a.createElement("p",null,this.props.drivers.join(",")),l.a.createElement("h5",null,"Diverses"),l.a.createElement("p",{className:"switch switch-sm"},l.a.createElement("input",{type:"checkbox",className:"switch",id:"food",name:"food",checked:this.props.food}),l.a.createElement("label",{htmlFor:"food"},"Verpflegung")),l.a.createElement("h5",null,"Bemerkungen"),l.a.createElement("p",null,this.props.remarks?this.props.remarks:""))}}]),t}(c.Component)},19:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var n=a(3),r=a.n(n),i=a(10),o=a(4),s=a(5),c=a(7),l=a(6),u=a(8),p=a(2),d=a(0),h=a.n(d),m=a(406),f=a(21),b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).onClick=a.onClick.bind(Object(p.a)(Object(p.a)(a))),a.state={state:"normal"},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onClick",value:function(){var e=Object(i.a)(r.a.mark(function e(t){var a=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("normal"!==this.state.state){e.next=6;break}return this.setState({state:"inProgress"}),e.next=4,this.props.onClick(t);case 4:this.setState({state:"done"}),setTimeout(function(){a.setState({state:"normal"})},1e3);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){switch(this.state.state){case"normal":return h.a.createElement(m.a,Object.assign({},this.props,{onClick:this.onClick}),this.props.children);case"inProgress":return h.a.createElement(m.a,Object.assign({},this.props,{onClick:this.onClick}),h.a.createElement("svg",{className:"button-loading",viewBox:"0 0 128 128"},h.a.createElement("g",null,h.a.createElement("path",{d:"M64 127.75A63.76 63.76 0 0 1 52.8 1.23v14.23a49.8 49.8 0 1 0 22.4 0V1.23A63.76 63.76 0 0 1 64 127.75z","fill-opacity":"1"}),h.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 64 64",to:"360 64 64",dur:"2160ms",repeatCount:"indefinite"}))));case"done":return h.a.createElement(m.a,Object.assign({},this.props,{onClick:this.onClick}),h.a.createElement(f.a,{icon:"check-circle"}));default:return h.a.createElement(m.a,Object.assign({},this.props,{onClick:this.onClick}),this.props.children)}}}]),t}(d.Component)},190:function(e,t,a){e.exports=a(401)},22:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(0),l=a.n(c),u=function(e){function t(){return Object(n.a)(this,t),Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"loading-animation "+(this.props.fullscreen?"fullscreen":"")},l.a.createElement("div",{className:"sk-folding-cube"},l.a.createElement("div",{className:"sk-cube1 sk-cube"}),l.a.createElement("div",{className:"sk-cube2 sk-cube"}),l.a.createElement("div",{className:"sk-cube4 sk-cube"}),l.a.createElement("div",{className:"sk-cube3 sk-cube"})),this.props.children)}}]),t}(c.Component)},29:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(43),r=a(4),i=a(5),o=a(7),s=a(6),c=a(8),l=a(2),u=a(0),p=a.n(u),d=a(21),h=a(58),m=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).sortClick=a.sortClick.bind(Object(l.a)(Object(l.a)(a))),a.search=a.search.bind(Object(l.a)(Object(l.a)(a))),a.ref=a.ref.bind(Object(l.a)(Object(l.a)(a))),a.props.defaultSort?a.state={sortKey:a.props.defaultSort.keys.join("-"),sortDirection:a.props.defaultSort.direction,searchableKeys:a.genSearchKeys(a.props.columns)}:a.state={sortKey:"",sortDirection:"asc",searchableKeys:a.genSearchKeys(a.props.columns)},a}return Object(c.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){e!==this.props&&this.setState({searchableKeys:this.genSearchKeys(e.columns)})}},{key:"ref",value:function(e){this.props.ref&&this.props.ref(e)}},{key:"sort",value:function(e,t,a){var n=this.genSortKeys(e),r=[];for(var i in a=a||this.props.data){var o=a[i],s=[];for(var c in n){var l=n[c];if(l instanceof Array){var u=!0,p=!1,d=void 0;try{for(var h,m=l[Symbol.iterator]();!(u=(h=m.next()).done);u=!0){var f=h.value;o[c]&&(f.indexOf("phone")>-1?s.push(o[c][f].replace(" ","")):o[l]instanceof Date?s.push(o[l].getTime()):s.push(o[c][f]))}}catch(y){p=!0,d=y}finally{try{u||null==m.return||m.return()}finally{if(p)throw d}}}else l.indexOf("phone")>-1?s.push(o[l].replace(" ","")):o[l]instanceof Date?s.push(o[l].getTime()):s.push(o[l])}r.push({id:i,value:s.join(" ").toLowerCase()})}r.sort(function(e,a){var n,r;return n=parseFloat(e.value),r=parseFloat(a.value),(isNaN(n)||isNaN(r))&&(n=e.value,r=a.value),n<r?"asc"===t?-1:1:n>r?"asc"===t?1:-1:0});for(var b={},v=0;v<r.length;v++){var E=r[v];b["_".concat(E.id)]=this.props.data[E.id]}return b}},{key:"genSortKeys",value:function(e){var t=[e];e.indexOf("_")>-1&&(t=e.split("_"));var a={},n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;c&&(c.indexOf(".")>-1?a[c.split(".")[0]]=c.split(".")[1].split("-"):a=c.split("-"))}}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a}},{key:"sortClick",value:function(e){var t=e.target.dataset.key;t||(t=e.target.parentElement.dataset.key);var a="asc";this.state.sortKey===t&&(a="asc"===this.state.sortDirection?"desc":"asc"),this.props.onSort&&this.props.onSort(e,this.genSortKeys(t),a),this.setState({sortDirection:a,sortKey:t})}},{key:"genSearchKeys",value:function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.searchable&&(s.keys instanceof Array?t=t.concat(s.keys):t.push(s.keys))}}catch(c){n=!0,r=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return t}},{key:"search",value:function(e,t){var a={};if(t=t||this.props.data,e&&this.state.searchableKeys.length>0){for(var n in t){var r=t[n],i="",o=!0,s=!1,c=void 0;try{for(var l,u=this.state.searchableKeys[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var p=l.value;if(p instanceof Object)for(var d in p){var h=!0,m=!1,f=void 0;try{for(var b,v=p[d][Symbol.iterator]();!(h=(b=v.next()).done);h=!0){var E=b.value;r[d]&&r[d][E]&&(E.indexOf("phone")>-1&&(i+=r[d][E].toString().replace(" ","")+" "),i+=r[d][E].toString()+" ")}}catch(y){m=!0,f=y}finally{try{h||null==v.return||v.return()}finally{if(m)throw f}}}else"string"===typeof p&&r.hasOwnProperty(p)&&null!==r[p]&&(p.indexOf("phone")>-1&&(i+=r[p].toString().replace(" ","")+" "),i+=r[p].toString()+" ")}}catch(y){s=!0,c=y}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}i.toLowerCase().indexOf(e.toLowerCase())>-1&&!a.hasOwnProperty(n)&&(a[n]=r)}return a}return t}},{key:"renderRows",value:function(){var e=this,t=[],a=this.props.data;a=this.sort(this.state.sortKey,this.state.sortDirection,a),a=this.search(this.props.searchString||"",a);var r=function(r){var i=a[r],o=[];e.props.checkable&&o.push(p.a.createElement("td",{style:{width:"40px"}},p.a.createElement(h.a,{onChange:e.props.onCheck||function(){}})));var s=!0,c=!1,l=void 0;try{for(var u,d=function(){var e=u.value,t="";if(e.content)o.push(p.a.createElement("td",{key:e.keys instanceof Array?e.keys.join("-"):Object.keys(e.keys).map(function(t){return e.keys[t].join("-")}).join("-")},e.content||""));else{var a=[];if(e.keys instanceof Array)a=e.keys.map(function(a){if(t="-".concat(a),i[a]instanceof Date){if(e.format){var n,r=e.format;if(e.format.indexOf("(")>-1&&e.format.indexOf(")")>-1){var o=e.format.match(/(\w+)\((.*)\)/);o&&o.length>2&&(r=o[1],n=o[2])}return i[a][r](n)}return i[a].toLocaleDateString()}if("boolean"===typeof i[a])return i[a]?"\u2713":"\u2a2f";if(i[a]instanceof Array)return i[a].map(function(t){if(t instanceof Date){if(e.format){var a,n=e.format;if(e.format.indexOf("(")>-1&&e.format.indexOf(")")>-1){var r=e.format.match(/(\w+)\((.*)\)/);r&&r.length>2&&(n=r[1],a=r[2])}return t[n](a)}return t.toLocaleDateString()}if("boolean"===typeof t)return t?"\u2713":"\u2a2f";if(e.format){var i,o=e.format;if(e.format.indexOf("(")>-1&&e.format.indexOf(")")>-1){var s=e.format.match(/(\w+)\((.*)\)/);s&&s.length>2&&(o=s[1],i=s[2])}return t[o](i)}return t});if(e.format){var s,c=e.format;if(e.format.indexOf("(")>-1&&e.format.indexOf(")")>-1){var l=e.format.match(/(\w+)\((.*)\)/);l&&l.length>2&&(c=l[1],s=l[2])}return i[a][c](s)}return i[a]});else{var r=function(n){t="-".concat(t).concat(n),a=a.concat(e.keys[n].map(function(t){if(i.hasOwnProperty(n)&&i[n]){if(i[n][t]instanceof Date){if(e.format){var a,r=e.format;if(e.format.indexOf("(")>-1&&e.format.indexOf(")")>-1){var o=e.format.match(/(\w+)\((.*)\)/);o&&o.length>2&&(r=o[1],a=o[2])}return i[n][t][r](a)}return i[n][t].toLocaleDateString()}if("boolean"===typeof i[n][t])return i[n][t]?"\u2713":"\u2a2f";if(e.format){var s,c=e.format;if(e.format.indexOf("(")>-1&&e.format.indexOf(")")>-1){var l=e.format.match(/(\w+)\((.*)\)/);l&&l.length>2&&(c=l[1],s=l[2])}return i[n][t][c](s)}return i[n][t]}return""}))};for(var s in e.keys)r(s)}e.link?o.push(p.a.createElement("td",{className:e.className||"",key:i.id+t},p.a.createElement("a",{key:i.id+Object(n.a)(a||[Math.random().toString()]).concat(["a"]).join(" "),href:(e.linkPrefix?e.linkPrefix:"")+a.join(" "),target:"_blank"},(e.prefix?e.prefix:"")+a.join(" ")+(e.suffix?e.suffix:"")))):o.push(p.a.createElement("td",{className:e.className||"",key:i.id+t},(e.prefix?e.prefix:"")+a.join(" ")+(e.suffix?e.suffix:"")))}},m=e.props.columns[Symbol.iterator]();!(s=(u=m.next()).done);s=!0)d()}catch(b){c=!0,l=b}finally{try{s||null==m.return||m.return()}finally{if(c)throw l}}var f=r;a instanceof Array&&(f=i.id),t.push(p.a.createElement("tr",{key:f,"data-key":f},o))};for(var i in a)r(i);return t}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"table-responsive"},p.a.createElement("table",{className:"table table-striped ".concat(this.props.className||""),ref:this.ref},p.a.createElement("thead",{key:"table-head"},p.a.createElement("tr",{key:"table-head-row"},this.props.checkable?p.a.createElement("th",null):"",this.props.columns.map(function(t){var a,n="";if(t.keys instanceof Array)n=t.keys.join("-");else for(var r in t.keys)n+="_"+r+"."+t.keys[r].join("-");return n===e.state.sortKey&&(a="asc"===e.state.sortDirection?p.a.createElement(d.a,{icon:"sort-down",className:"float-right"}):p.a.createElement(d.a,{icon:"sort-up",className:"float-right"})),t.sortable?p.a.createElement("th",{key:n,"data-key":n,scope:"col",onClick:e.sortClick,style:{cursor:"pointer"}},t.text,a):p.a.createElement("th",{key:n,"data-key":n,scope:"col"},t.text)}))),p.a.createElement("tbody",{key:"table-body"},this.renderRows())))}}]),t}(u.Component)},32:function(e,t,a){"use strict";a.d(t,"a",function(){return v});var n=a(3),r=a.n(n),i=a(10),o=a(4),s=a(5),c=a(7),l=a(6),u=a(8),p=a(2),d=a(0),h=a.n(d),m=a(21),f=a(362),b=a(19),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).onClick=a.onClick.bind(Object(p.a)(Object(p.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"onClick",value:function(){var e=Object(i.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.props.onClick){e.next=4;break}return e.next=4,this.props.onClick(t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.to?h.a.createElement(f.a,{to:{pathname:this.props.to,state:this.props.state||{}},className:"action-button btn btn-outline-dark"},h.a.createElement(m.a,{icon:this.props.icon})):h.a.createElement(b.a,{onClick:this.onClick,variant:"outline-dark",className:"action-button"},h.a.createElement(m.a,{icon:this.props.icon}))}}]),t}(d.Component)},366:function(e,t,a){},373:function(e,t){},374:function(e,t){},38:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return y});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(2),l=a(0),u=a.n(l),p=a(16),d=a(18),h=a(12),m=a(14),f=a(29),b=a(21),v=a(22),E=a(32),y=function(t){function a(t){var r;return Object(n.a)(this,a),(r=Object(i.a)(this,Object(o.a)(a).call(this,t))).props.data.loading||e(function(){r.props.fetchData()}),r.elementView=r.elementView.bind(Object(c.a)(Object(c.a)(r))),r.textSearch=r.textSearch.bind(Object(c.a)(Object(c.a)(r))),r.onSort=r.onSort.bind(Object(c.a)(Object(c.a)(r))),r.state={searchString:"",sort:{keys:r.props.data.sort.keys,direction:r.props.data.sort.direction}},r}return Object(s.a)(a,t),Object(r.a)(a,[{key:"elementView",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentNode&&e.currentTarget.parentNode.parentNode.parentElement){var t=e.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");1==e.button?window.open(document.location.origin+this.props.viewLocation+t):this.props.history.push(this.props.viewLocation+t)}}},{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e||this.state.searchString!==t.searchString}},{key:"onSort",value:function(e,t,a){this.setState({sort:{keys:t,direction:a}})}},{key:"textSearch",value:function(e){this.props.onSearch&&this.props.onSearch(e.target.value),this.setState({searchString:e.target.value})}},{key:"renderTable",value:function(){if(this.props.data.loading)return u.a.createElement(v.a,null);var e={},t=!0,a=!1,n=void 0;try{for(var r,i=this.props.data.ids[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;e["_"+o]=this.props.data.byId[o]}}catch(s){a=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return u.a.createElement(f.a,{columns:this.props.tableColumns.concat([{text:"Actions",keys:["id"],content:u.a.createElement("div",{className:"btn-group"},u.a.createElement("button",{className:"btn btn-success view",onMouseUp:this.elementView},u.a.createElement(b.a,{icon:"eye"})),this.props.rowActions)}]),data:e,defaultSort:this.state.sort,searchString:this.state.searchString,onSort:this.onSort})}},{key:"render",value:function(){var e=this,t=[];return this.props.pdfExport&&t.push(u.a.createElement(E.a,{key:"pdf-export",to:this.props.pdfExport,state:this.state,icon:"file-pdf"})),t=t.concat(this.props.panelActions||[]),u.a.createElement(p.a,{title:this.props.title},u.a.createElement(d.a,null,u.a.createElement(h.a,null,u.a.createElement(m.a,{actions:t,title:u.a.createElement("input",{id:"search",value:this.state.searchString,placeholder:"Search...",className:"float-right form-control form-control-sm",onChange:function(t){return e.textSearch(t)}})},this.renderTable()))),this.props.children)}}]),a}(l.Component)}).call(this,a(157).setImmediate)},401:function(e,t,a){"use strict";a.r(t);var n=a(68),r=a(20),i=a(172);n.b.add(i.a,r.f,r.o,r.r,r.p,r.k,r.n,r.x,r.D,r.y,r.a,r.u,r.j,r.h,r.d,r.B,r.F,r.g,r.C,r.e,r.A,r.z,r.v,r.m,r.l,r.q,r.w,r.s,r.i,r.i,r.E,r.b,r.c,r.t);var o=a(0),s=a.n(o),c=a(37),l=a.n(c),u=a(4),p=a(5),d=a(7),h=a(6),m=a(8),f=a(11),b=a(80),v=a(42),E=a(15),y=a(69),g=a(61);var O=Object(v.c)({navibar_open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!g.a.mobile();switch((arguments.length>1?arguments[1]:void 0).type){case E.b.NAVIBAR_TOGGLE:return!e;case E.b.NAVIBAR_OPEN:return!0;case E.b.NAVIBAR_CLOSE:return!1;default:return e}},navibar_level:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.b.NAVIBAR_LEVEL_OPEN:return t.payload;case E.b.NAVIBAR_LEVEL_COLLAPSE:return"";default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E.b.NOTIFICATION_SUCCESS:return y.toast.success(t.payload,{autoClose:2e3,position:g.a.mobile()?"bottom-center":"top-right"}),e;case E.b.NOTIFICATION_ERROR:return y.toast.error(t.payload,{autoClose:2e3,position:g.a.mobile()?"bottom-center":"top-right"}),e;default:return e}}}),k=a(9);var j={ui:O,data:Object(v.c)({payouts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["until"],direction:"desc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_PAYOUTS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_PAYOUTS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=function(){var e=s.value,t={};for(var r in e.compensations){var i=e.compensations[r];i.hasOwnProperty("description")||i.hasOwnProperty("billingReport")&&i.billingReport&&i.billingReport.hasOwnProperty("order")&&(i=i.billingReport.order.hasOwnProperty("contact")&&!i.billingReport.order.contact.hasOwnProperty("firstname")?Object.assign(i,{description:"".concat(i.billingReport.order.title," (").concat(i.billingReport.order.contact.lastname,")")}):Object.assign(i,{description:"".concat(i.billingReport.order.title)})),e.compensations[r]=i,t.hasOwnProperty(i.member.id)||(t[i.member.id]=[]),t[i.member.id].push(i)}e.compensationsByMember=t,e.totalWithoutMinus=Object.keys(t).map(function(e){var a=0;return t[e].map(function(e){return a+=e.amount}),a>0?a:0}).reduce(function(e,t){return e+t}),a[e.id]=e,n.push(e.id)},l=t.payload[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)c()}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});default:return e}},collectionPoints:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["city"],direction:"desc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_COLLECTION_POINTS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_COLLECTION_POINTS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id)}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,data:void 0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.b.FETCH_USER:return Object.assign({},e,{loading:!0});case k.b.GOT_USER:return Object.keys(t.payload).length>0?{loading:!1,data:t.payload}:{loading:!1,data:void 0};case E.b.LOGOUT:return{loading:!1,data:void 0};default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["displayName"],direction:"asc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_USERS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_USERS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id)}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["lastname","firstname"],direction:"asc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_CONTACTS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_CONTACTS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id)}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});default:return e}},members:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["lastname","firstname"],direction:"asc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_MEMBERS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_MEMBERS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id)}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});default:return e}},ranks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["name"],direction:"asc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_RANKS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_RANKS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id)}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});default:return e}},orders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["documentNr"],direction:"desc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_ORDERS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_ORDERS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id)}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});default:return e}},openOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["title"],direction:"desc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_OPEN_ORDERS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_OPEN_ORDERS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id)}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});default:return e}},billingReports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["orderDate"],direction:"desc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_BILLING_REPORTS:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_BILLING_REPORTS:if(Object.keys(t.payload).length<1)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id)}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});case k.b.APPROVE_BILLING_REPORT:return a=Object.assign({},e.byId,Object.assign({},e.byId[t.payload],{status:"approved"})),Object.assign({},e,{byId:a});default:return e}},compensationEntries:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,byId:{},ids:[],sort:{keys:["date"],direction:"desc"}},t=arguments.length>1?arguments[1]:void 0,a={},n=[];switch(t.type){case k.b.FETCH_COMPENSATION_ENTRIES:return 0===e.ids.length?Object.assign({},e,{loading:!0}):Object.assign({},e,{loading:!1});case k.b.GOT_COMPENSATION_ENTRIES:if(Object.keys(t.payload).length<0)return e;var r=!0,i=!1,o=void 0;try{for(var s,c=t.payload[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;a[l.id]=l,n.push(l.id),l.hasOwnProperty("description")||l.hasOwnProperty("billingReport")&&l.billingReport.hasOwnProperty("order")&&(l.billingReport.order.hasOwnProperty("contact")&&!l.billingReport.order.contact.hasOwnProperty("firstname")?a[l.id]=Object.assign(a[l.id],{description:"".concat(l.billingReport.order.title," (").concat(l.billingReport.order.contact.lastname,")")}):a[l.id]=Object.assign(a[l.id],{description:"".concat(l.billingReport.order.title)}))}}catch(u){i=!0,o=u}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return Object.assign({},e,{loading:!1,byId:a,ids:n});case k.b.APPROVE_COMPENSATION_ENTRY:return a=Object.assign({},e.byId,Object.assign({},e.byId[t.payload],{status:"approved"})),Object.assign({},e,{byId:a});default:return e}},mailingLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.b.GOT_MEMBERS:var a={all:[],drivers:[],vks:[],squad:[],vst:[],con:[]},n=!0,r=!1,i=void 0;try{for(var o,s=t.payload[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;a.all.push(c.mail),c.mailSecond&&a.all.push(c.mailSecond),a.all=a.all.concat(c.moreMails||[]),c.contactGroups.find(function(e){return 9===e.bexioId})&&(a.drivers.push(c.mail),c.mailSecond&&a.drivers.push(c.mailSecond),a.drivers=a.drivers.concat(c.moreMails||[])),c.contactGroups.find(function(e){return 17===e.bexioId||13===e.bexioId||11===e.bexioId||12===e.bexioId||28===e.bexioId||29===e.bexioId||15===e.bexioId||27===e.bexioId||26===e.bexioId||10===e.bexioId||14===e.bexioId})&&(a.vks.push(c.mail),c.mailSecond&&a.vks.push(c.mailSecond),a.vks=a.vks.concat(c.moreMails||[])),c.contactGroups.find(function(e){return 13===e.bexioId||12===e.bexioId||28===e.bexioId||29===e.bexioId||15===e.bexioId||14===e.bexioId})&&(a.squad.push(c.mail),c.mailSecond&&a.squad.push(c.mailSecond),a.squad=a.squad.concat(c.moreMails||[])),c.contactGroups.find(function(e){return 16===e.bexioId})&&(a.vst.push(c.mail),c.mailSecond&&a.vst.push(c.mailSecond),a.vst=a.vst.concat(c.moreMails||[])),c.contactGroups.find(function(e){return 22===e.bexioId})&&(a.con.push(c.mail),c.mailSecond&&a.con.push(c.mailSecond),a.con=a.con.concat(c.moreMails||[]))}}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return a;default:return e}}})},C=a(175),N=a(67),S=a(156),x=a(176);var w=a(408),T=a(361),I=a(405),_=a(13),A=a(16),R=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement(A.a,{title:""},s.a.createElement("div",{className:"gandalf"},s.a.createElement("div",{className:"fireball"}),s.a.createElement("div",{className:"skirt"}),s.a.createElement("div",{className:"sleeves"}),s.a.createElement("div",{className:"shoulders"},s.a.createElement("div",{className:"hand left"}),s.a.createElement("div",{className:"hand right"})),s.a.createElement("div",{className:"head"},s.a.createElement("div",{className:"hair"}),s.a.createElement("div",{className:"beard"}))),s.a.createElement("div",{className:"message"},s.a.createElement("h1",null,"403 - You Shall Not Pass"),s.a.createElement("p",null,"Uh oh, Gandalf is blocking the way!",s.a.createElement("br",null),"Maybe you have a typo in the url? Or you meant to go to a different location? Like...Hobbiton?")))}}]),t}(o.Component),M=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=!0,a=!1,n=void 0;try{for(var r,i=this.props.roles[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;if(this.props.user&&(this.props.user.roles.includes(o)||this.props.user.roles.includes(_.a.ADMIN)))return s.a.createElement(T.a,{exact:this.props.exact,path:this.props.path,component:this.props.component})}}catch(c){a=!0,n=c}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return this.props.user&&this.props.showError?(this.props.showError("Not Authorized!"),s.a.createElement(T.a,{exact:this.props.exact,path:this.props.path,component:R})):s.a.createElement(T.a,{exact:this.props.exact,path:this.props.path,component:function(){return s.a.createElement(I.a,{push:!0,to:{pathname:"/login",state:{prevLocation:(e.props.location||{pathname:""}).pathname}}})}})}}]),t}(o.Component),D=Object(f.c)(function(e){return{user:e.data.user.data}},function(e){return{showError:function(t){e(E.a.showError(t))}}})(M),P=a(17),L=a(50),B=(a(366),a(368),a(14)),F=a(12),V=a(18),G=a(362),U=a(22),H=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUser()}},{key:"renderShortcuts",value:function(){var e=[s.a.createElement(G.a,{key:"billingreport",to:"/billing-reports/add/",className:"btn btn-block btn-outline-primary"},"Verrechnungsrapport erstellen")];return this.props.user.bexioContact&&e.push(s.a.createElement(G.a,{key:"profile",to:"/me",className:"btn btn-block btn-outline-primary"},"Mein Profil")),e}},{key:"render",value:function(){return this.props.loading||!this.props.user?s.a.createElement(A.a,{title:"Dashboard"},s.a.createElement(U.a,null)):s.a.createElement(A.a,{title:"Dashboard"},s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Shortcuts"},this.renderShortcuts()))))}}]),t}(o.Component),z=Object(f.c)(function(e,t){return{user:e.data.user.data,loading:e.data.user.loading}},function(e,t){return{fetchUser:function(){e(k.a.fetchUser())}}})(H),K=a(3),Y=a.n(K),W=a(10),q=a(2),X=a(38),Z=a(32),J=a(71),$=a.n(J),Q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).excelExport=a.excelExport.bind(Object(q.a)(Object(q.a)(a))),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"excelExport",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){var a,n,r,i,o,s;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=[],this.props.data.byId)r=this.props.data.byId[n],i={Nachname:r.lastname,Vorname:r.firstname,Rang:r.rank||"",Funktionen:(r.functions||[]).join(","),Geburtstag:r.birthday,Adresse:"".concat(r.address,", ").concat(r.postcode," ").concat(r.city),Abholpunkt:"","E-Mail":r.mail,"E-Mail 2":r.mailSecond,Festnetz:r.phoneFixed,Mobile:r.phoneMobile},r.collectionPoint&&(i.Abholpunkt="(".concat(r.collectionPoint.name,") ").concat(r.collectionPoint.address,", ").concat(r.collectionPoint.postcode," ").concat(r.collectionPoint.city)),a.push(i);o=$.a.utils.json_to_sheet(a),s=$.a.utils.book_new(),$.a.utils.book_append_sheet(s,o,"Mitglieder"),$.a.writeFile(s,"Mitglieder.xlsx");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement(X.a,Object.assign({},this.props,{pdfExport:"/members/pdf",panelActions:[s.a.createElement(Z.a,{key:"excel-export",icon:"file-excel",onClick:this.excelExport})]}))}}]),t}(o.Component),ee=Object(f.c)(function(e){return{data:e.data.members,title:"Mitglieder",viewLocation:"/contact/",tableColumns:[{text:"Name",keys:["lastname","firstname"],sortable:!0,searchable:!0},{text:"Grad",keys:["rank"],sortable:!0,searchable:!0},{text:"Funktionen",keys:["functions"],sortable:!0,searchable:!0},{text:"Addresse",keys:["address","postcode","city"],link:!0,linkPrefix:"https://www.google.com/maps/search/",sortable:!0,searchable:!0},{text:"Abholpunkt",keys:{collectionPoint:["address","postcode","city"]},link:!0,linkPrefix:"https://www.google.com/maps/search/",sortable:!0,searchable:!0},{text:"Festnetz",keys:["phoneFixed"],link:!0,linkPrefix:"tel:",sortable:!0,searchable:!0},{text:"Festnetz 2",keys:["phoneFixedSecond"],link:!0,linkPrefix:"tel:",sortable:!0,searchable:!0},{text:"Mobile",keys:["phoneMobile"],link:!0,linkPrefix:"tel:",sortable:!0,searchable:!0},{text:"E-Mail",keys:["mail"],link:!0,linkPrefix:"mailto:",sortable:!0,searchable:!0},{text:"E-Mail 2",keys:["mailSecond"],link:!0,linkPrefix:"mailto:",sortable:!0,searchable:!0}]}},function(e){return{fetchData:function(){e(k.a.fetchMembers())}}})(Q),te=a(43),ae=a(26),ne=a(58),re=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderChildren",value:function(){if("undefined"!==typeof this.props.value){if("checkbox"===this.props.type){var e=this.props.onChange||function(){};return this.props.editable||(e=function(){return!1}),s.a.createElement(ne.a,{id:this.props.id,checked:this.props.value,onChange:e,label:""})}if("textarea"===this.props.type)return s.a.createElement("textarea",{id:this.props.id,name:this.props.id,value:this.props.value,onChange:this.props.onChange,className:"form-entry form-control"+(this.props.editable?"":"-plaintext"),readOnly:!this.props.editable});var t=this.props.value;if("date"===this.props.type){var a=this.props.value;"string"===typeof this.props.value&&(a=new Date(this.props.value)),t="".concat(a.getUTCFullYear(),"-").concat(("0"+(a.getUTCMonth()+1)).slice(-2),"-").concat(("0"+a.getUTCDate()).slice(-2))}return s.a.createElement("input",{id:this.props.id,name:this.props.id,type:this.props.type?this.props.type:"text",value:t,onChange:this.props.onChange,className:"form-entry form-control"+(this.props.editable?"":"-plaintext"),readOnly:!this.props.editable})}return this.props.children}},{key:"render",value:function(){return s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-6"},this.props.title),s.a.createElement(F.a,{className:"col-6"},this.renderChildren()))}}]),t}(o.Component),ie=function e(){Object(u.a)(this,e)},oe=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),t}(ie),se=a(48),ce=function(e){function t(e){var a;if(Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).props.defaultValue instanceof Array){var n=[],r=!0,i=!1,o=void 0;try{for(var s,c=a.props.defaultValue[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;Object.keys(l).length>0&&n.push({value:l.id.toString(),label:"(".concat(l.name,") ").concat(l.address,", ").concat(l.postcode," ").concat(l.city)})}}catch(p){i=!0,o=p}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}a.state={value:n}}else a.state={};return a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.defaultValue instanceof Array){var t=[],a=!0,n=!1,r=void 0;try{for(var i,o=e.defaultValue[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;Object.keys(s).length>0&&t.push({value:s.id.toString(),label:"(".concat(s.name,") ").concat(s.address,", ").concat(s.postcode," ").concat(s.city)})}}catch(c){n=!0,r=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}this.setState({value:t})}}},{key:"componentWillMount",value:function(){this.props.collectionPoints.ids.length<1&&this.props.fetchCollectionPoints()}},{key:"prepareOptions",value:function(){var e=[];if(Object.keys(this.props.collectionPoints.byId).length>0)for(var t in this.props.collectionPoints.byId){var a=this.props.collectionPoints.byId[t];e.push({label:"(".concat(a.name,") ").concat(a.address,", ").concat(a.postcode," ").concat(a.city),value:t})}return e}},{key:"onChange",value:function(e){var t=[e];this.props.isMulti&&(t=e),this.setState({value:t});var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;a.push(this.props.collectionPoints.byId[c.value])}}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}this.props.onChange&&(this.props.isMulti?this.props.onChange(a):this.props.onChange(a[0]))}},{key:"prepareValue",value:function(){return this.props.isMulti?this.state.value||[]:(this.state.value||[])[0]}},{key:"render",value:function(){var e=this;return this.props.loading?null:s.a.createElement(se.a,{ref:function(t){e.props.ref&&e.props.ref(t)},isClearable:!0,options:this.prepareOptions(),backspaceRemovesValue:!0,hideSelectedOptions:!0,openMenuOnFocus:!0,isMulti:this.props.isMulti||!1,onChange:this.onChange.bind(this),value:this.prepareValue()})}}]),t}(o.Component),le=Object(f.c)(function(e,t){return{collectionPoints:e.data.collectionPoints,loading:e.data.collectionPoints.loading}},function(e,t){return{fetchCollectionPoints:function(){e(k.a.fetchCollectionPoints())}}})(ce),ue=a(70),pe=a.n(ue),de=a(29),he=a(21),me=a(406),fe=function(e){function t(e){var a;Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).groups=[],a.props.contact||a.props.loading||a.props.loadContacts(),a.loadCompensations=a.loadCompensations.bind(Object(q.a)(Object(q.a)(a))),a.compensationView=a.compensationView.bind(Object(q.a)(Object(q.a)(a))),a.onInputChange=a.onInputChange.bind(Object(q.a)(Object(q.a)(a))),a.onSave=a.onSave.bind(Object(q.a)(Object(q.a)(a))),a.onAbort=a.onAbort.bind(Object(q.a)(Object(q.a)(a))),a.onSelectChange=a.onSelectChange.bind(Object(q.a)(Object(q.a)(a))),a.renderCollectionPoint=a.renderCollectionPoint.bind(Object(q.a)(Object(q.a)(a))),a.renderPanelActions=a.renderPanelActions.bind(Object(q.a)(Object(q.a)(a))),a.onMoreMailsChange=a.onMoreMailsChange.bind(Object(q.a)(Object(q.a)(a)));var n=a.props.contact||{};return a.state={editable:!1,collectionPoint:n.collectionPoint||new oe,entryDate:n.entryDate?n.entryDate.toLocaleDateString():"",exitDate:n.exitDate?n.exitDate.toLocaleDateString():"",bankName:n.bankName||"",iban:n.iban||"",accountHolder:n.accountHolder||"",moreMails:n.moreMails||[],compensations:[],openCompensationsSum:0,compensationsLoaded:!1},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"onInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(ae.a)({},n,a))}},{key:"onMoreMailsChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState({moreMails:Object.assign([],this.state.moreMails,Object(ae.a)({},n,a))})}},{key:"removeMoreMailEntry",value:function(e){this.setState({moreMails:Object(te.a)(this.state.moreMails.slice(0,e)).concat(Object(te.a)(this.state.moreMails.slice(e+1)))})}},{key:"loadCompensations",value:function(){var e=Object(W.a)(Y.a.mark(function e(){var t,a,n,r,i,o,s,c;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.user||!this.props.user.roles.indexOf(_.a.COMPENSATIONS_READ)){e.next=36;break}return t=0,a=[],n=!0,r=!1,i=void 0,e.prev=6,e.t0=k.a,e.next=10,pe.a.get(P.a.apiEndpoint+"/api/compensations/".concat(this.props.contact.id),{withCredentials:!0});case 10:e.t1=e.sent.data,e.t2=Symbol.iterator,o=e.t0.deepParser.call(e.t0,e.t1)[e.t2]();case 13:if(n=(s=o.next()).done){e.next=21;break}(c=s.value).hasOwnProperty("billingReport")&&c.billingReport.hasOwnProperty("order")&&(c.billingReport.order.hasOwnProperty("contact")&&!c.billingReport.order.contact.hasOwnProperty("firstname")?c.description="".concat(c.billingReport.order.title," (").concat(c.billingReport.order.contact.lastname,")"):c.description="".concat(c.billingReport.order.title)),a.push(c),c.paied||(t+=parseFloat(c.amount));case 18:n=!0,e.next=13;break;case 21:e.next=27;break;case 23:e.prev=23,e.t3=e.catch(6),r=!0,i=e.t3;case 27:e.prev=27,e.prev=28,n||null==o.return||o.return();case 30:if(e.prev=30,!r){e.next=33;break}throw i;case 33:return e.finish(30);case 34:return e.finish(27);case 35:this.setState({compensations:a,openCompensationsSum:t,compensationsLoaded:!0});case 36:case"end":return e.stop()}},e,this,[[6,23,27,35],[28,,30,34]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){e.contact&&this.setState({collectionPoint:e.contact.collectionPoint||new oe,entryDate:e.contact.entryDate?e.contact.entryDate.toLocaleDateString():"",exitDate:e.contact.exitDate?e.contact.exitDate.toLocaleDateString():"",bankName:e.contact.bankName||"",iban:e.contact.iban||"",accountHolder:e.contact.accountHolder||"",moreMails:e.contact.moreMails||[]})}},{key:"compensationView",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentElement){var t=e.currentTarget.parentNode.parentElement.getAttribute("data-key");1==e.button?window.open(document.location.origin+"/compensation/"+t):this.props.history.push("/compensation/"+t)}}},{key:"onSave",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.contact.contactGroups.find(function(e){return 7===e.bexioId})){e.next=4;break}return e.next=3,this.props.editMember({id:this.props.contact.id,collectionPointId:this.state.collectionPoint.id,entryDate:this.state.entryDate?new Date(this.state.entryDate):void 0,exitDate:this.state.exitDate?new Date(this.state.exitDate):void 0,bankName:this.state.bankName,iban:this.state.iban,accountHolder:this.state.accountHolder,moreMails:this.state.moreMails.filter(function(e){return""!==e})});case 3:this.setState({editable:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onAbort",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({editable:!1,collectionPoint:this.props.contact.collectionPoint||new oe,entryDate:this.props.contact.entryDate?this.props.contact.entryDate.toLocaleDateString():"",exitDate:this.props.contact.exitDate?this.props.contact.exitDate.toLocaleDateString():"",bankName:this.props.contact.bankName||"",iban:this.props.contact.iban||"",accountHolder:this.props.contact.accountHolder||"",moreMails:this.props.contact.moreMails||[]});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onSelectChange",value:function(e){var t=this;return function(a){t.setState(Object(ae.a)({},e,a))}}},{key:"renderCollectionPoint",value:function(){return this.state.editable?s.a.createElement(le,{multi:!1,onChange:this.onSelectChange("collectionPoint"),defaultValue:[this.state.collectionPoint]||void 0}):this.state.collectionPoint&&this.state.collectionPoint.hasOwnProperty("address")&&this.state.collectionPoint.hasOwnProperty("postcode")&&this.state.collectionPoint.hasOwnProperty("city")?s.a.createElement("a",{href:"https://www.google.com/maps/search/".concat(this.state.collectionPoint.address,", ").concat(this.state.collectionPoint.postcode," ").concat(this.state.collectionPoint.city),target:"_blank"},"".concat(this.state.collectionPoint.address,", ").concat(this.state.collectionPoint.postcode," ").concat(this.state.collectionPoint.city)):null}},{key:"renderPanelActions",value:function(){var e=this;return this.state.editable?[s.a.createElement(Z.a,{icon:"save",key:"save",onClick:this.onSave}),s.a.createElement(Z.a,{icon:"times",key:"cancel",onClick:this.onAbort})]:[s.a.createElement(Z.a,{icon:"pencil-alt",key:"edit",onClick:Object(W.a)(Y.a.mark(function t(){return Y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({editable:!0});case 1:case"end":return t.stop()}},t,this)}))})]}},{key:"renderPanelCompensations",value:function(){return this.props.user.roles.indexOf(_.a.COMPENSATIONS_READ)?this.state.compensationsLoaded?s.a.createElement(B.a,{title:"Entsch\xe4digungen (Offen: ".concat(this.state.openCompensationsSum.toFixed(2),".-)"),scrollable:!0},s.a.createElement(de.a,{columns:[{text:"Datum",keys:["date"],sortable:!0},{text:"Beschreibung",keys:["description"],sortable:!0},{text:"Betrag",keys:["amount"],prefix:"CHF ",sortable:!0,format:"toFixed(2)"},{text:"Genehmigt",keys:["approved"],sortable:!0},{text:"Ausbezahlt",keys:["paied"],sortable:!0},{text:"Actions",keys:["_id"],content:s.a.createElement(me.a,{variant:"success",className:"view",onMouseUp:this.compensationView},s.a.createElement(he.a,{icon:"eye"}))}],defaultSort:{keys:["date"],direction:"desc"},data:this.state.compensations})):(this.loadCompensations(),s.a.createElement(B.a,{title:"Entsch\xe4digungen"},s.a.createElement(U.a,null))):null}},{key:"render",value:function(){var e=this;if(this.props.loading||!this.props.contact)return s.a.createElement(A.a,{title:"Kontakt"},s.a.createElement(U.a,null));this.groups=this.props.contact.contactGroups;var t=this.props.contact.address+", "+this.props.contact.postcode+" "+this.props.contact.city;return s.a.createElement(A.a,{title:this.props.contact.firstname+" "+this.props.contact.lastname},s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Pers\xf6nliche Informationen",actions:this.renderPanelActions()},s.a.createElement("div",{className:"container-fluid"},s.a.createElement(re,{id:"firstname",title:"Vorname"},this.props.contact.firstname),s.a.createElement(re,{id:"lastname",title:"Nachname"},this.props.contact.lastname),s.a.createElement(re,{id:"rank",title:"Rang"},this.props.contact.rank),s.a.createElement(re,{id:"birthday",title:"Geburtstag"},new Date(this.props.contact.birthday).toLocaleDateString()),s.a.createElement(re,{id:"address",title:"Adresse"},s.a.createElement("a",{href:"https://www.google.com/maps/search/"+t,target:"_blank"},t)),s.a.createElement(re,{id:"collectionPoint",title:"Abholpunkt"},this.renderCollectionPoint()),s.a.createElement(re,{id:"phoneFixed",title:"Festnetz"},s.a.createElement("a",{href:"tel:"+this.props.contact.phoneFixed},this.props.contact.phoneFixed)),s.a.createElement(re,{id:"phoneFixedSecond",title:"Festnetz 2"},s.a.createElement("a",{href:"tel:"+this.props.contact.phoneFixedSecond},this.props.contact.phoneFixedSecond)),s.a.createElement(re,{id:"phoneMobile",title:"Mobile"},s.a.createElement("a",{href:"tel:"+this.props.contact.phoneMobile},this.props.contact.phoneMobile)),s.a.createElement(re,{id:"mail",title:"E-Mails"},s.a.createElement("a",{href:"mailto:".concat(this.props.contact.mail)},this.props.contact.mail)," ",s.a.createElement("br",null),s.a.createElement("a",{href:"mailto:".concat(this.props.contact.mailSecond)},this.props.contact.mailSecond)," ",s.a.createElement("br",null),Object(te.a)(this.state.moreMails).map(function(t,a){return e.state.editable?s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{type:"email",className:"form-control",value:t,key:a.toString(),name:a.toString(),onChange:e.onMoreMailsChange}),s.a.createElement("div",{className:"input-group-append"},s.a.createElement(me.a,{className:"btn-outline-secondary",onClick:e.removeMoreMailEntry.bind(e,a)},s.a.createElement(he.a,{icon:"times"})))):s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{href:"mailto:".concat(t)},t),s.a.createElement("br",null))}),this.state.editable&&s.a.createElement(me.a,{className:"btn-outline btn-block",onClick:function(){e.setState({moreMails:Object(te.a)(e.state.moreMails).concat([""])})}},"Hinzuf\xfcgen")),s.a.createElement(re,{id:"groups",title:"Gruppen"},this.groups?this.groups.map(function(e){return s.a.createElement("span",{className:"badge badge-primary"},e.name)}):""),s.a.createElement(re,{id:"entryDate",title:"Eintrittsdatum",type:"date",editable:this.state.editable,value:this.state.entryDate,onChange:this.onInputChange}),s.a.createElement(re,{id:"exitDate",title:"Austrittsdatum",type:"date",editable:this.state.editable,value:this.state.exitDate,onChange:this.onInputChange}),s.a.createElement(re,{id:"remarks",title:"Bemerkungen"},this.props.contact.remarks)))),s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Finanzen"},s.a.createElement("div",{className:"container-fluid"},s.a.createElement(re,{id:"bankName",title:"Bank",value:this.state.bankName,editable:this.state.editable,onChange:this.onInputChange}),s.a.createElement(re,{id:"iban",title:"IBAN",value:this.state.iban,editable:this.state.editable,onChange:this.onInputChange}),s.a.createElement(re,{id:"accountHolder",title:"Kontoinhaber",value:this.state.accountHolder,editable:this.state.editable,onChange:this.onInputChange}))),s.a.createElement(B.a,{title:"Actions"},s.a.createElement("a",{target:"_blank",href:"https://office.bexio.com/index.php/kontakt/show/id/"+this.props.contact.bexioId,className:"btn btn-block btn-outline-primary"},"In Bexio anschauen"),s.a.createElement("a",{target:"_blank",href:"https://vkazu.sharepoint.com/leitung/Personalakten?viewpath=/leitung/Personalakten&id=/leitung/Personalakten/"+this.props.contact.firstname+" "+this.props.contact.lastname,className:"btn btn-block btn-outline-primary"},"Personalakte \xf6ffnen")))),s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-6"},this.renderPanelCompensations())))}}]),t}(o.Component),be=Object(f.c)(function(e,t){return{user:e.data.user.data,contact:e.data.contacts.byId[t.match.params.id]||e.data.members.byId[t.match.params.id],loading:e.data.contacts.loading||e.data.members.loading}},function(e,t){return{loadContacts:function(){return e(k.a.fetchContacts())},editMember:function(t){return e(k.a.editMember(t))}}})(fe),ve=Object(f.c)(function(e){return{data:e.data.orders,viewLocation:"/order/",title:"Auftr\xe4ge",tableColumns:[{text:"Auftragsnummer",keys:["documentNr"],sortable:!0,searchable:!0},{text:"Titel",keys:["title"],sortable:!0,searchable:!0},{text:"Kunde",keys:{contact:["firstname","lastname"]},sortable:!0,searchable:!0},{text:"Total",keys:["total"],sortable:!0,prefix:"CHF ",searchable:!0},{text:"Auftragsdaten",keys:["execDates"]}]}},function(e){return{fetchData:function(){e(k.a.fetchOrders())}}})(X.a),Ee=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).props.order||a.props.loading||a.props.loadOrders(),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderPositions",value:function(){var e=[],t=!0,a=!1,n=void 0;try{for(var r,i=this.props.order.positions[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;e.push(s.a.createElement(V.a,{className:"position"},s.a.createElement(F.a,{className:"col-1"},o.pos),s.a.createElement(F.a,null,s.a.createElement("div",{dangerouslySetInnerHTML:{__html:o.text||""}})),o.positionTotal?s.a.createElement(F.a,{className:"col-2"},"CHF ",o.positionTotal):""))}}catch(c){a=!0,n=c}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return e}},{key:"render",value:function(){return this.props.loading||!this.props.order?s.a.createElement(A.a,{title:"Loading..."},s.a.createElement(U.a,null)):(this.props.order.execDates instanceof Date&&(this.props.order.execDates=[this.props.order.execDates]),s.a.createElement(A.a,{title:this.props.order.title},s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Informationen"},s.a.createElement("div",{className:"container-fluid"},s.a.createElement(re,{id:"title",title:"Titel"},this.props.order.title),s.a.createElement(re,{id:"customer",title:"Kunde"},"".concat(this.props.order.contact.firstname," ").concat(this.props.order.contact.lastname)),s.a.createElement(re,{id:"documentNr",title:"Auftragsnummer"},this.props.order.documentNr),s.a.createElement(re,{id:"deliveryAddress",title:"Lieferadresse"},this.props.order.deliveryAddress),s.a.createElement(re,{id:"executionDates",title:"Auftragsdaten"},this.props.order.execDates?this.props.order.execDates.map(function(e){return s.a.createElement("span",{className:"badge badge-secondary"},e.toLocaleDateString())}):"")))),s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Actions"},s.a.createElement("a",{target:"_blank",href:"https://office.bexio.com/index.php/kb_order/show/id/".concat(this.props.order.bexioId),className:"btn btn-block btn-outline-primary"},"In Bexio anschauen")))),s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col"},s.a.createElement(B.a,{title:"Positionen"},s.a.createElement("div",{className:"container-fluid"},this.renderPositions(),s.a.createElement(V.a,{className:"position"},s.a.createElement(F.a,{className:"col-1"}),s.a.createElement(F.a,null,s.a.createElement("strong",null,"Total")),s.a.createElement(F.a,{className:"col-2"},"CHF ",this.props.order.total))))))))}}]),t}(o.Component),ye=Object(f.c)(function(e,t){return{order:e.data.orders.byId[t.match.params.id],loading:e.data.orders.loading}},function(e,t){return{loadOrders:function(){e(k.a.fetchOrders())}}})(Ee),ge=Object(f.c)(function(e){return{data:e.data.billingReports,title:"Verrechnungsrapporte",viewLocation:"/billing-report/",tableColumns:[{text:"Datum",keys:["date"],sortable:!0},{text:"Auftrag Nr",keys:{order:["documentNr"]},sortable:!0,searchable:!0},{text:"Auftrag Titel",keys:{order:["title"]},sortable:!0,searchable:!0},{text:"Ersteller",keys:{creator:["displayName"]},sortable:!0,searchable:!0},{text:"Status",keys:["state"],sortable:!0,searchable:!0}]}},function(e){return{fetchData:function(){e(k.a.fetchBillingReports())}}})(X.a),Oe=a(404),ke=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleClose=a.handleClose.bind(Object(q.a)(Object(q.a)(a))),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"handleClose",value:function(){this.props.onHide&&this.props.onHide()}},{key:"render",value:function(){return s.a.createElement(Oe.a,{show:this.props.show,onHide:this.handleClose,dialogClassName:"modal-lg"},s.a.createElement(Oe.a.Header,{closeButton:!0},this.props.header),s.a.createElement(Oe.a.Body,null,this.props.body),s.a.createElement(Oe.a.Footer,null,this.props.footer))}}]),t}(o.Component),je=a(403),Ce=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).deleteCompensation=a.deleteCompensation.bind(Object(q.a)(Object(q.a)(a))),a.deleteCompensationConfirmed=a.deleteCompensationConfirmed.bind(Object(q.a)(Object(q.a)(a))),a.showModal=a.showModal.bind(Object(q.a)(Object(q.a)(a))),a.hideModal=a.hideModal.bind(Object(q.a)(Object(q.a)(a))),a.state={modalShow:!1},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"deleteCompensation",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentNode&&e.currentTarget.parentNode.parentNode.parentElement){var t=e.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");t&&this.setState({toDeleteCompensation:this.props.data.byId[t],modalShow:!0})}}},{key:"deleteCompensationConfirmed",value:function(){this.state.toDeleteCompensation&&(this.props.delete(this.state.toDeleteCompensation.id),this.setState({toDeleteCompensation:void 0,modalShow:!1}))}},{key:"showModal",value:function(){this.setState({modalShow:!0})}},{key:"hideModal",value:function(){this.setState({modalShow:!1})}},{key:"renderModal",value:function(){return this.state.toDeleteCompensation?s.a.createElement(ke,{show:this.state.modalShow,onHide:this.hideModal,header:s.a.createElement("h3",null,this.state.toDeleteCompensation.member.firstname+" "+this.state.toDeleteCompensation.member.lastname+" vom  "+this.state.toDeleteCompensation.date.toLocaleDateString()),body:s.a.createElement("span",null,"Willst du die Entsch\xe4digung von "+this.state.toDeleteCompensation.member.firstname+" "+this.state.toDeleteCompensation.member.lastname+" vom  "+this.state.toDeleteCompensation.date.toLocaleDateString()+" mit einem Betrag von CHF"+this.state.toDeleteCompensation.amount+" wirklich l\xf6schen?"),footer:s.a.createElement(je.a,null,s.a.createElement(me.a,{variant:"danger",onClick:this.deleteCompensationConfirmed},"L\xf6schen"),s.a.createElement(me.a,{variant:"secondary",onClick:this.hideModal},"Abbrechen"))}):null}},{key:"render",value:function(){return s.a.createElement(X.a,{title:"Entsch\xe4digungen",viewLocation:"/compensation/",rowActions:[s.a.createElement("button",{className:"btn btn-danger delete",onMouseUp:this.deleteCompensation},s.a.createElement(he.a,{icon:"trash"}))],tableColumns:[{text:"Mitglied",keys:{member:["firstname","lastname"]},sortable:!0,searchable:!0},{text:"Datum",keys:["date"],sortable:!0},{text:"Betrag",keys:["amount"],sortable:!0,prefix:"CHF ",format:"toFixed(2)"},{text:"Beschreibung",keys:["description"],sortable:!1,searchable:!0},{text:"Ersteller",keys:{creator:["displayName"]},sortable:!0},{text:"Genehmigt",keys:["approved"],sortable:!0},{text:"Ausbezahlt",keys:["paied"],sortable:!0}],data:this.props.data,fetchData:this.props.fetchData,history:this.props.history},this.renderModal())}}]),t}(o.Component),Ne=Object(f.c)(function(e){return{data:e.data.compensationEntries}},function(e){return{fetchData:function(){e(k.a.fetchCompensationEntries())},delete:function(t){e(k.a.deleteCompensationEntry(t))}}})(Ce),Se=a(180),xe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).mounted=!1,a.state={loaded:!1},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.mounted=!0,e.next=3,this.props.fetchUser();case 3:this.mounted&&this.setState({loaded:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.mounted=!1;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.props.user.data?(this.props.showSuccess("Willkommen zur\xfcck"),this.props.location.state&&this.props.location.state.prevLocation?this.props.history.push(this.props.location.state.prevLocation):this.props.history.push("/dashboard"),null):this.props.user.loading||!this.state.loaded?s.a.createElement(U.a,{fullscreen:!0}):(this.props.location.state&&!this.props.location.state.errorShown&&(this.props.showError("Sorry.... zuerst einloggen!"),this.props.history.replace(this.props.location.pathname,Object.assign({},this.props.location.state,{errorShown:!0}))),s.a.createElement("div",{id:"login"},s.a.createElement("h2",null,"Login"),s.a.createElement("div",{className:"form-group"},s.a.createElement("a",{className:"btn btn-secondary btn-block",href:P.a.apiEndpoint+"/api/auth/azure"},s.a.createElement(he.a,{icon:["fab","microsoft"],className:"icon"}),"VK-Login"))))}}]),t}(o.Component),we=Object(f.c)(function(e){return{user:e.data.user}},function(e){return{fetchUser:function(){return e(k.a.fetchUser())},showError:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Ooppss...! Versuche es sp\xe4ter erneut";e(E.a.showError(t))},showSuccess:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Yeeppiii";e(E.a.showSuccess(t))}}})(xe),Te=Object(f.c)(function(e){return{data:e.data.users,viewLocation:"/user/",title:"Benutzer",tableColumns:[{text:"Name",keys:["displayName"],sortable:!0,searchable:!0},{text:"Rechte",keys:["roles"],sortable:!0,searchable:!0}]}},function(e){return{fetchData:function(){e(k.a.fetchUsers())}}})(X.a),Ie=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).props.fetchUsers(),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"renderBexioPart",value:function(){if(!this.props.user.bexioContact)return s.a.createElement("span",null,"Kein Link gefunden....");var e=this.props.user.bexioContact;return s.a.createElement("div",null,s.a.createElement(re,{id:"bexioId",title:"ID"},e.bexioId),s.a.createElement(re,{id:"firstname",title:"Vorname"},e.firstname),s.a.createElement(re,{id:"lastname",title:"Nachname"},e.lastname),s.a.createElement(G.a,{to:"/contact/"+e.id,className:"btn btn-block btn-outline-primary"},"Kontakt \xf6ffnen"),s.a.createElement("a",{target:"_blank",href:"https://office.bexio.com/index.php/kontakt/show/id/"+e.bexioId,className:"btn btn-block btn-outline-primary"},"In Bexio anschauen"))}},{key:"renderRolePart",value:function(){var e=[];for(var t in this.props.user.roles)e.push({role:this.props.user.roles[t],id:t});return s.a.createElement(de.a,{columns:[{text:"Role",keys:["role"]}],data:e})}},{key:"render",value:function(){return this.props.loading||!this.props.user?s.a.createElement(A.a,{title:"Loading..."},s.a.createElement(U.a,null)):s.a.createElement(A.a,{title:this.props.user.displayName},s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Allgemeine Informationen"},s.a.createElement(re,{id:"displayName",title:"Name"},this.props.user.displayName)),s.a.createElement(B.a,{title:"Rechte"},this.renderRolePart())),s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Bexio Informationen"},this.renderBexioPart()))))}}]),t}(o.Component),_e=Object(f.c)(function(e,t){return"/me"===t.location.pathname?{user:e.data.user.data,loading:e.data.user.loading}:{user:e.data.users.byId[t.match.params.id],loading:e.data.users.loading}},function(e,t){return"/me"===t.location.pathname?{fetchUsers:function(){e(k.a.fetchUser())}}:{fetchUsers:function(){e(k.a.fetchUsers())}}})(Ie),Ae=function(e){function t(e){var a;if(Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).props.defaultValue instanceof Array){var n=[],r=!0,i=!1,o=void 0;try{for(var s,c=a.props.defaultValue[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var l=s.value;n.push({value:l.id.toString(),label:l.title})}}catch(p){i=!0,o=p}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}a.state={value:n}}else a.state={};return a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.defaultValue instanceof Array){var t=[],a=!0,n=!1,r=void 0;try{for(var i,o=e.defaultValue[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;s.hasOwnProperty("id")&&t.push({value:s.id.toString(),label:s.title})}}catch(c){n=!0,r=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}this.setState({value:t})}}},{key:"componentWillMount",value:function(){this.props.orders.ids.length<1&&this.props.fetchOrders()}},{key:"prepareOptions",value:function(){var e=[];if(Object.keys(this.props.orders.byId).length>0)for(var t in this.props.orders.byId){var a=this.props.orders.byId[t];e.push({label:a.title,value:t})}return e}},{key:"onChange",value:function(e){var t=[e];this.props.isMulti&&(t=e),this.setState({value:t});var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;a.push(this.props.orders.byId[c.value])}}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}this.props.onChange&&(this.props.isMulti?this.props.onChange(a):this.props.onChange(a[0]))}},{key:"prepareValue",value:function(){return this.props.isMulti?this.state.value||[]:(this.state.value||[])[0]}},{key:"render",value:function(){var e=this;return this.props.loading?null:s.a.createElement(se.a,{ref:function(t){e.props.ref&&e.props.ref(t)},isClearable:!0,options:this.prepareOptions(),backspaceRemovesValue:!0,hideSelectedOptions:!0,openMenuOnFocus:!0,isMulti:this.props.isMulti||!1,onChange:this.onChange.bind(this),value:this.prepareValue()})}}]),t}(o.Component),Re=Object(f.c)(function(e,t){return{orders:e.data.orders,loading:e.data.orders.loading}},function(e,t){return{fetchOrders:function(){e(k.a.fetchOrders())}}})(Ae),Me=a(49),De=a(84),Pe=a(19),Le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).approve=a.approve.bind(Object(q.a)(Object(q.a)(a))),a.decline=a.decline.bind(Object(q.a)(Object(q.a)(a))),a.elementView=a.elementView.bind(Object(q.a)(Object(q.a)(a))),a.billingReport=a.props.billingReports.byId[parseInt(a.props.match.params.id)],a.onInformationEdit=a.onInformationEdit.bind(Object(q.a)(Object(q.a)(a))),a.onAbort=a.onAbort.bind(Object(q.a)(Object(q.a)(a))),a.onInformationSave=a.onInformationSave.bind(Object(q.a)(Object(q.a)(a))),a.onInputChange=a.onInputChange.bind(Object(q.a)(Object(q.a)(a))),a.getCompensationActions=a.getCompensationActions.bind(Object(q.a)(Object(q.a)(a))),a.deleteCompensation=a.deleteCompensation.bind(Object(q.a)(Object(q.a)(a))),a.deleteCompensationConfirmed=a.deleteCompensationConfirmed.bind(Object(q.a)(Object(q.a)(a))),a.addCompensations=a.addCompensations.bind(Object(q.a)(Object(q.a)(a))),a.showModal=a.showModal.bind(Object(q.a)(Object(q.a)(a))),a.hideModal=a.hideModal.bind(Object(q.a)(Object(q.a)(a))),a.billingReport&&(a.state={informationEdit:!1,order:a.billingReport.order,date:a.billingReport.date,els:a.billingReport.els,drivers:a.billingReport.drivers,food:a.billingReport.food,remarks:a.billingReport.remarks,modalShow:!1}),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.billingReport=e.billingReports.byId[parseInt(e.match.params.id)],this.billingReport&&this.setState({order:this.billingReport.order,date:this.billingReport.date,els:this.billingReport.els,drivers:this.billingReport.drivers,food:this.billingReport.food,remarks:this.billingReport.remarks})}},{key:"componentWillMount",value:function(){this.props.fetchBillingReports(),this.props.fetchOrders()}},{key:"approve",value:function(){return this.props.approve(this.billingReport.id.toString())}},{key:"decline",value:function(){return this.props.decline(this.billingReport.id.toString())}},{key:"onInformationEdit",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({informationEdit:!0});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onAbort",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({informationEdit:!1,order:this.billingReport.order,date:this.billingReport.date,els:this.billingReport.els,drivers:this.billingReport.drivers,food:this.billingReport.food,remarks:this.billingReport.remarks});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onInformationSave",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.edit({id:this.billingReport.id.toString(),date:this.state.date,drivers:this.state.drivers,els:this.state.els,food:this.state.food,orderId:this.state.order.id,remarks:this.state.remarks});case 2:this.setState({informationEdit:!1});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onInputChange",value:function(e){var t,a=e.target,n="checkbox"===a.type?a.checked:a.value,r=a.id;"date"===a.type&&"string"===typeof n&&(t=new Date(n)),this.setState(Object(ae.a)({},r,t||n))}},{key:"onSelectChange",value:function(e){var t=this;return function(a){t.setState(Object(ae.a)({},e,a))}}},{key:"elementView",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){var a;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.currentTarget.parentNode&&t.currentTarget.parentNode.parentNode&&t.currentTarget.parentNode.parentNode.parentElement&&(a=t.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key"),1==t.button?window.open(document.location.origin+"/compensation/"+a):this.props.history.push("/compensation/"+a));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCompensation",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){var a;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.currentTarget.parentNode&&t.currentTarget.parentNode.parentNode&&t.currentTarget.parentNode.parentNode.parentElement&&(a=t.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key"))&&this.setState({toDeleteCompensation:this.billingReport.compensations.find(function(e){return e.id===parseInt(a||"")}),modalShow:!0});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCompensationConfirmed",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.toDeleteCompensation){e.next=4;break}return e.next=3,this.props.deleteCompensation(this.state.toDeleteCompensation.id);case 3:this.setState({toDeleteCompensation:void 0,modalShow:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addCompensations",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){var a,n;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=[],t.vks)a.push(t.vks[n]);return e.next=4,this.props.addCompensationEntries({billingReportId:this.billingReport.id,entries:a});case 4:this.hideModal();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"showModal",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({modalShow:!0});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"hideModal",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({modalShow:!1}),e.abrupt("return",!0);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"prepareCompensationsForTable",value:function(){var e={},t=!0,a=!1,n=void 0;try{for(var r,i=this.billingReport.compensations[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;e[o.id]=o}}catch(s){a=!0,n=s}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return e}},{key:"renderActions",value:function(){var e=[];return"pending"===this.billingReport.state&&(this.props.user.roles.includes(_.a.BILLINGREPORTS_APPROVE)||this.props.user.roles.includes(_.a.ADMIN))&&e.push(s.a.createElement(Pe.a,{id:"approve",block:!0,variant:"outline-success",onClick:this.approve},"Genehmigen")),e.push(s.a.createElement(G.a,{to:"/order/".concat(this.billingReport.order.id),className:"btn btn-block btn-outline-primary"},"Auftrag \xf6ffnen")),e}},{key:"renderOrder",value:function(){return this.state.informationEdit?s.a.createElement(Re,{defaultValue:[this.state.order],onChange:this.onSelectChange("order")}):this.state.order.title}},{key:"renderEls",value:function(){return this.state.informationEdit?s.a.createElement(Me.a,{defaultValue:this.state.els,isMulti:!0,onChange:this.onSelectChange("els")}):this.state.els.map(function(e){return e.firstname+" "+e.lastname}).join(",")}},{key:"renderDrivers",value:function(){return this.state.informationEdit?s.a.createElement(Me.a,{defaultValue:this.state.drivers,isMulti:!0,onChange:this.onSelectChange("drivers")}):this.state.drivers.map(function(e){return e.firstname+" "+e.lastname}).join(",")}},{key:"renderInformations",value:function(){var e="badge-success";"pending"===this.billingReport.state&&(e="badge-warning"),"declined"===this.billingReport.state&&(e="badge-danger");var t=[];return(this.props.user.roles.includes(_.a.ADMIN)||this.props.user.roles.includes(_.a.BILLINGREPORTS_EDIT)||"pending"===this.billingReport.state&&this.billingReport.creator.id===this.props.user.id)&&(this.state.informationEdit?(t.push(s.a.createElement(Z.a,{icon:"save",key:"save",onClick:this.onInformationSave})),t.push(s.a.createElement(Z.a,{icon:"times",key:"edit",onClick:this.onAbort}))):t.push(s.a.createElement(Z.a,{icon:"pencil-alt",key:"edit",onClick:this.onInformationEdit}))),s.a.createElement(B.a,{title:"Informationen",actions:t,className:this.state.informationEdit?"editable":""},s.a.createElement(re,{id:"orderTitle",title:"Auftrag"},this.renderOrder()),s.a.createElement(re,{id:"date",title:"Datum",value:this.state.date.toISOString().split("T")[0],type:"date",editable:this.state.informationEdit,onChange:this.onInputChange}),s.a.createElement(re,{id:"creator",title:"Ersteller"},this.billingReport.creator.displayName),s.a.createElement(re,{id:"state",title:"Status"},s.a.createElement("div",{className:"badge "+e},this.billingReport.state)),s.a.createElement(re,{id:"els",title:"ELs"},this.renderEls()),s.a.createElement(re,{id:"drivers",title:"Fahrer"},this.renderDrivers()),s.a.createElement(re,{id:"food",title:"Verpflegung",value:this.state.food,type:"checkbox",editable:this.state.informationEdit,onChange:this.onInputChange}),s.a.createElement(re,{id:"remarks",title:"Bemerkungen",value:this.state.remarks,type:"textarea",editable:this.state.informationEdit,onChange:this.onInputChange}))}},{key:"renderCompensationDeletionModal",value:function(){return this.state.toDeleteCompensation?s.a.createElement(ke,{show:this.state.modalShow,onHide:this.hideModal,header:s.a.createElement("h3",null,this.state.toDeleteCompensation.member.firstname+" "+this.state.toDeleteCompensation.member.lastname+" vom  "+this.state.toDeleteCompensation.date.toLocaleDateString()),body:s.a.createElement("span",null,"Willst du die Entsch\xe4digung von "+this.state.toDeleteCompensation.member.firstname+" "+this.state.toDeleteCompensation.member.lastname+" vom  "+this.state.toDeleteCompensation.date.toLocaleDateString()+" mit einem Betrag von CHF"+this.state.toDeleteCompensation.amount+" wirklich l\xf6schen?"),footer:s.a.createElement(je.a,null,s.a.createElement(Pe.a,{variant:"danger",onClick:this.deleteCompensationConfirmed},"L\xf6schen"),s.a.createElement(Pe.a,{variant:"secondary",onClick:this.hideModal},"Abbrechen"))}):null}},{key:"renderCompensationsAddModal",value:function(){return this.state.toDeleteCompensation?null:s.a.createElement(ke,{show:this.state.modalShow,onHide:this.hideModal,header:s.a.createElement("h3",null,"Entsch\xe4digungen hinzuf\xfcgen"),body:s.a.createElement(De.a,{onNext:this.addCompensations,onPrevious:this.hideModal}),footer:s.a.createElement("div",null)})}},{key:"getCompensationActions",value:function(){var e=[s.a.createElement(Pe.a,{variant:"success",className:"view",onClick:this.elementView},s.a.createElement(he.a,{icon:"eye"}))];return(this.props.user.roles.includes(_.a.ADMIN)||this.props.user.roles.includes(_.a.BILLINGREPORTS_EDIT)||"pending"===this.billingReport.state&&this.billingReport.creator.id===this.props.user.id)&&e.push(s.a.createElement(Pe.a,{variant:"danger",className:"delete",onClick:this.deleteCompensation},s.a.createElement(he.a,{icon:"trash"}))),e}},{key:"render",value:function(){return!this.props.loading&&this.billingReport&&this.state?s.a.createElement(A.a,{title:"Verrechnungsrapport"},this.renderCompensationDeletionModal(),this.renderCompensationsAddModal(),s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-6"},this.renderInformations()),s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Actions"},this.renderActions()))),s.a.createElement(V.a,null,s.a.createElement(F.a,null,s.a.createElement(B.a,{title:"VKs",actions:[s.a.createElement(Z.a,{icon:"plus",onClick:this.showModal})]},s.a.createElement(de.a,{columns:[{text:"Name",keys:{member:["firstname","lastname"]},sortable:!0},{text:"Von",keys:["from"],format:"toLocaleTimeString",sortable:!0},{text:"Bis",keys:["until"],format:"toLocaleTimeString",sortable:!0},{text:"Verrechnen",keys:["charge"],sortable:!0},{text:"Betrag",keys:["amount"],prefix:"CHF ",sortable:!0,format:"toFixed(2)"},{text:"Ausbezahlt",keys:["paied"],sortable:!0},{text:"Actions",keys:["_id"],content:s.a.createElement(je.a,null,this.getCompensationActions())}],defaultSort:{keys:["from"],direction:"asc"},data:this.prepareCompensationsForTable()}))))):s.a.createElement(A.a,{title:"Verrechnungsrapport"},s.a.createElement(U.a,null))}}]),t}(o.Component),Be=Object(f.c)(function(e,t){return{billingReports:e.data.billingReports,user:e.data.user.data,orders:e.data.orders,loading:e.data.billingReports.loading||e.data.user.loading||e.data.orders.loading}},function(e,t){return{fetchBillingReports:function(){return e(k.a.fetchBillingReports())},fetchOrders:function(){return e(k.a.fetchOrders())},approve:function(t){return e(k.a.approveBillingReport(t))},decline:function(t){return e(k.a.declineBillingReport(t))},edit:function(t){return e(k.a.editBillingReport(t))},deleteCompensation:function(){var t=Object(W.a)(Y.a.mark(function t(a){return Y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(k.a.deleteCompensationEntry(a)).then(function(){e(k.a.fetchBillingReports())}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),addCompensationEntries:function(t){return e(k.a.addCompensationEntriesForBillingReport(t)).then(function(){e(k.a.fetchBillingReports())})}}})(Le),Fe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onSelectChange=a.onSelectChange.bind(Object(q.a)(Object(q.a)(a))),a.onInputChange=a.onInputChange.bind(Object(q.a)(Object(q.a)(a))),a.onSave=a.onSave.bind(Object(q.a)(Object(q.a)(a))),a.state={member:"",date:"",description:""},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMembers()}},{key:"validate",value:function(){if(this.formEl){var e=this.formEl.checkValidity();return this.formEl.className="was-validated",e}return!1}},{key:"onSelectChange",value:function(e){e?this.setState({member:e.value}):this.setState({member:""})}},{key:"prepareMembers",value:function(){var e=[];if(Object.keys(this.props.members.byId).length>0)for(var t in this.props.members.byId){var a=this.props.members.byId[t];e.push({label:a.firstname+" "+a.lastname,value:t})}return e}},{key:"onInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(ae.a)({},n,a))}},{key:"onSave",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.formEl){e.next=6;break}if(!this.validate()){e.next=6;break}return e.next=5,this.props.save({member:this.state.member,date:new Date(this.state.date),description:this.state.description,amount:this.state.amount});case 5:this.props.history.push("/compensations");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.props.loading||this.props.members.ids.length<1?s.a.createElement(A.a,{title:"Entsch\xe4digung hinzuf\xfcgen"},s.a.createElement(U.a,null)):s.a.createElement(A.a,{title:"Entsch\xe4digung hinzuf\xfcgen"},s.a.createElement(V.a,null,s.a.createElement(F.a,null,s.a.createElement(B.a,null,s.a.createElement("form",{id:"addCompensation",ref:function(t){e.formEl=t}},s.a.createElement("h5",null,"Mitglied"),s.a.createElement(se.a,{isClearable:!0,onChange:this.onSelectChange,options:this.prepareMembers(),backspaceRemovesValue:!0,hideSelectedOptions:!0,openMenuOnFocus:!0}),s.a.createElement("br",null),s.a.createElement("h5",null,"Datum"),s.a.createElement("input",{name:"date",type:"date",className:"form-control",value:this.state.date,onChange:this.onInputChange,required:!0}),s.a.createElement("br",null),s.a.createElement("h5",null,"Beschreibung"),s.a.createElement("input",{name:"description",type:"text",className:"form-control",value:this.state.description,onChange:this.onInputChange,required:!0}),s.a.createElement("br",null),s.a.createElement("h5",null,"Betrag"),s.a.createElement("div",{className:"input-group mb-2"},s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("div",{className:"input-group-text"},"CHF")),s.a.createElement("input",{type:"number",step:"0.05",className:"form-control",name:"amount",value:this.state.amount,onChange:this.onInputChange,placeholder:"0.00",required:!0})),s.a.createElement("br",null),s.a.createElement(Pe.a,{variant:"primary",block:!0,onClick:this.onSave},"Speichern"))))))}}]),t}(o.Component),Ve=Object(f.c)(function(e){return{members:e.data.members,loading:e.data.members.loading}},function(e){return{fetchMembers:function(){e(k.a.fetchMembers())},save:function(t){e(k.a.addCompensationEntry(t))}}})(Fe),Ge=function(e){function t(e,a,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6?arguments[6]:void 0;return Object(u.a)(this,t),(i=Object(d.a)(this,Object(h.a)(t).call(this))).member=e,i.creator=a,i.amount=n,i.date=r,i.approved=o,i.paied=s,i.payout=c,i}return Object(m.a)(t,e),Object(p.a)(t,null,[{key:"isOrderBased",value:function(e){return void 0!==e.billingReport&&null!==e.billingReport}},{key:"isCustom",value:function(e){return void 0!==e.description&&null!==e.description}}]),t}(ie),Ue=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement(A.a,{title:""},s.a.createElement("div",{id:"page-404"},s.a.createElement("img",{src:"/404.png"})))}}]),t}(o.Component),He=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).approve=a.approve.bind(Object(q.a)(Object(q.a)(a))),a.renderBillingReport=a.renderBillingReport.bind(Object(q.a)(Object(q.a)(a))),a.renderActions=a.renderActions.bind(Object(q.a)(Object(q.a)(a))),a.props.fetchCompensations(),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"approve",value:function(){return this.props.approve(this.props.compensation.id)}},{key:"renderActions",value:function(){if(!this.props.compensation.approved)return o.createElement(Pe.a,{id:"approve",block:!0,variant:"outline-success",onClick:this.approve},"Genehmigen")}},{key:"renderBillingReport",value:function(){if(Ge.isOrderBased(this.props.compensation)){var e="badge-success";return"pending"===this.props.compensation.billingReport.state&&(e="badge-warning"),o.createElement(F.a,{className:"col-md-6"},o.createElement(B.a,{title:"Verrechnungsrapport"},o.createElement(re,{id:"orderNr",title:"Auftragsnummer"},this.props.compensation.billingReport.order.documentNr),o.createElement(re,{id:"orderNr",title:"Auftrag"},this.props.compensation.billingReport.order.title),o.createElement(re,{id:"state",title:"Verrechnungsrapportstatus"},o.createElement("div",{className:"badge "+e},this.props.compensation.billingReport.state)),o.createElement(re,{id:"from",title:"Von"},this.props.compensation.from.toLocaleTimeString()),o.createElement(re,{id:"until",title:"Bis"},this.props.compensation.until.toLocaleTimeString()),o.createElement(re,{id:"charge",title:"Verrechnen"},this.props.compensation.charge?"\u2713":"\u2a2f"),o.createElement(G.a,{to:"/order/"+this.props.compensation.billingReport.order.id,className:"btn btn-outline-primary btn-block"},"Auftrag"),o.createElement(G.a,{to:"/billing-report/"+this.props.compensation.billingReport.id,className:"btn btn-outline-primary btn-block"},"Verrechnungsrapport")))}}},{key:"render",value:function(){if(!this.props.loading&&!this.props.compensation&&this.props.compensationIds.length>0)return o.createElement(Ue,null);if(this.props.loading||!this.props.compensation)return o.createElement(A.a,{title:"Entsch\xe4digung"},o.createElement(U.a,null));var e="badge-success";return this.props.compensation.approved||(e="badge-warning"),o.createElement(A.a,{title:"Entsch\xe4digung"},o.createElement(V.a,null,o.createElement(F.a,{className:"col-md-6"},o.createElement(B.a,{title:"Informationen"},o.createElement(re,{id:"member",title:"Mitglied"},this.props.compensation.member.firstname," ",this.props.compensation.member.lastname),o.createElement(re,{id:"date",title:"Datum"},this.props.compensation.date.toLocaleDateString()),o.createElement(re,{id:"amount",title:"Betrag"},"CHF ",this.props.compensation.amount.toFixed(2)),Ge.isCustom(this.props.compensation)&&o.createElement(re,{id:"description",title:"Beschreibung"},this.props.compensation.description),o.createElement(re,{id:"state",title:"Status"},o.createElement("div",{className:"badge "+e},this.props.compensation.approved?"Bewilligt":"Ausstehend")),o.createElement(re,{id:"creator",title:"Ersteller"},this.props.compensation.creator.displayName))),o.createElement(F.a,{className:"col-md-6"},o.createElement(B.a,{title:"Actions"},this.renderActions()))),o.createElement(V.a,null,this.renderBillingReport(),o.createElement(F.a,{className:"col-md-6"},o.createElement(B.a,{title:"Auszahlung"},o.createElement(re,{id:"paied",title:"Ausbezahlt"},this.props.compensation.paied?"\u2713":"\u2a2f"),this.props.compensation.payout?o.createElement(G.a,{to:"/payout/"+this.props.compensation.payout.id+"/"+this.props.compensation.member.id,className:"btn btn-outline-primary btn-block"},"Auszahlung"):o.createElement("p",null),this.props.compensation.bexioBill?o.createElement("a",{href:"https://office.bexio.com/index.php/kb_bill/show/id/".concat(this.props.compensation.bexioBill),target:"_blank",className:"btn btn-outline-primary btn-block"},"Bexio Lieferantenrechnung"):o.createElement("p",null),this.props.compensation.transferCompensation?o.createElement(G.a,{to:"/compensation/".concat(this.props.compensation.transferCompensation.id),className:"btn btn-outline-primary btn-block"},"\xdcbertrag"):o.createElement("p",null)))))}}]),t}(o.Component),ze=Object(f.c)(function(e,t){return{compensation:e.data.compensationEntries.byId[t.match.params.id],compensationIds:e.data.compensationEntries.ids,loading:e.data.compensationEntries.loading}},function(e){return{fetchCompensations:function(){return e(k.a.fetchCompensationEntries())},approve:function(t){return e(k.a.approveCompensationEntry(t))}}})(He),Ke=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).props.fetchMembers(),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"copy",value:function(e){var t=this;navigator.permissions.query({name:"clipboard-write"}).then(function(a){"granted"==a.state||"prompt"==a.state?navigator.clipboard.writeText(e).then(function(){t.props.showSuccess("Kopiert!")}).catch(function(e){console.error(e),t.props.showError("Ooops... Etwas ging schief...")}):t.props.showError("Ich darf nichts kopieren....")}).catch(function(e){console.error(e),t.props.showError("Ooops... Etwas ging schief...")})}},{key:"addCopy",value:function(e){return s.a.createElement("div",{className:"input-group-prepend"},s.a.createElement("button",{className:"btn btn-outline-secondary",id:"btnGroupAddon",onClick:this.copy.bind(this,e)},s.a.createElement(he.a,{icon:"clipboard"})))}},{key:"render",value:function(){return Object.keys(this.props.mailingLists).length<1?s.a.createElement(A.a,{title:"Verteiler"},s.a.createElement(U.a,null)):(console.log(this.props.mailingLists),s.a.createElement(A.a,{title:"Verteiler"},s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-4"},s.a.createElement(B.a,{title:"Mitglieder"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control",readOnly:!0,value:this.props.mailingLists.all.join(";")}),this.addCopy(this.props.mailingLists.all.join(";"))))),s.a.createElement(F.a,{className:"col-md-4"},s.a.createElement(B.a,{title:"VKs (ohne Fahrer und Condor)"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control",readOnly:!0,value:this.props.mailingLists.vks.join(";")}),this.addCopy(this.props.mailingLists.vks.join(";"))))),s.a.createElement(F.a,{className:"col-md-4"},s.a.createElement(B.a,{title:"Kader"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control",readOnly:!0,value:this.props.mailingLists.squad.join(";")}),this.addCopy(this.props.mailingLists.squad.join(";")))))),s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-4"},s.a.createElement(B.a,{title:"Fahrer"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control",readOnly:!0,value:this.props.mailingLists.drivers.join(";")}),this.addCopy(this.props.mailingLists.drivers.join(";"))))),s.a.createElement(F.a,{className:"col-md-4"},s.a.createElement(B.a,{title:"Vorstand"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control",readOnly:!0,value:this.props.mailingLists.vst.join(";")}),this.addCopy(this.props.mailingLists.vst.join(";"))))),s.a.createElement(F.a,{className:"col-md-4"},s.a.createElement(B.a,{title:"Condor"},s.a.createElement("div",{className:"input-group"},s.a.createElement("input",{className:"form-control",readOnly:!0,value:this.props.mailingLists.con.join(";")}),this.addCopy(this.props.mailingLists.con.join(";"))))))))}}]),t}(o.Component),Ye=Object(f.c)(function(e){return{mailingLists:e.data.mailingLists}},function(e,t){return{fetchMembers:function(){e(k.a.fetchMembers())},showError:function(t){e(E.a.showError(t))},showSuccess:function(t){e(E.a.showSuccess(t))}}})(Ke),We=Object(f.c)(function(e){return{data:e.data.collectionPoints,title:"Abholpunkte",panelActions:[s.a.createElement(Z.a,{icon:"plus",to:"/draft/collection-points/add"})],viewLocation:"/collection-point/",tableColumns:[{text:"Name",keys:["name"],sortable:!0,searchable:!0},{text:"Abholpunkt",keys:["address","postcode","city"],link:!0,linkPrefix:"https://www.google.com/maps/search/",sortable:!0,searchable:!0}]}},function(e){return{fetchData:function(){e(k.a.fetchCollectionPoints())}}})(X.a),qe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={name:"",address:"",postcode:"",city:""},a.onInputChange=a.onInputChange.bind(Object(q.a)(Object(q.a)(a))),a.save=a.save.bind(Object(q.a)(Object(q.a)(a))),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"onInputChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(ae.a)({},n,a))}},{key:"save",value:function(e){if(e.preventDefault(),this.formEl){var t=this.formEl.checkValidity();return this.formEl.className="was-validated",t&&(this.props.save({name:this.state.name,postcode:this.state.postcode,address:this.state.address,city:this.state.city}),this.props.history.push("/draft/collection-points")),t}return!1}},{key:"render",value:function(){var e=this;return s.a.createElement(A.a,{title:"Abholpunkt Hinzuf\xfcgen"},s.a.createElement(V.a,null,s.a.createElement(F.a,null,s.a.createElement(B.a,null,s.a.createElement("form",{ref:function(t){return e.formEl=t}},s.a.createElement("h5",null,"Name"),s.a.createElement("input",{type:"text",name:"name",id:"name",className:"form-control",value:this.state.name,onChange:this.onInputChange,required:!0}),s.a.createElement("br",null),s.a.createElement("h5",null,"Addresse"),s.a.createElement("input",{type:"text",name:"address",id:"address",className:"form-control",value:this.state.address,onChange:this.onInputChange,required:!0}),s.a.createElement("br",null),s.a.createElement("h5",null,"PLZ"),s.a.createElement("input",{type:"text",minLength:4,maxLength:4,name:"postcode",id:"postcode",className:"form-control",value:this.state.postcode,onChange:this.onInputChange,required:!0}),s.a.createElement("br",null),s.a.createElement("h5",null,"Ort"),s.a.createElement("input",{type:"text",name:"city",id:"city",className:"form-control",value:this.state.city,onChange:this.onInputChange,required:!0}),s.a.createElement("br",null),s.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.save},"Speichern"))))))}}]),t}(o.Component),Xe=Object(f.c)(function(){},function(e){return{save:function(t){e(k.a.addCollectionPoint(t))}}})(qe),Ze=a(365),Je=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"template"},s.a.createElement("div",{className:"header-left"},s.a.createElement("img",{src:"/logo.png",height:"60mm"})),s.a.createElement("div",{className:"header-center"},s.a.createElement("p",{className:"title"},this.props.title)),s.a.createElement("div",{className:"footer-left"},(new Date).toLocaleDateString()),s.a.createElement("div",{className:"footer-right"},"Seite ",this.props.pageNum," von ",this.props.totalPages))}}]),t}(o.Component),$e=function(e){function t(e){var a;return Object(u.a)(this,t),0===(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).props.data.ids.length&&a.props.fetchData(),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.data.ids.length>0&&this.pdfExport.save(function(){e.props.history.push("/members")})}},{key:"componentDidUpdate",value:function(){var e=this;this.props.data.ids.length>0&&this.pdfExport.save(function(){e.props.history.push("/members")})}},{key:"render",value:function(){var e=this;if(0===this.props.data.ids.length)return s.a.createElement(U.a,{fullscreen:!0});var t={},a=!0,n=!1,r=void 0;try{for(var i,o=this.props.data.ids[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var c=i.value;t["_"+c]=this.props.data.byId[c]}}catch(l){n=!0,r=l}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}return s.a.createElement("div",null,s.a.createElement(U.a,{fullscreen:!0}),s.a.createElement(Ze.a,{ref:function(t){return e.pdfExport=t},author:"The same cool dude who created this",creator:"Mathias Scherer",producer:"VK-Tool",title:"Mitgliederliste ".concat((new Date).toLocaleDateString()),paperSize:"A4",repeatHeaders:!0,landscape:!0,date:new Date,fileName:"Mitgliederliste-".concat((new Date).toLocaleDateString()),scale:.5,margin:"2cm",pageTemplate:function(e){return s.a.createElement(Je,Object.assign({title:"Mitgliederliste"},e))}},s.a.createElement(de.a,{className:"pdf-content landscape memberlist-pdf",data:t,columns:[{text:"Name",keys:["lastname","firstname"],searchable:!0},{text:"Grad",keys:["rank"],sortable:!0,searchable:!0},{text:"Funktionen",keys:["functions"],sortable:!0,searchable:!0},{text:"Addresse",keys:["address","postcode","city"],link:!0,linkPrefix:"https://www.google.com/maps/search/",searchable:!0},{text:"Abholpunkt",keys:{collectionPoint:["address","postcode","city"]},link:!0,linkPrefix:"https://www.google.com/maps/search/",searchable:!0},{text:"Festnetz",keys:["phoneFixed"],link:!0,linkPrefix:"tel:",searchable:!0},{text:"Mobile",keys:["phoneMobile"],link:!0,linkPrefix:"tel:",searchable:!0},{text:"E-Mail",keys:["mail"],link:!0,linkPrefix:"mailto:",searchable:!0}],defaultSort:(this.props.location.state||{sort:this.props.data.sort}).sort,searchString:(this.props.location.state||{searchString:""}).searchString})))}}]),t}(o.Component),Qe=Object(f.c)(function(e){return{data:e.data.members}},function(e){return{fetchData:function(){e(k.a.fetchMembers())}}})($e),et=Object(f.c)(function(e){return{panelActions:[s.a.createElement(Z.a,{icon:"plus",to:"/payouts/add"})],data:e.data.payouts,viewLocation:"/payout/",title:"Auszahlungen",tableColumns:[{text:"Von",keys:["from"],sortable:!0},{text:"Bis",keys:["until"],sortable:!0},{text:"Total",keys:["totalWithoutMinus"],sortable:!0,prefix:"CHF ",format:"toFixed(2)"}]}},function(e){return{fetchData:function(){e(k.a.fetchPayouts())}}})(X.a),tt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).props.fetchPayouts(),a.elementView=a.elementView.bind(Object(q.a)(Object(q.a)(a))),a.showMailModal=a.showMailModal.bind(Object(q.a)(Object(q.a)(a))),a.showBexioModal=a.showBexioModal.bind(Object(q.a)(Object(q.a)(a))),a.hideModal=a.hideModal.bind(Object(q.a)(Object(q.a)(a))),a.sendMails=a.sendMails.bind(Object(q.a)(Object(q.a)(a))),a.sendToBexio=a.sendToBexio.bind(Object(q.a)(Object(q.a)(a))),a.onCheck=a.onCheck.bind(Object(q.a)(Object(q.a)(a))),a.reclaim=a.reclaim.bind(Object(q.a)(Object(q.a)(a))),a.transfer=a.transfer.bind(Object(q.a)(Object(q.a)(a))),a.state={modalShow:!1,modalType:"",selected:[]},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"hideModal",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({modalShow:!1});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showMailModal",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({modalShow:!0,modalType:"mail"});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showBexioModal",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({modalShow:!0,modalType:"bexio"});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendMails",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.sendMails(this.props.payout.id,this.state.selected);case 2:this.setState({modalShow:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendToBexio",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.sendToBexio(this.props.payout.id,this.state.selected);case 2:this.setState({modalShow:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"reclaim",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.props.reclaim(this.props.payout.id));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=Object(W.a)(Y.a.mark(function e(){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.selected.length>0)){e.next=2;break}return e.abrupt("return",this.props.transfer(this.props.payout.id,this.state.selected));case 2:this.props.showError("Bitte zuerst auswahl t\xe4tigen!");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"elementView",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){var a;return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.currentTarget.parentNode&&t.currentTarget.parentNode.parentNode&&t.currentTarget.parentNode.parentNode.parentElement&&(a=t.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key"),1==t.button?window.open(document.location.origin+this.props.history.location.pathname+"/".concat(a)):this.props.history.push(this.props.history.location.pathname+"/".concat(a)));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onCheck",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentNode&&e.currentTarget.parentNode.parentNode.parentElement){var t=e.currentTarget.parentNode.parentNode.parentElement.getAttribute("data-key");if(t){var a=parseInt(t);this.state.selected.indexOf(a)>-1?this.setState({selected:Object(te.a)(this.state.selected.filter(function(e){return e!==a}))}):this.setState({selected:Object(te.a)(this.state.selected).concat([parseInt(t)])})}}}},{key:"renderCompensationsAddModal",value:function(){var e=this;return"mail"===this.state.modalType?0===this.state.selected.length?s.a.createElement(ke,{show:this.state.modalShow,header:s.a.createElement("h3",null,"E-Mails versenden"),body:s.a.createElement("span",null,"Willst du wirklich eine E-Mail ",s.a.createElement("b",null,"an alle")," mit der Entsch\xe4digungsauszahlung senden?"),footer:s.a.createElement(je.a,null,s.a.createElement(Pe.a,{variant:"success",onClick:this.sendMails},"Senden"),s.a.createElement(Pe.a,{variant:"danger",onClick:this.hideModal},"Abbrechen"))}):s.a.createElement(ke,{show:this.state.modalShow,header:s.a.createElement("h3",null,"E-Mails versenden"),body:s.a.createElement("span",null,"Willst du wirklich eine E-Mail ",s.a.createElement("b",null,"an folgende Personen")," mit der Entsch\xe4digungsauszahlung senden?",s.a.createElement("ul",null,this.state.selected.map(function(t){var a=e.props.payout.compensationsByMember[t][0].member;return s.a.createElement("li",null,a.lastname," ",a.firstname)}))),footer:s.a.createElement(je.a,null,s.a.createElement(Pe.a,{variant:"success",onClick:this.sendMails},"Senden"),s.a.createElement(Pe.a,{variant:"danger",onClick:this.hideModal},"Abbrechen"))}):"bexio"===this.state.modalType?0===this.state.selected.length?s.a.createElement(ke,{show:this.state.modalShow,header:s.a.createElement("h3",null,"Bexio \xdcbertrag"),body:s.a.createElement("span",null,"Willst du wirklich ",s.a.createElement("b",null,"alle")," Entsch\xe4digungen an Bexio \xfcbertragen?"),footer:s.a.createElement(je.a,null,s.a.createElement(Pe.a,{variant:"success",onClick:this.sendToBexio},"Ja"),s.a.createElement(Pe.a,{variant:"danger",onClick:this.hideModal},"Nein"))}):s.a.createElement(ke,{show:this.state.modalShow,header:s.a.createElement("h3",null,"Bexio \xdcbertrag"),body:s.a.createElement("span",null,"Willst du wirklich ",s.a.createElement("b",null,"folgende Entsch\xe4digungen")," an Bexio \xfcbertragen?",s.a.createElement("ul",null,this.state.selected.map(function(t){var a=e.props.payout.compensationsByMember[t][0].member;return s.a.createElement("li",null,a.lastname," ",a.firstname)}))),footer:s.a.createElement(je.a,null,s.a.createElement(Pe.a,{variant:"success",onClick:this.sendToBexio},"Ja"),s.a.createElement(Pe.a,{variant:"danger",onClick:this.hideModal},"Abbrechen"))}):null}},{key:"render",value:function(){var e=this;if(this.props.loading||!this.props.payout)return s.a.createElement(A.a,{title:"Loading..."},s.a.createElement(U.a,null));var t=[],a=function(a){var n=e.props.payout.compensationsByMember[a],r=0;n.map(function(e){return r+=parseFloat(e.amount.toFixed(2))}),t.push({id:n[0].member.id,member:n[0].member,total:r})};for(var n in this.props.payout.compensationsByMember)a(n);return s.a.createElement(A.a,{title:"Auszahlung ".concat(this.props.payout.from.toLocaleDateString()," - ").concat(this.props.payout.until.toLocaleDateString())},s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Informationen"},s.a.createElement(re,{id:"from",title:"Von",value:this.props.payout.from,type:"date"}),s.a.createElement(re,{id:"until",title:"Bis",value:this.props.payout.until,type:"date"}),s.a.createElement(re,{id:"countCompensations",title:"Anzahl Entsch\xe4diungen",value:this.props.payout.compensations.length,editable:!1}),s.a.createElement(re,{id:"total",title:"Total",value:"CHF ".concat(this.props.payout.total.toFixed(2))}),s.a.createElement(re,{id:"totalWithoutMinus",title:"Total ohne Minus",value:"CHF ".concat(this.props.payout.totalWithoutMinus.toFixed(2))}))),s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Actions"},s.a.createElement("a",{className:"btn btn-block btn-outline-primary",target:"_blank",href:"".concat(P.a.apiEndpoint,"/api/payouts/").concat(this.props.payout.id,"/pdf")},"PDF"),s.a.createElement(Pe.a,{block:!0,variant:"outline-primary",onClick:this.showMailModal},"Best\xe4tigung E-Mails verschicken"),s.a.createElement(Pe.a,{block:!0,variant:"outline-primary",onClick:this.showBexioModal},"An Bexio \xfcbertragen"),s.a.createElement(Pe.a,{block:!0,variant:"outline-primary",onClick:function(){return e.props.getBankingXml(e.props.payout,e.state.selected)}},"Banking XML herunterladen"),s.a.createElement(Pe.a,{block:!0,variant:"outline-primary",onClick:this.reclaim},"Neu Berechnen"),s.a.createElement(Pe.a,{block:!0,variant:"outline-primary",onClick:function(){return e.transfer()}},"\xdcbertragen")))),s.a.createElement(V.a,null,s.a.createElement(F.a,null,s.a.createElement(B.a,{title:"Entsch\xe4diungen"},s.a.createElement(de.a,{columns:[{text:"Mitglied",keys:{member:["lastname","firstname"]},sortable:!0},{text:"Betrag",keys:["total"],prefix:"CHF ",sortable:!0,format:"toFixed(2)"},{text:"Actions",keys:["id"],content:s.a.createElement("div",{className:"btn-group"},s.a.createElement(Pe.a,{variant:"success",className:"view",onClick:this.elementView},s.a.createElement(he.a,{icon:"eye"})))}],checkable:!0,onCheck:this.onCheck,defaultSort:{keys:["_member.lastname","firstname"],direction:"asc"},data:t})))),this.renderCompensationsAddModal())}}]),t}(o.Component),at=Object(f.c)(function(e,t){return{payout:e.data.payouts.byId[t.match.params.id],loading:e.data.payouts.loading}},function(e,t){var a=function(e,t){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)};return{fetchPayouts:function(){e(k.a.fetchPayouts())},sendMails:function(t,a){return e(k.a.sendPayoutMails(t,a))},sendToBexio:function(t,a){return e(k.a.sendToBexio(t,a))},reclaim:function(t){return e(k.a.reclaimPayout(t))},getBankingXml:function(){var t=Object(W.a)(Y.a.mark(function t(n,r){var i;return Y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.sendToApi("post","".concat(P.a.apiEndpoint,"/api/payouts/xml"),{payoutId:n.id,memberIds:r},e,void 0,void 0,!1);case 2:return i=t.sent,a(new Blob([i]),"Soldperiode_".concat(n.from>new Date("1970-01-01")?n.from.toLocaleDateString():"","_-_").concat(n.until.toLocaleDateString(),".xml")),t.abrupt("return");case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}(),transfer:function(t,a){return k.a.sendToApi("post","".concat(P.a.apiEndpoint,"/api/payouts/transfer"),{payoutId:t,memberIds:a},e)},showError:function(t){return e(E.a.showError(t))}}})(tt),nt=a(188),rt=a.n(nt),it=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).props.payout&&a.props.member||a.props.fetchPayouts(),a.compensationView=a.compensationView.bind(Object(q.a)(Object(q.a)(a))),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"compensationView",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentElement){var t=e.currentTarget.parentNode.parentElement.getAttribute("data-key");1==e.button?window.open(document.location.origin+"/compensation/"+t):this.props.history.push("/compensation/"+t)}}},{key:"render",value:function(){var e=this;if(this.props.loading||!this.props.payout)return s.a.createElement(A.a,{title:"Loading..."},s.a.createElement(U.a,null));var t=0;return this.props.member.compensations.map(function(e){return t+=parseFloat(e.amount.toFixed(2))}),s.a.createElement(A.a,{title:"Auszahlung ".concat(this.props.payout.from.toLocaleDateString()," - ").concat(this.props.payout.until.toLocaleDateString()," / ").concat(this.props.member.firstname," ").concat(this.props.member.lastname)},s.a.createElement(V.a,null,s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Informationen"},s.a.createElement(re,{id:"member",title:"Mitglied"},this.props.member.firstname," ",this.props.member.lastname),s.a.createElement(re,{id:"amountCompensations",title:"Anzahl Entsch\xe4digungen"},this.props.member.compensations.length),s.a.createElement(re,{id:"total",title:"Total"},"CHF ",t.toFixed(2)),s.a.createElement(re,{id:"payout",title:"Auszahlung"},this.props.payout.until.toLocaleDateString()))),s.a.createElement(F.a,{className:"col-md-6"},s.a.createElement(B.a,{title:"Actions"},s.a.createElement(Pe.a,{block:!0,variant:"outline-primary",onClick:Object(W.a)(Y.a.mark(function t(){return Y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.memberPdf(e.props.payout.id,e.props.member);case 2:case"end":return t.stop()}},t,this)}))},"PDF")))),s.a.createElement(V.a,null,s.a.createElement(F.a,null,s.a.createElement(B.a,{title:"Entsch\xe4digungen"},s.a.createElement(de.a,{columns:[{text:"Datum",keys:["date"],sortable:!0},{text:"Beschreibung",keys:["description"],sortable:!0},{text:"Betrag",keys:["amount"],prefix:"CHF ",sortable:!0,format:"toFixed(2)"},{text:"Genehmigt",keys:["approved"],sortable:!0},{text:"Ausbezahlt",keys:["paied"],sortable:!0},{text:"Actions",keys:["_id"],content:s.a.createElement(rt.a,{variant:"success",className:"view",onMouseUp:this.compensationView},s.a.createElement(he.a,{icon:"eye"}))}],defaultSort:{keys:["date"],direction:"desc"},data:this.props.member.compensations})))))}}]),t}(o.Component),ot=Object(f.c)(function(e,t){var a=e.data.payouts.byId[t.match.params.id];return a?{payout:a,member:Object.assign({},a.compensationsByMember[t.match.params.memberId][0].member,{compensations:a.compensationsByMember[t.match.params.memberId]}),loading:e.data.payouts.loading}:{payout:a,member:{},loading:!1}},function(e,t){var a=function(e,t){var a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)};return{fetchPayouts:function(){e(k.a.fetchPayouts())},memberPdf:function(){var t=Object(W.a)(Y.a.mark(function t(n,r){var i;return Y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.a.sendToApi("post","".concat(P.a.apiEndpoint,"/api/payouts/member/pdf"),{payoutId:n,memberId:r.id},e,void 0,{responseType:"arraybuffer"});case 2:return i=t.sent,a(new Blob([i],{type:"application/pdf"}),"Auszahlung Verkehrskadettenentsch\xe4digung ".concat(r.lastname," ").concat(r.firstname,".pdf")),t.abrupt("return");case 5:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()}})(it),st=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onInputChange=a.onInputChange.bind(Object(q.a)(Object(q.a)(a))),a.onSave=a.onSave.bind(Object(q.a)(Object(q.a)(a))),a.state={from:"",until:""},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"validate",value:function(){if(this.formEl){var e=this.formEl.checkValidity();return this.formEl.className="was-validated",e}return!1}},{key:"onInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(ae.a)({},n,a))}},{key:"onSave",value:function(){var e=Object(W.a)(Y.a.mark(function e(t){return Y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.formEl){e.next=6;break}if(!this.validate()){e.next=6;break}return e.next=5,this.props.save({from:new Date(this.state.from||"01/01/1970"),until:new Date(this.state.until)});case 5:this.props.history.push("/payouts");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return s.a.createElement(A.a,{title:"Auszahlung hinzuf\xfcgen"},s.a.createElement(V.a,null,s.a.createElement(F.a,null,s.a.createElement(B.a,null,s.a.createElement("form",{id:"addPayout",ref:function(t){e.formEl=t}},s.a.createElement("h5",null,"Von (optional)"),s.a.createElement("input",{name:"from",type:"date",className:"form-control",value:this.state.from,onChange:this.onInputChange}),s.a.createElement("br",null),s.a.createElement("h5",null,"Bis"),s.a.createElement("input",{name:"until",type:"date",className:"form-control",value:this.state.until,onChange:this.onInputChange,required:!0}),s.a.createElement("br",null),s.a.createElement(Pe.a,{variant:"primary",block:!0,onClick:this.onSave},"Speichern"))))))}}]),t}(o.Component),ct=Object(f.c)(function(){},function(e){return{save:function(t){e(k.a.addPayout(t))}}})(st),lt=function(e){function t(e,a){var n,r;return Object(u.a)(this,t),n=Object(d.a)(this,Object(h.a)(t).call(this,e,a)),P.a.loadConfig(),n.history=Object(L.a)(),n.store=(r=n.history,Object(v.d)(Object(v.c)(Object(b.a)({},j,{router:Object(N.b)(r)})),Object(x.composeWithDevTools)(Object(v.a)(C.a,Object(S.a)(r))))),n.store.getState(),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return s.a.createElement(f.a,{store:this.store},s.a.createElement("div",{className:"body"},s.a.createElement(y.ToastContainer,{position:"top-center",autoClose:5e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,draggable:!0,pauseOnHover:!0}),s.a.createElement(N.a,{history:this.history},s.a.createElement(w.a,null,s.a.createElement(T.a,{exact:!0,path:"/",component:function(){return s.a.createElement(I.a,{to:"/login"})}}),s.a.createElement(T.a,{exact:!0,path:"/login",component:we}),s.a.createElement(T.a,{exact:!0,path:"/login?source=:source",component:we}),s.a.createElement(D,{exact:!0,path:"/dashboard",roles:[_.a.AUTHENTICATED],component:z}),s.a.createElement(D,{exact:!0,path:"/me",roles:[_.a.AUTHENTICATED],component:_e}),s.a.createElement(D,{exact:!0,path:"/members",roles:[_.a.MEMBERS_READ],component:ee}),s.a.createElement(D,{exact:!0,path:"/members/pdf",roles:[_.a.MEMBERS_READ],component:Qe}),s.a.createElement(D,{exact:!0,path:"/mailing-lists",roles:[_.a.MAILING_LISTS],component:Ye}),s.a.createElement(D,{exact:!0,path:"/draft/collection-points",roles:[_.a.DRAFT_READ],component:We}),s.a.createElement(D,{exact:!0,path:"/draft/collection-points/add",roles:[_.a.DRAFT_EDIT,_.a.DRAFT_CREATE],component:Xe}),s.a.createElement(D,{exact:!0,path:"/contact/:id",roles:[_.a.CONTACTS_READ,_.a.MEMBERS_READ],component:be}),s.a.createElement(D,{exact:!0,path:"/orders",roles:[_.a.ORDERS_READ],component:ve}),s.a.createElement(D,{exact:!0,path:"/order/:id",roles:[_.a.ORDERS_READ],component:ye}),s.a.createElement(D,{exact:!0,path:"/billing-reports",roles:[_.a.BILLINGREPORTS_READ,_.a.BILLINGREPORTS_CREATE],component:ge}),s.a.createElement(D,{exact:!0,path:"/billing-reports/add",roles:[_.a.BILLINGREPORTS_CREATE],component:Se.a}),s.a.createElement(D,{exact:!0,path:"/billing-report/:id",roles:[_.a.BILLINGREPORTS_CREATE,_.a.BILLINGREPORTS_READ],component:Be}),s.a.createElement(D,{exact:!0,path:"/compensations",roles:[_.a.COMPENSATIONS_READ],component:Ne}),s.a.createElement(D,{exact:!0,path:"/compensations/add",roles:[_.a.COMPENSATIONS_CREATE],component:Ve}),s.a.createElement(D,{exact:!0,path:"/compensation/:id",roles:[_.a.COMPENSATIONS_READ],component:ze}),s.a.createElement(D,{exact:!0,path:"/payouts",roles:[_.a.PAYOUTS_READ],component:et}),s.a.createElement(D,{exact:!0,path:"/payouts/add",roles:[_.a.PAYOUTS_CREATE],component:ct}),s.a.createElement(D,{exact:!0,path:"/payout/:id",roles:[_.a.PAYOUTS_READ],component:at}),s.a.createElement(D,{exact:!0,path:"/payout/:id/:memberId",roles:[_.a.PAYOUTS_READ],component:ot}),s.a.createElement(D,{exact:!0,path:"/users",roles:[_.a.ADMIN],component:Te}),s.a.createElement(D,{exact:!0,path:"/user/:id",roles:[_.a.ADMIN],component:_e}),s.a.createElement(T.a,{path:"/*",component:Ue})))))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(lt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},47:function(e,t,a){"use strict";a.d(t,"a",function(){return f});var n=a(3),r=a.n(n),i=a(10),o=a(4),s=a(5),c=a(7),l=a(6),u=a(8),p=a(2),d=a(0),h=a.n(d),m=a(19),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).previousStep=a.previousStep.bind(Object(p.a)(Object(p.a)(a))),a.nextStep=a.nextStep.bind(Object(p.a)(Object(p.a)(a))),a.renderBackButton=a.renderBackButton.bind(Object(p.a)(Object(p.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"nextStep",value:function(){var e=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,!this.props.onNextStep){e.next=5;break}return e.next=4,this.props.onNextStep();case 4:t=e.sent;case 5:t&&this.props.nextStep&&this.props.nextStep();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"previousStep",value:function(){var e=Object(i.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.onPreviousStep){e.next=3;break}return e.next=3,this.props.onPreviousStep();case 3:this.props.previousStep&&this.props.previousStep();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderBackButton",value:function(){return(this.props.currentStep||0)>1?h.a.createElement(m.a,{variant:"secondary",onClick:this.previousStep},"Zur\xfcck"):h.a.createElement("div",null)}},{key:"render",value:function(){var e="Weiter",t="btn btn-primary";return this.props.currentStep===this.props.totalSteps&&(e="Speichern",t="btn btn-success"),h.a.createElement("div",null,h.a.createElement("div",{className:"wizard-step-header"},h.a.createElement("h4",null,this.props.title)),h.a.createElement("div",{className:"wizard-step-body"},this.props.children),h.a.createElement("div",{className:"d-flex justify-content-between wizard-step-footer"},this.renderBackButton(),h.a.createElement(m.a,{className:t,onClick:this.nextStep},e)))}}]),t}(d.Component)},49:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(0),l=a.n(c),u=a(9),p=a(48),d=a(11),h=function(e){function t(e){var a;if(Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).props.defaultValue instanceof Array){var r=[],s=!0,c=!1,l=void 0;try{for(var u,p=a.props.defaultValue[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var d=u.value;r.push({value:d.id.toString(),label:d.firstname+" "+d.lastname})}}catch(h){c=!0,l=h}finally{try{s||null==p.return||p.return()}finally{if(c)throw l}}a.state={value:r}}else a.state={};return a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.defaultValue instanceof Array){var t=[],a=!0,n=!1,r=void 0;try{for(var i,o=e.defaultValue[Symbol.iterator]();!(a=(i=o.next()).done);a=!0){var s=i.value;t.push({value:s.id.toString(),label:s.firstname+" "+s.lastname})}}catch(c){n=!0,r=c}finally{try{a||null==o.return||o.return()}finally{if(n)throw r}}this.setState({value:t})}}},{key:"componentWillMount",value:function(){this.props.members.ids.length<1&&this.props.fetchMembers()}},{key:"prepareOptions",value:function(){var e=[];if(Object.keys(this.props.members.byId).length>0)for(var t in this.props.members.byId){var a=this.props.members.byId[t];e.push({label:a.firstname+" "+a.lastname,value:t})}return e}},{key:"onChange",value:function(e){var t=[e];this.props.isMulti&&(t=e),this.setState({value:t});var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value;a.push(this.props.members.byId[c.value])}}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}this.props.onChange&&(this.props.isMulti?this.props.onChange(a):this.props.onChange(a[0]))}},{key:"prepareValue",value:function(){return this.props.isMulti?this.state.value||[]:(this.state.value||[])[0]}},{key:"render",value:function(){var e=this;return this.props.loading?null:l.a.createElement(p.a,{ref:function(t){e.props.ref&&e.props.ref(t)},isClearable:!0,options:this.prepareOptions(),backspaceRemovesValue:!0,hideSelectedOptions:!0,openMenuOnFocus:!0,isMulti:this.props.isMulti||!1,onChange:this.onChange.bind(this),value:this.prepareValue()})}}]),t}(c.Component),m=Object(d.c)(function(e,t){return{members:e.data.members,loading:e.data.members.loading}},function(e,t){return{fetchMembers:function(){e(u.a.fetchMembers())}}})(h)},58:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a(4),r=a(5),i=a(7),o=a(6),s=a(8),c=a(2),l=a(0),u=a.n(l),p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).onChange=a.onChange.bind(Object(c.a)(Object(c.a)(a))),a.state={checked:a.props.checked||!1},a}return Object(s.a)(t,e),Object(r.a)(t,[{key:"onChange",value:function(e){this.setState({checked:!this.state.checked}),this.props.onChange(e)}},{key:"componentWillReceiveProps",value:function(e){e.hasOwnProperty("checked")&&e.checked!==this.state.checked&&this.setState({checked:e.checked||!1})}},{key:"render",value:function(){return u.a.createElement("span",null,u.a.createElement("input",{id:this.props.id||"",type:"checkbox",checked:this.state.checked,onChange:this.onChange}),u.a.createElement("label",{htmlFor:"food"},this.props.label||""))}}]),t}(l.Component)},84:function(e,t,a){"use strict";a.d(t,"a",function(){return E});var n=a(3),r=a.n(n),i=a(10),o=a(26),s=a(4),c=a(5),l=a(7),u=a(6),p=a(8),d=a(2),h=a(0),m=a.n(h),f=a(29),b=a(47),v=a(49),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onAdd=a.onAdd.bind(Object(d.a)(Object(d.a)(a))),a.onInputChange=a.onInputChange.bind(Object(d.a)(Object(d.a)(a))),a.onSelectChange=a.onSelectChange.bind(Object(d.a)(Object(d.a)(a))),a.removeTableItem=a.removeTableItem.bind(Object(d.a)(Object(d.a)(a))),a.validate=a.validate.bind(Object(d.a)(Object(d.a)(a))),a.state={tableEntries:{},vks:[],from:"",until:"",charge:!0},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"onAdd",value:function(e){if(e.preventDefault(),this.formEl){var t=this.state.tableEntries,a=this.formEl.checkValidity();if(this.formEl.className="was-validated",a&&(a=this.state.vks.length>0),a){var n=new Date("01/01/1970 "+this.state.from),r=new Date("01/01/1970 "+this.state.until),i=(r.getTime()-n.getTime())/1e3/60/60;i<0&&(i+=24);var o=!0,s=!1,c=void 0;try{for(var l,u=this.state.vks[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var p=l.value;t[Math.round(1e5*Math.random())]={id:p.id,member:p,from:n,until:r,charge:this.state.charge,totalHours:i}}}catch(d){s=!0,c=d}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}this.setState({tableEntries:t,vks:[],from:"",until:"",charge:!0})}}}},{key:"onInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(o.a)({},n,a))}},{key:"onSelectChange",value:function(e){if(e){var t=e;this.setState({vks:t})}}},{key:"removeTableItem",value:function(e){if(e.currentTarget.parentNode&&e.currentTarget.parentNode.parentElement){var t=e.currentTarget.parentNode.parentElement.getAttribute("data-key");if(t){var a=this.state.tableEntries;delete a[t.replace("_","")],this.setState({tableEntries:a})}}}},{key:"validate",value:function(){var e=Object(i.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Object.keys(this.state.tableEntries).length>0)){e.next=3;break}return this.props.onNext({vks:this.state.tableEntries}),e.abrupt("return",!0);case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return m.a.createElement(b.a,Object.assign({title:"Einsatzzeiten",onNextStep:this.validate,onPreviousStep:this.props.onPrevious||Object(i.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e,this)}))},this.props),m.a.createElement("form",{ref:function(t){return e.formEl=t}},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col"},m.a.createElement("h5",null,"VKs"),m.a.createElement(v.a,{onChange:this.onSelectChange,isMulti:!0,defaultValue:this.state.vks})),m.a.createElement("div",{className:"col-2"},m.a.createElement("h5",null,"Verrechnen"),m.a.createElement("span",{className:"switch switch-sm"},m.a.createElement("input",{type:"checkbox",className:"switch",id:"charge",name:"charge",checked:this.state.charge,onChange:this.onInputChange}),m.a.createElement("label",{htmlFor:"charge"})))),m.a.createElement("br",null),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col"},m.a.createElement("h5",null,"Von"),m.a.createElement("input",{type:"time",name:"from",value:this.state.from,onChange:this.onInputChange,className:"form-control",required:!0})),m.a.createElement("div",{className:"col"},m.a.createElement("h5",null,"Bis"),m.a.createElement("input",{type:"time",name:"until",value:this.state.until,onChange:this.onInputChange,className:"form-control",required:!0}))),m.a.createElement("br",null),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col"},m.a.createElement("button",{className:"btn btn-primary btn-block",onClick:this.onAdd},"Hinzuf\xfcgen")))),m.a.createElement("br",null),m.a.createElement("div",{className:"row"},m.a.createElement(f.a,{columns:[{text:"VK",keys:{member:["firstname","lastname"]},sortable:!0},{text:"Von",keys:["from"],format:"toLocaleTimeString",sortable:!0},{text:"Bis",keys:["until"],format:"toLocaleTimeString",sortable:!0},{text:"Anzahl Stunden",keys:["totalHours"],sortable:!0},{text:"Verrechnet",keys:["charge"],sortable:!0},{text:"Actions",keys:["id"],content:m.a.createElement("button",{className:"btn btn-danger",onClick:this.removeTableItem},"\u2a2f")}],defaultSort:{keys:["from"],direction:"asc"},data:this.state.tableEntries})))}}]),t}(h.Component)},9:function(e,t,a){"use strict";a.d(t,"b",function(){return h}),a.d(t,"a",function(){return m});var n=a(80),r=a(3),i=a.n(r),o=a(10),s=a(4),c=a(5),l=a(15),u=a(70),p=a.n(u),d=a(17),h={FETCH_USER:"fetch_user",GOT_USER:"got_user",FETCH_MEMBERS:"fetch_members",GOT_MEMBERS:"got_members",EDIT_MEMBER:"edit_member",FETCH_RANKS:"fetch_ranks",GOT_RANKS:"got_ranks",FETCH_CONTACTS:"fetch_contacts",GOT_CONTACTS:"got_contacts",FETCH_ORDERS:"fetch_orders",GOT_ORDERS:"got_orders",FETCH_OPEN_ORDERS:"fetch_open_orders",GOT_OPEN_ORDERS:"got_open_orders",FETCH_BILLING_REPORTS:"fetch_billing_reports",GOT_BILLING_REPORTS:"got_billing_reports",ADD_BILLING_REPORT:"add_billing_report",APPROVE_BILLING_REPORT:"approve_billing_report",DECLINE_BILLING_REPORT:"decline_billing_report",EDIT_BILLING_REPORT:"edit_billing_report",FETCH_COMPENSATION_ENTRIES:"fetch_compensation_entries",GOT_COMPENSATION_ENTRIES:"got_compensation_entries",ADD_COMPENSATION_ENTRIES:"add_compensation_entries",ADD_COMPENSATION_ENTRY:"add_compensation_entry",APPROVE_COMPENSATION_ENTRY:"approve_compensation_entry",DECLINE_COMPENSATION_ENTRY:"dcline_compensation_entry",FETCH_USERS:"fetch_users",GOT_USERS:"got_users",FETCH_COLLECTION_POINTS:"fetch_collection_points",GOT_COLLECTION_POINTS:"got_collection_points",ADD_COLLECTION_POINT:"add_collection_point",ADD_PAYOUT:"add_payout",FETCH_PAYOUTS:"fetch_payouts",GOT_PAYOUTS:"got_payouts",SENDING_PAYOUTS_MAILS:"sending_payouts_mail",SENT_PAYOUTS_MAILS:"sent_payouts_mail",SENDING_PAYOUTS_BEXIO:"sending_payouts_bexio",SENT_PAYOUTS_BEXIO:"sent_payouts_bexio"},m=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"fetchUser",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.fetchFromApi(d.a.apiEndpoint+"/api/me",h.FETCH_USER,h.GOT_USER)}},{key:"fetchContacts",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.fetchFromApi(d.a.apiEndpoint+"/api/contacts",h.FETCH_CONTACTS,h.GOT_CONTACTS)}},{key:"fetchMembers",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/members",h.FETCH_MEMBERS,h.GOT_MEMBERS)}},{key:"editMember",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.EDIT_MEMBER}),a.abrupt("return",e.sendToApi("post",d.a.apiEndpoint+"/api/members",t,n,function(){n(e.fetchContacts())}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"fetchRanks",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/ranks",h.FETCH_RANKS,h.GOT_RANKS)}},{key:"fetchOrders",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/orders",h.FETCH_ORDERS,h.GOT_ORDERS)}},{key:"fetchOpenOrders",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/billing-reports/open",h.FETCH_OPEN_ORDERS,h.GOT_OPEN_ORDERS)}},{key:"fetchBillingReports",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/billing-reports",h.FETCH_BILLING_REPORTS,h.GOT_BILLING_REPORTS)}},{key:"addBillingReport",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.ADD_BILLING_REPORT}),a.abrupt("return",e.sendToApi("put",d.a.apiEndpoint+"/api/billing-reports",t,n,function(){n(l.a.showSuccess("Gespeichert!")),n(e.fetchBillingReports())}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"approveBillingReport",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.APPROVE_BILLING_REPORT,payload:t}),a.abrupt("return",e.sendToApi("post",d.a.apiEndpoint+"/api/billing-reports/approve",{id:t},n,function(){n(e.fetchBillingReports())}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"declineBillingReport",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.DECLINE_BILLING_REPORT,payload:t}),a.abrupt("return",e.sendToApi("post",d.a.apiEndpoint+"/api/billing-reports/decline",{id:t},n,function(){n(e.fetchBillingReports())}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"editBillingReport",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.EDIT_BILLING_REPORT}),a.abrupt("return",e.sendToApi("post",d.a.apiEndpoint+"/api/billing-reports",t,n,function(){n(e.fetchBillingReports())}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"fetchCompensationEntries",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/compensations",h.FETCH_COMPENSATION_ENTRIES,h.GOT_COMPENSATION_ENTRIES)}},{key:"addCompensationEntriesForBillingReport",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.ADD_COMPENSATION_ENTRIES}),a.abrupt("return",e.sendToApi("put",d.a.apiEndpoint+"/api/compensations/bulk",t,n,function(){n(e.fetchCompensationEntries()),n(l.a.showSuccess("Gespeichert!"))}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"addCompensationEntry",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.ADD_COMPENSATION_ENTRY}),a.abrupt("return",e.sendToApi("put",d.a.apiEndpoint+"/api/compensations",t,n,function(){n(e.fetchCompensationEntries())}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"approveCompensationEntry",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.APPROVE_COMPENSATION_ENTRY,payload:t}),a.abrupt("return",e.sendToApi("post",d.a.apiEndpoint+"/api/compensations/approve",{id:t},n,function(){n(e.fetchCompensationEntries()),n(l.a.showSuccess("Genehmigt!"))}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"deleteCompensationEntry",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:h.APPROVE_COMPENSATION_ENTRY,payload:t}),a.abrupt("return",e.sendToApi("delete",d.a.apiEndpoint+"/api/compensations",{id:t},n,function(){n(e.fetchCompensationEntries()),n(l.a.showSuccess("Gel\xf6scht!"))}));case 2:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"fetchUsers",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/users",h.FETCH_USERS,h.GOT_USERS)}},{key:"fetchCollectionPoints",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/collection-points",h.FETCH_COLLECTION_POINTS,h.GOT_COLLECTION_POINTS)}},{key:"addCollectionPoint",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,r){n({type:h.ADD_COLLECTION_POINT}),e.sendToApi("put",d.a.apiEndpoint+"/api/collection-points",t,n).then(function(){n(e.fetchCollectionPoints()),n(l.a.showSuccess("Gespeichert!")),a()}).catch(function(e){r(e)})}));case 1:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"fetchPayouts",value:function(){return e.fetchFromApi(d.a.apiEndpoint+"/api/payouts",h.FETCH_PAYOUTS,h.GOT_PAYOUTS)}},{key:"sendPayoutMails",value:function(t,a){return function(){var n=Object(o.a)(i.a.mark(function n(r){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:h.SENDING_PAYOUTS_MAILS}),n.next=3,e.sendToApi("post",d.a.apiEndpoint+"/api/payouts/email",{payoutId:t,memberIds:a},r);case 3:r({type:h.SENT_PAYOUTS_MAILS}),r(l.a.showSuccess("Gesendet!"));case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}},{key:"sendToBexio",value:function(t,a){return function(){var n=Object(o.a)(i.a.mark(function n(r){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:h.SENDING_PAYOUTS_BEXIO}),n.next=3,e.sendToApi("post",d.a.apiEndpoint+"/api/payouts/bexio",{payoutId:t,memberIds:a},r);case 3:r({type:h.SENT_PAYOUTS_BEXIO}),r(l.a.showSuccess("\xdcbertragen!"));case 5:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}()}},{key:"addPayout",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise(function(a,r){n({type:h.ADD_PAYOUT}),e.sendToApi("put",d.a.apiEndpoint+"/api/payouts",t,n).then(function(){n(e.fetchPayouts()),n(l.a.showSuccess("Gespeichert!")),a()}).catch(function(e){r(e)})}));case 1:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"reclaimPayout",value:function(t){return function(){var a=Object(o.a)(i.a.mark(function a(n){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.sendToApi("post",d.a.apiEndpoint+"/api/payouts/reclaim",{id:t},n);case 2:n(e.fetchPayouts()),n(l.a.showSuccess("Done!"));case 4:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}},{key:"fetchFromApi",value:function(t,a,n){return function(){var r=Object(o.a)(i.a.mark(function r(o){return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise(function(r,i){o({type:a}),p.a.get(t,{withCredentials:!0}).then(function(t){var a=e.deepParser(t.data);r(o({type:n,payload:a}))}).catch(function(e){e.response&&403===e.response.status?o(l.a.showError("Zugriff verweigert!")):e.response&&401===e.response.status?o(l.a.logout()):o(l.a.showError("Ooops... Da ist ein Fehler passiert!")),i(e)})}));case 1:case"end":return r.stop()}},r,this)}));return function(e){return r.apply(this,arguments)}}()}},{key:"sendToApi",value:function(t,a,r,i,o,s){var c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];return new Promise(function(u,d){p()(Object(n.a)({},s,{method:t,url:a,data:r,withCredentials:!0,timeout:6e5})).then(function(t){var a=t.data;c&&(a=e.deepParser(a)),o&&o(a),u(a)}).catch(function(e){e.response&&403===e.response.status?i(l.a.showError("Zugriff verweigert!")):e.response&&401===e.response.status?i(l.a.logout()):i(l.a.showError("Ooops... Da ist ein Fehler passiert!")),d(e)})})}},{key:"deepParser",value:function(t){if(t instanceof Array||"object"===typeof t){for(var a in t)t[a]=e.deepParser(t[a]);return t}return/([0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])T(2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9].[0-9][0-9][0-9]Z|[0-9]{4}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1]))/.test(t)?new Date(t):t}}]),e}()}},[[190,2,1]]]);
//# sourceMappingURL=main.b49dd369.chunk.js.map